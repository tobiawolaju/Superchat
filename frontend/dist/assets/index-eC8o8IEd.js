(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&l(h)}).observe(document,{childList:!0,subtree:!0});function i(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(o){if(o.ep)return;o.ep=!0;const f=i(o);fetch(o.href,f)}})();function Dy(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Cf={exports:{}},cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function hE(){if(h_)return cl;h_=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(l,o,f){var h=null;if(f!==void 0&&(h=""+f),o.key!==void 0&&(h=""+o.key),"key"in o){f={};for(var m in o)m!=="key"&&(f[m]=o[m])}else f=o;return o=f.ref,{$$typeof:a,type:l,key:h,ref:o!==void 0?o:null,props:f}}return cl.Fragment=t,cl.jsx=i,cl.jsxs=i,cl}var d_;function dE(){return d_||(d_=1,Cf.exports=hE()),Cf.exports}var C=dE(),wf={exports:{}},$={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function mE(){if(m_)return $;m_=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),S=Symbol.iterator;function R(T){return T===null||typeof T!="object"?null:(T=S&&T[S]||T["@@iterator"],typeof T=="function"?T:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,fe={};function _e(T,L,j){this.props=T,this.context=L,this.refs=fe,this.updater=j||U}_e.prototype.isReactComponent={},_e.prototype.setState=function(T,L){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,L,"setState")},_e.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function De(){}De.prototype=_e.prototype;function Z(T,L,j){this.props=T,this.context=L,this.refs=fe,this.updater=j||U}var Y=Z.prototype=new De;Y.constructor=Z,G(Y,_e.prototype),Y.isPureReactComponent=!0;var W=Array.isArray;function ye(){}var K={H:null,A:null,T:null,S:null},Ke=Object.prototype.hasOwnProperty;function At(T,L,j){var q=j.ref;return{$$typeof:a,type:T,key:L,ref:q!==void 0?q:null,props:j}}function Vn(T,L){return At(T.type,L,T.props)}function gt(T){return typeof T=="object"&&T!==null&&T.$$typeof===a}function _t(T){var L={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(j){return L[j]})}var Ri=/\/+/g;function mn(T,L){return typeof T=="object"&&T!==null&&T.key!=null?_t(""+T.key):L.toString(36)}function Zt(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ye,ye):(T.status="pending",T.then(function(L){T.status==="pending"&&(T.status="fulfilled",T.value=L)},function(L){T.status==="pending"&&(T.status="rejected",T.reason=L)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function M(T,L,j,q,ee){var ae=typeof T;(ae==="undefined"||ae==="boolean")&&(T=null);var be=!1;if(T===null)be=!0;else switch(ae){case"bigint":case"string":case"number":be=!0;break;case"object":switch(T.$$typeof){case a:case t:be=!0;break;case b:return be=T._init,M(be(T._payload),L,j,q,ee)}}if(be)return ee=ee(T),be=q===""?"."+mn(T,0):q,W(ee)?(j="",be!=null&&(j=be.replace(Ri,"$&/")+"/"),M(ee,L,j,"",function(_a){return _a})):ee!=null&&(gt(ee)&&(ee=Vn(ee,j+(ee.key==null||T&&T.key===ee.key?"":(""+ee.key).replace(Ri,"$&/")+"/")+be)),L.push(ee)),1;be=0;var ct=q===""?".":q+":";if(W(T))for(var qe=0;qe<T.length;qe++)q=T[qe],ae=ct+mn(q,qe),be+=M(q,L,j,ae,ee);else if(qe=R(T),typeof qe=="function")for(T=qe.call(T),qe=0;!(q=T.next()).done;)q=q.value,ae=ct+mn(q,qe++),be+=M(q,L,j,ae,ee);else if(ae==="object"){if(typeof T.then=="function")return M(Zt(T),L,j,q,ee);throw L=String(T),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return be}function H(T,L,j){if(T==null)return T;var q=[],ee=0;return M(T,q,"","",function(ae){return L.call(j,ae,ee++)}),q}function X(T){if(T._status===-1){var L=T._result;L=L(),L.then(function(j){(T._status===0||T._status===-1)&&(T._status=1,T._result=j)},function(j){(T._status===0||T._status===-1)&&(T._status=2,T._result=j)}),T._status===-1&&(T._status=0,T._result=L)}if(T._status===1)return T._result.default;throw T._result}var Te=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},Re={map:H,forEach:function(T,L,j){H(T,function(){L.apply(this,arguments)},j)},count:function(T){var L=0;return H(T,function(){L++}),L},toArray:function(T){return H(T,function(L){return L})||[]},only:function(T){if(!gt(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return $.Activity=y,$.Children=Re,$.Component=_e,$.Fragment=i,$.Profiler=o,$.PureComponent=Z,$.StrictMode=l,$.Suspense=g,$.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,$.__COMPILER_RUNTIME={__proto__:null,c:function(T){return K.H.useMemoCache(T)}},$.cache=function(T){return function(){return T.apply(null,arguments)}},$.cacheSignal=function(){return null},$.cloneElement=function(T,L,j){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var q=G({},T.props),ee=T.key;if(L!=null)for(ae in L.key!==void 0&&(ee=""+L.key),L)!Ke.call(L,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&L.ref===void 0||(q[ae]=L[ae]);var ae=arguments.length-2;if(ae===1)q.children=j;else if(1<ae){for(var be=Array(ae),ct=0;ct<ae;ct++)be[ct]=arguments[ct+2];q.children=be}return At(T.type,ee,q)},$.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:f,_context:T},T},$.createElement=function(T,L,j){var q,ee={},ae=null;if(L!=null)for(q in L.key!==void 0&&(ae=""+L.key),L)Ke.call(L,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(ee[q]=L[q]);var be=arguments.length-2;if(be===1)ee.children=j;else if(1<be){for(var ct=Array(be),qe=0;qe<be;qe++)ct[qe]=arguments[qe+2];ee.children=ct}if(T&&T.defaultProps)for(q in be=T.defaultProps,be)ee[q]===void 0&&(ee[q]=be[q]);return At(T,ae,ee)},$.createRef=function(){return{current:null}},$.forwardRef=function(T){return{$$typeof:m,render:T}},$.isValidElement=gt,$.lazy=function(T){return{$$typeof:b,_payload:{_status:-1,_result:T},_init:X}},$.memo=function(T,L){return{$$typeof:p,type:T,compare:L===void 0?null:L}},$.startTransition=function(T){var L=K.T,j={};K.T=j;try{var q=T(),ee=K.S;ee!==null&&ee(j,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(ye,Te)}catch(ae){Te(ae)}finally{L!==null&&j.types!==null&&(L.types=j.types),K.T=L}},$.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},$.use=function(T){return K.H.use(T)},$.useActionState=function(T,L,j){return K.H.useActionState(T,L,j)},$.useCallback=function(T,L){return K.H.useCallback(T,L)},$.useContext=function(T){return K.H.useContext(T)},$.useDebugValue=function(){},$.useDeferredValue=function(T,L){return K.H.useDeferredValue(T,L)},$.useEffect=function(T,L){return K.H.useEffect(T,L)},$.useEffectEvent=function(T){return K.H.useEffectEvent(T)},$.useId=function(){return K.H.useId()},$.useImperativeHandle=function(T,L,j){return K.H.useImperativeHandle(T,L,j)},$.useInsertionEffect=function(T,L){return K.H.useInsertionEffect(T,L)},$.useLayoutEffect=function(T,L){return K.H.useLayoutEffect(T,L)},$.useMemo=function(T,L){return K.H.useMemo(T,L)},$.useOptimistic=function(T,L){return K.H.useOptimistic(T,L)},$.useReducer=function(T,L,j){return K.H.useReducer(T,L,j)},$.useRef=function(T){return K.H.useRef(T)},$.useState=function(T){return K.H.useState(T)},$.useSyncExternalStore=function(T,L,j){return K.H.useSyncExternalStore(T,L,j)},$.useTransition=function(){return K.H.useTransition()},$.version="19.2.4",$}var p_;function mh(){return p_||(p_=1,wf.exports=mE()),wf.exports}var pe=mh();const mo=Dy(pe);var Af={exports:{}},fl={},Nf={exports:{}},xf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function pE(){return g_||(g_=1,(function(a){function t(M,H){var X=M.length;M.push(H);e:for(;0<X;){var Te=X-1>>>1,Re=M[Te];if(0<o(Re,H))M[Te]=H,M[X]=Re,X=Te;else break e}}function i(M){return M.length===0?null:M[0]}function l(M){if(M.length===0)return null;var H=M[0],X=M.pop();if(X!==H){M[0]=X;e:for(var Te=0,Re=M.length,T=Re>>>1;Te<T;){var L=2*(Te+1)-1,j=M[L],q=L+1,ee=M[q];if(0>o(j,X))q<Re&&0>o(ee,j)?(M[Te]=ee,M[q]=X,Te=q):(M[Te]=j,M[L]=X,Te=L);else if(q<Re&&0>o(ee,X))M[Te]=ee,M[q]=X,Te=q;else break e}}return H}function o(M,H){var X=M.sortIndex-H.sortIndex;return X!==0?X:M.id-H.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;a.unstable_now=function(){return f.now()}}else{var h=Date,m=h.now();a.unstable_now=function(){return h.now()-m}}var g=[],p=[],b=1,y=null,S=3,R=!1,U=!1,G=!1,fe=!1,_e=typeof setTimeout=="function"?setTimeout:null,De=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function Y(M){for(var H=i(p);H!==null;){if(H.callback===null)l(p);else if(H.startTime<=M)l(p),H.sortIndex=H.expirationTime,t(g,H);else break;H=i(p)}}function W(M){if(G=!1,Y(M),!U)if(i(g)!==null)U=!0,ye||(ye=!0,_t());else{var H=i(p);H!==null&&Zt(W,H.startTime-M)}}var ye=!1,K=-1,Ke=5,At=-1;function Vn(){return fe?!0:!(a.unstable_now()-At<Ke)}function gt(){if(fe=!1,ye){var M=a.unstable_now();At=M;var H=!0;try{e:{U=!1,G&&(G=!1,De(K),K=-1),R=!0;var X=S;try{t:{for(Y(M),y=i(g);y!==null&&!(y.expirationTime>M&&Vn());){var Te=y.callback;if(typeof Te=="function"){y.callback=null,S=y.priorityLevel;var Re=Te(y.expirationTime<=M);if(M=a.unstable_now(),typeof Re=="function"){y.callback=Re,Y(M),H=!0;break t}y===i(g)&&l(g),Y(M)}else l(g);y=i(g)}if(y!==null)H=!0;else{var T=i(p);T!==null&&Zt(W,T.startTime-M),H=!1}}break e}finally{y=null,S=X,R=!1}H=void 0}}finally{H?_t():ye=!1}}}var _t;if(typeof Z=="function")_t=function(){Z(gt)};else if(typeof MessageChannel<"u"){var Ri=new MessageChannel,mn=Ri.port2;Ri.port1.onmessage=gt,_t=function(){mn.postMessage(null)}}else _t=function(){_e(gt,0)};function Zt(M,H){K=_e(function(){M(a.unstable_now())},H)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(M){M.callback=null},a.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ke=0<M?Math.floor(1e3/M):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(M){switch(S){case 1:case 2:case 3:var H=3;break;default:H=S}var X=S;S=H;try{return M()}finally{S=X}},a.unstable_requestPaint=function(){fe=!0},a.unstable_runWithPriority=function(M,H){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=S;S=M;try{return H()}finally{S=X}},a.unstable_scheduleCallback=function(M,H,X){var Te=a.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Te+X:Te):X=Te,M){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=X+Re,M={id:b++,callback:H,priorityLevel:M,startTime:X,expirationTime:Re,sortIndex:-1},X>Te?(M.sortIndex=X,t(p,M),i(g)===null&&M===i(p)&&(G?(De(K),K=-1):G=!0,Zt(W,X-Te))):(M.sortIndex=Re,t(g,M),U||R||(U=!0,ye||(ye=!0,_t()))),M},a.unstable_shouldYield=Vn,a.unstable_wrapCallback=function(M){var H=S;return function(){var X=S;S=H;try{return M.apply(this,arguments)}finally{S=X}}}})(xf)),xf}var __;function gE(){return __||(__=1,Nf.exports=pE()),Nf.exports}var Rf={exports:{}},ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function _E(){if(y_)return ut;y_=1;var a=mh();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function f(g,p,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:g,containerInfo:p,implementation:b}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,ut.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return f(g,p,null,b)},ut.flushSync=function(g){var p=h.T,b=l.p;try{if(h.T=null,l.p=2,g)return g()}finally{h.T=p,l.p=b,l.d.f()}},ut.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},ut.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},ut.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,y=m(b,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:S,fetchPriority:R}):b==="script"&&l.d.X(g,{crossOrigin:y,integrity:S,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ut.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},ut.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,y=m(b,p.crossOrigin);l.d.L(g,b,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ut.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},ut.requestFormReset=function(g){l.d.r(g)},ut.unstable_batchedUpdates=function(g,p){return g(p)},ut.useFormState=function(g,p,b){return h.H.useFormState(g,p,b)},ut.useFormStatus=function(){return h.H.useHostTransitionStatus()},ut.version="19.2.4",ut}var v_;function yE(){if(v_)return Rf.exports;v_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Rf.exports=_E(),Rf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function vE(){if(b_)return fl;b_=1;var a=gE(),t=mh(),i=yE();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function h(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(f(e)!==e)throw Error(l(188))}function p(e){var n=e.alternate;if(!n){if(n=f(e),n===null)throw Error(l(188));return n!==e?null:e}for(var s=e,r=n;;){var u=s.return;if(u===null)break;var c=u.alternate;if(c===null){if(r=u.return,r!==null){s=r;continue}break}if(u.child===c.child){for(c=u.child;c;){if(c===s)return g(u),e;if(c===r)return g(u),n;c=c.sibling}throw Error(l(188))}if(s.return!==r.return)s=u,r=c;else{for(var d=!1,_=u.child;_;){if(_===s){d=!0,s=u,r=c;break}if(_===r){d=!0,r=u,s=c;break}_=_.sibling}if(!d){for(_=c.child;_;){if(_===s){d=!0,s=c,r=u;break}if(_===r){d=!0,r=c,s=u;break}_=_.sibling}if(!d)throw Error(l(189))}}if(s.alternate!==r)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var y=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),fe=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),De=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),At=Symbol.for("react.activity"),Vn=Symbol.for("react.memo_cache_sentinel"),gt=Symbol.iterator;function _t(e){return e===null||typeof e!="object"?null:(e=gt&&e[gt]||e["@@iterator"],typeof e=="function"?e:null)}var Ri=Symbol.for("react.client.reference");function mn(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ri?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case G:return"Fragment";case _e:return"Profiler";case fe:return"StrictMode";case W:return"Suspense";case ye:return"SuspenseList";case At:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case Z:return e.displayName||"Context";case De:return(e._context.displayName||"Context")+".Consumer";case Y:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return n=e.displayName||null,n!==null?n:mn(e.type)||"Memo";case Ke:n=e._payload,e=e._init;try{return mn(e(n))}catch{}}return null}var Zt=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Te=[],Re=-1;function T(e){return{current:e}}function L(e){0>Re||(e.current=Te[Re],Te[Re]=null,Re--)}function j(e,n){Re++,Te[Re]=e.current,e.current=n}var q=T(null),ee=T(null),ae=T(null),be=T(null);function ct(e,n){switch(j(ae,n),j(ee,e),j(q,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Lg(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Lg(n),e=Ug(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(q),j(q,e)}function qe(){L(q),L(ee),L(ae)}function _a(e){e.memoizedState!==null&&j(be,e);var n=q.current,s=Ug(n,e.type);n!==s&&(j(ee,e),j(q,s))}function Ql(e){ee.current===e&&(L(q),L(ee)),be.current===e&&(L(be),ll._currentValue=X)}var au,fd;function Oi(e){if(au===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);au=n&&n[1]||"",fd=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+au+e+fd}var lu=!1;function ru(e,n){if(!e||lu)return"";lu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(n){var k=function(){throw Error()};if(Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(O){var x=O}Reflect.construct(e,[],k)}else{try{k.call()}catch(O){x=O}e.call(k.prototype)}}else{try{throw Error()}catch(O){x=O}(k=e())&&typeof k.catch=="function"&&k.catch(function(){})}}catch(O){if(O&&x&&typeof O.stack=="string")return[O.stack,x.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=r.DetermineComponentFrameRoot(),d=c[0],_=c[1];if(d&&_){var v=d.split(`
`),N=_.split(`
`);for(u=r=0;r<v.length&&!v[r].includes("DetermineComponentFrameRoot");)r++;for(;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;if(r===v.length||u===N.length)for(r=v.length-1,u=N.length-1;1<=r&&0<=u&&v[r]!==N[u];)u--;for(;1<=r&&0<=u;r--,u--)if(v[r]!==N[u]){if(r!==1||u!==1)do if(r--,u--,0>u||v[r]!==N[u]){var D=`
`+v[r].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=r&&0<=u);break}}}finally{lu=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Oi(s):""}function G0(e,n){switch(e.tag){case 26:case 27:case 5:return Oi(e.type);case 16:return Oi("Lazy");case 13:return e.child!==n&&n!==null?Oi("Suspense Fallback"):Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return ru(e.type,!1);case 11:return ru(e.type.render,!1);case 1:return ru(e.type,!0);case 31:return Oi("Activity");default:return""}}function hd(e){try{var n="",s=null;do n+=G0(e,s),s=e,e=e.return;while(e);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var ou=Object.prototype.hasOwnProperty,uu=a.unstable_scheduleCallback,cu=a.unstable_cancelCallback,P0=a.unstable_shouldYield,Y0=a.unstable_requestPaint,Nt=a.unstable_now,Q0=a.unstable_getCurrentPriorityLevel,dd=a.unstable_ImmediatePriority,md=a.unstable_UserBlockingPriority,Fl=a.unstable_NormalPriority,F0=a.unstable_LowPriority,pd=a.unstable_IdlePriority,K0=a.log,X0=a.unstable_setDisableYieldValue,ya=null,xt=null;function Gn(e){if(typeof K0=="function"&&X0(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(ya,e)}catch{}}var Rt=Math.clz32?Math.clz32:J0,Z0=Math.log,W0=Math.LN2;function J0(e){return e>>>=0,e===0?32:31-(Z0(e)/W0|0)|0}var Kl=256,Xl=262144,Zl=4194304;function Di(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Wl(e,n,s){var r=e.pendingLanes;if(r===0)return 0;var u=0,c=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var _=r&134217727;return _!==0?(r=_&~c,r!==0?u=Di(r):(d&=_,d!==0?u=Di(d):s||(s=_&~e,s!==0&&(u=Di(s))))):(_=r&~c,_!==0?u=Di(_):d!==0?u=Di(d):s||(s=r&~e,s!==0&&(u=Di(s)))),u===0?0:n!==0&&n!==u&&(n&c)===0&&(c=u&-u,s=n&-n,c>=s||c===32&&(s&4194048)!==0)?n:u}function va(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function $0(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gd(){var e=Zl;return Zl<<=1,(Zl&62914560)===0&&(Zl=4194304),e}function fu(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function ba(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function eb(e,n,s,r,u,c){var d=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var _=e.entanglements,v=e.expirationTimes,N=e.hiddenUpdates;for(s=d&~s;0<s;){var D=31-Rt(s),k=1<<D;_[D]=0,v[D]=-1;var x=N[D];if(x!==null)for(N[D]=null,D=0;D<x.length;D++){var O=x[D];O!==null&&(O.lane&=-536870913)}s&=~k}r!==0&&_d(e,r,0),c!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=c&~(d&~n))}function _d(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var r=31-Rt(n);e.entangledLanes|=n,e.entanglements[r]=e.entanglements[r]|1073741824|s&261930}function yd(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var r=31-Rt(s),u=1<<r;u&n|e[r]&n&&(e[r]|=n),s&=~u}}function vd(e,n){var s=n&-n;return s=(s&42)!==0?1:hu(s),(s&(e.suspendedLanes|n))!==0?0:s}function hu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function du(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bd(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:a_(e.type))}function Sd(e,n){var s=H.p;try{return H.p=e,n()}finally{H.p=s}}var Pn=Math.random().toString(36).slice(2),nt="__reactFiber$"+Pn,yt="__reactProps$"+Pn,os="__reactContainer$"+Pn,mu="__reactEvents$"+Pn,tb="__reactListeners$"+Pn,nb="__reactHandles$"+Pn,Ed="__reactResources$"+Pn,Sa="__reactMarker$"+Pn;function pu(e){delete e[nt],delete e[yt],delete e[mu],delete e[tb],delete e[nb]}function us(e){var n=e[nt];if(n)return n;for(var s=e.parentNode;s;){if(n=s[os]||s[nt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Gg(e);e!==null;){if(s=e[nt])return s;e=Gg(e)}return n}e=s,s=e.parentNode}return null}function cs(e){if(e=e[nt]||e[os]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ea(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function fs(e){var n=e[Ed];return n||(n=e[Ed]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Je(e){e[Sa]=!0}var Td=new Set,Cd={};function Mi(e,n){hs(e,n),hs(e+"Capture",n)}function hs(e,n){for(Cd[e]=n,e=0;e<n.length;e++)Td.add(n[e])}var ib=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wd={},Ad={};function sb(e){return ou.call(Ad,e)?!0:ou.call(wd,e)?!1:ib.test(e)?Ad[e]=!0:(wd[e]=!0,!1)}function Jl(e,n,s){if(sb(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var r=n.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function $l(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function pn(e,n,s,r){if(r===null)e.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+r)}}function zt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nd(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ab(e,n,s){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,c=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(d){s=""+d,c.call(this,d)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(d){s=""+d},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function gu(e){if(!e._valueTracker){var n=Nd(e)?"checked":"value";e._valueTracker=ab(e,n,""+e[n])}}function xd(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),r="";return e&&(r=Nd(e)?e.checked?"true":"false":e.value),e=r,e!==s?(n.setValue(e),!0):!1}function er(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var lb=/[\n"\\]/g;function Ht(e){return e.replace(lb,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function _u(e,n,s,r,u,c,d,_){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),n!=null?d==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+zt(n)):e.value!==""+zt(n)&&(e.value=""+zt(n)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),n!=null?yu(e,d,zt(n)):s!=null?yu(e,d,zt(s)):r!=null&&e.removeAttribute("value"),u==null&&c!=null&&(e.defaultChecked=!!c),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+zt(_):e.removeAttribute("name")}function Rd(e,n,s,r,u,c,d,_){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),n!=null||s!=null){if(!(c!=="submit"&&c!=="reset"||n!=null)){gu(e);return}s=s!=null?""+zt(s):"",n=n!=null?""+zt(n):s,_||n===e.value||(e.value=n),e.defaultValue=n}r=r??u,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=_?e.checked:!!r,e.defaultChecked=!!r,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),gu(e)}function yu(e,n,s){n==="number"&&er(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function ds(e,n,s,r){if(e=e.options,n){n={};for(var u=0;u<s.length;u++)n["$"+s[u]]=!0;for(s=0;s<e.length;s++)u=n.hasOwnProperty("$"+e[s].value),e[s].selected!==u&&(e[s].selected=u),u&&r&&(e[s].defaultSelected=!0)}else{for(s=""+zt(s),n=null,u=0;u<e.length;u++){if(e[u].value===s){e[u].selected=!0,r&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function Od(e,n,s){if(n!=null&&(n=""+zt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+zt(s):""}function Dd(e,n,s,r){if(n==null){if(r!=null){if(s!=null)throw Error(l(92));if(Zt(r)){if(1<r.length)throw Error(l(93));r=r[0]}s=r}s==null&&(s=""),n=s}s=zt(n),e.defaultValue=s,r=e.textContent,r===s&&r!==""&&r!==null&&(e.value=r),gu(e)}function ms(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var rb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Md(e,n,s){var r=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?r?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":r?e.setProperty(n,s):typeof s!="number"||s===0||rb.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Id(e,n,s){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,s!=null){for(var r in s)!s.hasOwnProperty(r)||n!=null&&n.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var u in n)r=n[u],n.hasOwnProperty(u)&&s[u]!==r&&Md(e,u,r)}else for(var c in n)n.hasOwnProperty(c)&&Md(e,c,n[c])}function vu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ob=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ub=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tr(e){return ub.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function gn(){}var bu=null;function Su(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ps=null,gs=null;function kd(e){var n=cs(e);if(n&&(e=n.stateNode)){var s=e[yt]||null;e:switch(e=n.stateNode,n.type){case"input":if(_u(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ht(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var r=s[n];if(r!==e&&r.form===e.form){var u=r[yt]||null;if(!u)throw Error(l(90));_u(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<s.length;n++)r=s[n],r.form===e.form&&xd(r)}break e;case"textarea":Od(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&ds(e,!!s.multiple,n,!1)}}}var Eu=!1;function Ld(e,n,s){if(Eu)return e(n,s);Eu=!0;try{var r=e(n);return r}finally{if(Eu=!1,(ps!==null||gs!==null)&&(Vr(),ps&&(n=ps,e=gs,gs=ps=null,kd(n),e)))for(n=0;n<e.length;n++)kd(e[n])}}function Ta(e,n){var s=e.stateNode;if(s===null)return null;var r=s[yt]||null;if(r===null)return null;s=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(l(231,n,typeof s));return s}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tu=!1;if(_n)try{var Ca={};Object.defineProperty(Ca,"passive",{get:function(){Tu=!0}}),window.addEventListener("test",Ca,Ca),window.removeEventListener("test",Ca,Ca)}catch{Tu=!1}var Yn=null,Cu=null,nr=null;function Ud(){if(nr)return nr;var e,n=Cu,s=n.length,r,u="value"in Yn?Yn.value:Yn.textContent,c=u.length;for(e=0;e<s&&n[e]===u[e];e++);var d=s-e;for(r=1;r<=d&&n[s-r]===u[c-r];r++);return nr=u.slice(e,1<r?1-r:void 0)}function ir(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function sr(){return!0}function zd(){return!1}function vt(e){function n(s,r,u,c,d){this._reactName=s,this._targetInst=u,this.type=r,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(c):c[_]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?sr:zd,this.isPropagationStopped=zd,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),n}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ar=vt(Ii),wa=y({},Ii,{view:0,detail:0}),cb=vt(wa),wu,Au,Aa,lr=y({},wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Aa&&(Aa&&e.type==="mousemove"?(wu=e.screenX-Aa.screenX,Au=e.screenY-Aa.screenY):Au=wu=0,Aa=e),wu)},movementY:function(e){return"movementY"in e?e.movementY:Au}}),Hd=vt(lr),fb=y({},lr,{dataTransfer:0}),hb=vt(fb),db=y({},wa,{relatedTarget:0}),Nu=vt(db),mb=y({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),pb=vt(mb),gb=y({},Ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_b=vt(gb),yb=y({},Ii,{data:0}),jd=vt(yb),vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eb(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Sb[e])?!!n[e]:!1}function xu(){return Eb}var Tb=y({},wa,{key:function(e){if(e.key){var n=vb[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ir(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xu,charCode:function(e){return e.type==="keypress"?ir(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ir(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Cb=vt(Tb),wb=y({},lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bd=vt(wb),Ab=y({},wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xu}),Nb=vt(Ab),xb=y({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rb=vt(xb),Ob=y({},lr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Db=vt(Ob),Mb=y({},Ii,{newState:0,oldState:0}),Ib=vt(Mb),kb=[9,13,27,32],Ru=_n&&"CompositionEvent"in window,Na=null;_n&&"documentMode"in document&&(Na=document.documentMode);var Lb=_n&&"TextEvent"in window&&!Na,qd=_n&&(!Ru||Na&&8<Na&&11>=Na),Vd=" ",Gd=!1;function Pd(e,n){switch(e){case"keyup":return kb.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _s=!1;function Ub(e,n){switch(e){case"compositionend":return Yd(n);case"keypress":return n.which!==32?null:(Gd=!0,Vd);case"textInput":return e=n.data,e===Vd&&Gd?null:e;default:return null}}function zb(e,n){if(_s)return e==="compositionend"||!Ru&&Pd(e,n)?(e=Ud(),nr=Cu=Yn=null,_s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return qd&&n.locale!=="ko"?null:n.data;default:return null}}var Hb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Hb[e.type]:n==="textarea"}function Fd(e,n,s,r){ps?gs?gs.push(r):gs=[r]:ps=r,n=Xr(n,"onChange"),0<n.length&&(s=new ar("onChange","change",null,s,r),e.push({event:s,listeners:n}))}var xa=null,Ra=null;function jb(e){Rg(e,0)}function rr(e){var n=Ea(e);if(xd(n))return e}function Kd(e,n){if(e==="change")return n}var Xd=!1;if(_n){var Ou;if(_n){var Du="oninput"in document;if(!Du){var Zd=document.createElement("div");Zd.setAttribute("oninput","return;"),Du=typeof Zd.oninput=="function"}Ou=Du}else Ou=!1;Xd=Ou&&(!document.documentMode||9<document.documentMode)}function Wd(){xa&&(xa.detachEvent("onpropertychange",Jd),Ra=xa=null)}function Jd(e){if(e.propertyName==="value"&&rr(Ra)){var n=[];Fd(n,Ra,e,Su(e)),Ld(jb,n)}}function Bb(e,n,s){e==="focusin"?(Wd(),xa=n,Ra=s,xa.attachEvent("onpropertychange",Jd)):e==="focusout"&&Wd()}function qb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rr(Ra)}function Vb(e,n){if(e==="click")return rr(n)}function Gb(e,n){if(e==="input"||e==="change")return rr(n)}function Pb(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Ot=typeof Object.is=="function"?Object.is:Pb;function Oa(e,n){if(Ot(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),r=Object.keys(n);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var u=s[r];if(!ou.call(n,u)||!Ot(e[u],n[u]))return!1}return!0}function $d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function em(e,n){var s=$d(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=n&&r>=n)return{node:s,offset:n-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$d(s)}}function tm(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?tm(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function nm(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=er(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=er(e.document)}return n}function Mu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var Yb=_n&&"documentMode"in document&&11>=document.documentMode,ys=null,Iu=null,Da=null,ku=!1;function im(e,n,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ku||ys==null||ys!==er(r)||(r=ys,"selectionStart"in r&&Mu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Da&&Oa(Da,r)||(Da=r,r=Xr(Iu,"onSelect"),0<r.length&&(n=new ar("onSelect","select",null,n,s),e.push({event:n,listeners:r}),n.target=ys)))}function ki(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var vs={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionrun:ki("Transition","TransitionRun"),transitionstart:ki("Transition","TransitionStart"),transitioncancel:ki("Transition","TransitionCancel"),transitionend:ki("Transition","TransitionEnd")},Lu={},sm={};_n&&(sm=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Li(e){if(Lu[e])return Lu[e];if(!vs[e])return e;var n=vs[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in sm)return Lu[e]=n[s];return e}var am=Li("animationend"),lm=Li("animationiteration"),rm=Li("animationstart"),Qb=Li("transitionrun"),Fb=Li("transitionstart"),Kb=Li("transitioncancel"),om=Li("transitionend"),um=new Map,Uu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uu.push("scrollEnd");function Wt(e,n){um.set(e,n),Mi(n,[e])}var or=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},jt=[],bs=0,zu=0;function ur(){for(var e=bs,n=zu=bs=0;n<e;){var s=jt[n];jt[n++]=null;var r=jt[n];jt[n++]=null;var u=jt[n];jt[n++]=null;var c=jt[n];if(jt[n++]=null,r!==null&&u!==null){var d=r.pending;d===null?u.next=u:(u.next=d.next,d.next=u),r.pending=u}c!==0&&cm(s,u,c)}}function cr(e,n,s,r){jt[bs++]=e,jt[bs++]=n,jt[bs++]=s,jt[bs++]=r,zu|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Hu(e,n,s,r){return cr(e,n,s,r),fr(e)}function Ui(e,n){return cr(e,null,null,n),fr(e)}function cm(e,n,s){e.lanes|=s;var r=e.alternate;r!==null&&(r.lanes|=s);for(var u=!1,c=e.return;c!==null;)c.childLanes|=s,r=c.alternate,r!==null&&(r.childLanes|=s),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(u=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,u&&n!==null&&(u=31-Rt(s),e=c.hiddenUpdates,r=e[u],r===null?e[u]=[n]:r.push(n),n.lane=s|536870912),c):null}function fr(e){if(50<$a)throw $a=0,Fc=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ss={};function Xb(e,n,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,n,s,r){return new Xb(e,n,s,r)}function ju(e){return e=e.prototype,!(!e||!e.isReactComponent)}function yn(e,n){var s=e.alternate;return s===null?(s=Dt(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function fm(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function hr(e,n,s,r,u,c){var d=0;if(r=e,typeof e=="function")ju(e)&&(d=1);else if(typeof e=="string")d=eE(e,s,q.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case At:return e=Dt(31,s,n,u),e.elementType=At,e.lanes=c,e;case G:return zi(s.children,u,c,n);case fe:d=8,u|=24;break;case _e:return e=Dt(12,s,n,u|2),e.elementType=_e,e.lanes=c,e;case W:return e=Dt(13,s,n,u),e.elementType=W,e.lanes=c,e;case ye:return e=Dt(19,s,n,u),e.elementType=ye,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Z:d=10;break e;case De:d=9;break e;case Y:d=11;break e;case K:d=14;break e;case Ke:d=16,r=null;break e}d=29,s=Error(l(130,e===null?"null":typeof e,"")),r=null}return n=Dt(d,s,n,u),n.elementType=e,n.type=r,n.lanes=c,n}function zi(e,n,s,r){return e=Dt(7,e,r,n),e.lanes=s,e}function Bu(e,n,s){return e=Dt(6,e,null,n),e.lanes=s,e}function hm(e){var n=Dt(18,null,null,0);return n.stateNode=e,n}function qu(e,n,s){return n=Dt(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var dm=new WeakMap;function Bt(e,n){if(typeof e=="object"&&e!==null){var s=dm.get(e);return s!==void 0?s:(n={value:e,source:n,stack:hd(n)},dm.set(e,n),n)}return{value:e,source:n,stack:hd(n)}}var Es=[],Ts=0,dr=null,Ma=0,qt=[],Vt=0,Qn=null,rn=1,on="";function vn(e,n){Es[Ts++]=Ma,Es[Ts++]=dr,dr=e,Ma=n}function mm(e,n,s){qt[Vt++]=rn,qt[Vt++]=on,qt[Vt++]=Qn,Qn=e;var r=rn;e=on;var u=32-Rt(r)-1;r&=~(1<<u),s+=1;var c=32-Rt(n)+u;if(30<c){var d=u-u%5;c=(r&(1<<d)-1).toString(32),r>>=d,u-=d,rn=1<<32-Rt(n)+u|s<<u|r,on=c+e}else rn=1<<c|s<<u|r,on=e}function Vu(e){e.return!==null&&(vn(e,1),mm(e,1,0))}function Gu(e){for(;e===dr;)dr=Es[--Ts],Es[Ts]=null,Ma=Es[--Ts],Es[Ts]=null;for(;e===Qn;)Qn=qt[--Vt],qt[Vt]=null,on=qt[--Vt],qt[Vt]=null,rn=qt[--Vt],qt[Vt]=null}function pm(e,n){qt[Vt++]=rn,qt[Vt++]=on,qt[Vt++]=Qn,rn=n.id,on=n.overflow,Qn=e}var it=null,ke=null,he=!1,Fn=null,Gt=!1,Pu=Error(l(519));function Kn(e){var n=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ia(Bt(n,e)),Pu}function gm(e){var n=e.stateNode,s=e.type,r=e.memoizedProps;switch(n[nt]=e,n[yt]=r,s){case"dialog":re("cancel",n),re("close",n);break;case"iframe":case"object":case"embed":re("load",n);break;case"video":case"audio":for(s=0;s<tl.length;s++)re(tl[s],n);break;case"source":re("error",n);break;case"img":case"image":case"link":re("error",n),re("load",n);break;case"details":re("toggle",n);break;case"input":re("invalid",n),Rd(n,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":re("invalid",n);break;case"textarea":re("invalid",n),Dd(n,r.value,r.defaultValue,r.children)}s=r.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||r.suppressHydrationWarning===!0||Ig(n.textContent,s)?(r.popover!=null&&(re("beforetoggle",n),re("toggle",n)),r.onScroll!=null&&re("scroll",n),r.onScrollEnd!=null&&re("scrollend",n),r.onClick!=null&&(n.onclick=gn),n=!0):n=!1,n||Kn(e,!0)}function _m(e){for(it=e.return;it;)switch(it.tag){case 5:case 31:case 13:Gt=!1;return;case 27:case 3:Gt=!0;return;default:it=it.return}}function Cs(e){if(e!==it)return!1;if(!he)return _m(e),he=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||uf(e.type,e.memoizedProps)),s=!s),s&&ke&&Kn(e),_m(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ke=Vg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));ke=Vg(e)}else n===27?(n=ke,oi(e.type)?(e=mf,mf=null,ke=e):ke=n):ke=it?Yt(e.stateNode.nextSibling):null;return!0}function Hi(){ke=it=null,he=!1}function Yu(){var e=Fn;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),Fn=null),e}function Ia(e){Fn===null?Fn=[e]:Fn.push(e)}var Qu=T(null),ji=null,bn=null;function Xn(e,n,s){j(Qu,n._currentValue),n._currentValue=s}function Sn(e){e._currentValue=Qu.current,L(Qu)}function Fu(e,n,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===s)break;e=e.return}}function Ku(e,n,s,r){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var c=u.dependencies;if(c!==null){var d=u.child;c=c.firstContext;e:for(;c!==null;){var _=c;c=u;for(var v=0;v<n.length;v++)if(_.context===n[v]){c.lanes|=s,_=c.alternate,_!==null&&(_.lanes|=s),Fu(c.return,s,e),r||(d=null);break e}c=_.next}}else if(u.tag===18){if(d=u.return,d===null)throw Error(l(341));d.lanes|=s,c=d.alternate,c!==null&&(c.lanes|=s),Fu(d,s,e),d=null}else d=u.child;if(d!==null)d.return=u;else for(d=u;d!==null;){if(d===e){d=null;break}if(u=d.sibling,u!==null){u.return=d.return,d=u;break}d=d.return}u=d}}function ws(e,n,s,r){e=null;for(var u=n,c=!1;u!==null;){if(!c){if((u.flags&524288)!==0)c=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var d=u.alternate;if(d===null)throw Error(l(387));if(d=d.memoizedProps,d!==null){var _=u.type;Ot(u.pendingProps.value,d.value)||(e!==null?e.push(_):e=[_])}}else if(u===be.current){if(d=u.alternate,d===null)throw Error(l(387));d.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ll):e=[ll])}u=u.return}e!==null&&Ku(n,e,s,r),n.flags|=262144}function mr(e){for(e=e.firstContext;e!==null;){if(!Ot(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Bi(e){ji=e,bn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function st(e){return ym(ji,e)}function pr(e,n){return ji===null&&Bi(e),ym(e,n)}function ym(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},bn===null){if(e===null)throw Error(l(308));bn=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else bn=bn.next=n;return s}var Zb=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,r){e.push(r)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},Wb=a.unstable_scheduleCallback,Jb=a.unstable_NormalPriority,Pe={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xu(){return{controller:new Zb,data:new Map,refCount:0}}function ka(e){e.refCount--,e.refCount===0&&Wb(Jb,function(){e.controller.abort()})}var La=null,Zu=0,As=0,Ns=null;function $b(e,n){if(La===null){var s=La=[];Zu=0,As=$c(),Ns={status:"pending",value:void 0,then:function(r){s.push(r)}}}return Zu++,n.then(vm,vm),n}function vm(){if(--Zu===0&&La!==null){Ns!==null&&(Ns.status="fulfilled");var e=La;La=null,As=0,Ns=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function eS(e,n){var s=[],r={status:"pending",value:null,reason:null,then:function(u){s.push(u)}};return e.then(function(){r.status="fulfilled",r.value=n;for(var u=0;u<s.length;u++)(0,s[u])(n)},function(u){for(r.status="rejected",r.reason=u,u=0;u<s.length;u++)(0,s[u])(void 0)}),r}var bm=M.S;M.S=function(e,n){ig=Nt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&$b(e,n),bm!==null&&bm(e,n)};var qi=T(null);function Wu(){var e=qi.current;return e!==null?e:Oe.pooledCache}function gr(e,n){n===null?j(qi,qi.current):j(qi,n.pool)}function Sm(){var e=Wu();return e===null?null:{parent:Pe._currentValue,pool:e}}var xs=Error(l(460)),Ju=Error(l(474)),_r=Error(l(542)),yr={then:function(){}};function Em(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Tm(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(gn,gn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,wm(e),e;default:if(typeof n.status=="string")n.then(gn,gn);else{if(e=Oe,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(r){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=r}},function(r){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=r}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,wm(e),e}throw Gi=n,xs}}function Vi(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Gi=s,xs):s}}var Gi=null;function Cm(){if(Gi===null)throw Error(l(459));var e=Gi;return Gi=null,e}function wm(e){if(e===xs||e===_r)throw Error(l(483))}var Rs=null,Ua=0;function vr(e){var n=Ua;return Ua+=1,Rs===null&&(Rs=[]),Tm(Rs,e,n)}function za(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function br(e,n){throw n.$$typeof===S?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Am(e){function n(w,E){if(e){var A=w.deletions;A===null?(w.deletions=[E],w.flags|=16):A.push(E)}}function s(w,E){if(!e)return null;for(;E!==null;)n(w,E),E=E.sibling;return null}function r(w){for(var E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function u(w,E){return w=yn(w,E),w.index=0,w.sibling=null,w}function c(w,E,A){return w.index=A,e?(A=w.alternate,A!==null?(A=A.index,A<E?(w.flags|=67108866,E):A):(w.flags|=67108866,E)):(w.flags|=1048576,E)}function d(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function _(w,E,A,I){return E===null||E.tag!==6?(E=Bu(A,w.mode,I),E.return=w,E):(E=u(E,A),E.return=w,E)}function v(w,E,A,I){var P=A.type;return P===G?D(w,E,A.props.children,I,A.key):E!==null&&(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ke&&Vi(P)===E.type)?(E=u(E,A.props),za(E,A),E.return=w,E):(E=hr(A.type,A.key,A.props,null,w.mode,I),za(E,A),E.return=w,E)}function N(w,E,A,I){return E===null||E.tag!==4||E.stateNode.containerInfo!==A.containerInfo||E.stateNode.implementation!==A.implementation?(E=qu(A,w.mode,I),E.return=w,E):(E=u(E,A.children||[]),E.return=w,E)}function D(w,E,A,I,P){return E===null||E.tag!==7?(E=zi(A,w.mode,I,P),E.return=w,E):(E=u(E,A),E.return=w,E)}function k(w,E,A){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Bu(""+E,w.mode,A),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case R:return A=hr(E.type,E.key,E.props,null,w.mode,A),za(A,E),A.return=w,A;case U:return E=qu(E,w.mode,A),E.return=w,E;case Ke:return E=Vi(E),k(w,E,A)}if(Zt(E)||_t(E))return E=zi(E,w.mode,A,null),E.return=w,E;if(typeof E.then=="function")return k(w,vr(E),A);if(E.$$typeof===Z)return k(w,pr(w,E),A);br(w,E)}return null}function x(w,E,A,I){var P=E!==null?E.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return P!==null?null:_(w,E,""+A,I);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case R:return A.key===P?v(w,E,A,I):null;case U:return A.key===P?N(w,E,A,I):null;case Ke:return A=Vi(A),x(w,E,A,I)}if(Zt(A)||_t(A))return P!==null?null:D(w,E,A,I,null);if(typeof A.then=="function")return x(w,E,vr(A),I);if(A.$$typeof===Z)return x(w,E,pr(w,A),I);br(w,A)}return null}function O(w,E,A,I,P){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return w=w.get(A)||null,_(E,w,""+I,P);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case R:return w=w.get(I.key===null?A:I.key)||null,v(E,w,I,P);case U:return w=w.get(I.key===null?A:I.key)||null,N(E,w,I,P);case Ke:return I=Vi(I),O(w,E,A,I,P)}if(Zt(I)||_t(I))return w=w.get(A)||null,D(E,w,I,P,null);if(typeof I.then=="function")return O(w,E,A,vr(I),P);if(I.$$typeof===Z)return O(w,E,A,pr(E,I),P);br(E,I)}return null}function B(w,E,A,I){for(var P=null,de=null,V=E,ne=E=0,ce=null;V!==null&&ne<A.length;ne++){V.index>ne?(ce=V,V=null):ce=V.sibling;var me=x(w,V,A[ne],I);if(me===null){V===null&&(V=ce);break}e&&V&&me.alternate===null&&n(w,V),E=c(me,E,ne),de===null?P=me:de.sibling=me,de=me,V=ce}if(ne===A.length)return s(w,V),he&&vn(w,ne),P;if(V===null){for(;ne<A.length;ne++)V=k(w,A[ne],I),V!==null&&(E=c(V,E,ne),de===null?P=V:de.sibling=V,de=V);return he&&vn(w,ne),P}for(V=r(V);ne<A.length;ne++)ce=O(V,w,ne,A[ne],I),ce!==null&&(e&&ce.alternate!==null&&V.delete(ce.key===null?ne:ce.key),E=c(ce,E,ne),de===null?P=ce:de.sibling=ce,de=ce);return e&&V.forEach(function(di){return n(w,di)}),he&&vn(w,ne),P}function Q(w,E,A,I){if(A==null)throw Error(l(151));for(var P=null,de=null,V=E,ne=E=0,ce=null,me=A.next();V!==null&&!me.done;ne++,me=A.next()){V.index>ne?(ce=V,V=null):ce=V.sibling;var di=x(w,V,me.value,I);if(di===null){V===null&&(V=ce);break}e&&V&&di.alternate===null&&n(w,V),E=c(di,E,ne),de===null?P=di:de.sibling=di,de=di,V=ce}if(me.done)return s(w,V),he&&vn(w,ne),P;if(V===null){for(;!me.done;ne++,me=A.next())me=k(w,me.value,I),me!==null&&(E=c(me,E,ne),de===null?P=me:de.sibling=me,de=me);return he&&vn(w,ne),P}for(V=r(V);!me.done;ne++,me=A.next())me=O(V,w,ne,me.value,I),me!==null&&(e&&me.alternate!==null&&V.delete(me.key===null?ne:me.key),E=c(me,E,ne),de===null?P=me:de.sibling=me,de=me);return e&&V.forEach(function(fE){return n(w,fE)}),he&&vn(w,ne),P}function Ae(w,E,A,I){if(typeof A=="object"&&A!==null&&A.type===G&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case R:e:{for(var P=A.key;E!==null;){if(E.key===P){if(P=A.type,P===G){if(E.tag===7){s(w,E.sibling),I=u(E,A.props.children),I.return=w,w=I;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Ke&&Vi(P)===E.type){s(w,E.sibling),I=u(E,A.props),za(I,A),I.return=w,w=I;break e}s(w,E);break}else n(w,E);E=E.sibling}A.type===G?(I=zi(A.props.children,w.mode,I,A.key),I.return=w,w=I):(I=hr(A.type,A.key,A.props,null,w.mode,I),za(I,A),I.return=w,w=I)}return d(w);case U:e:{for(P=A.key;E!==null;){if(E.key===P)if(E.tag===4&&E.stateNode.containerInfo===A.containerInfo&&E.stateNode.implementation===A.implementation){s(w,E.sibling),I=u(E,A.children||[]),I.return=w,w=I;break e}else{s(w,E);break}else n(w,E);E=E.sibling}I=qu(A,w.mode,I),I.return=w,w=I}return d(w);case Ke:return A=Vi(A),Ae(w,E,A,I)}if(Zt(A))return B(w,E,A,I);if(_t(A)){if(P=_t(A),typeof P!="function")throw Error(l(150));return A=P.call(A),Q(w,E,A,I)}if(typeof A.then=="function")return Ae(w,E,vr(A),I);if(A.$$typeof===Z)return Ae(w,E,pr(w,A),I);br(w,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,E!==null&&E.tag===6?(s(w,E.sibling),I=u(E,A),I.return=w,w=I):(s(w,E),I=Bu(A,w.mode,I),I.return=w,w=I),d(w)):s(w,E)}return function(w,E,A,I){try{Ua=0;var P=Ae(w,E,A,I);return Rs=null,P}catch(V){if(V===xs||V===_r)throw V;var de=Dt(29,V,null,w.mode);return de.lanes=I,de.return=w,de}finally{}}}var Pi=Am(!0),Nm=Am(!1),Zn=!1;function $u(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ec(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Wn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(e,n,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(ve&2)!==0){var u=r.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),r.pending=n,n=fr(e),cm(e,null,s),n}return cr(e,r,n,s),fr(e)}function Ha(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var r=n.lanes;r&=e.pendingLanes,s|=r,n.lanes=s,yd(e,s)}}function tc(e,n){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var u=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};c===null?u=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?u=c=n:c=c.next=n}else u=c=n;s={baseState:r.baseState,firstBaseUpdate:u,lastBaseUpdate:c,shared:r.shared,callbacks:r.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var nc=!1;function ja(){if(nc){var e=Ns;if(e!==null)throw e}}function Ba(e,n,s,r){nc=!1;var u=e.updateQueue;Zn=!1;var c=u.firstBaseUpdate,d=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var v=_,N=v.next;v.next=null,d===null?c=N:d.next=N,d=v;var D=e.alternate;D!==null&&(D=D.updateQueue,_=D.lastBaseUpdate,_!==d&&(_===null?D.firstBaseUpdate=N:_.next=N,D.lastBaseUpdate=v))}if(c!==null){var k=u.baseState;d=0,D=N=v=null,_=c;do{var x=_.lane&-536870913,O=x!==_.lane;if(O?(ue&x)===x:(r&x)===x){x!==0&&x===As&&(nc=!0),D!==null&&(D=D.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var B=e,Q=_;x=n;var Ae=s;switch(Q.tag){case 1:if(B=Q.payload,typeof B=="function"){k=B.call(Ae,k,x);break e}k=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=Q.payload,x=typeof B=="function"?B.call(Ae,k,x):B,x==null)break e;k=y({},k,x);break e;case 2:Zn=!0}}x=_.callback,x!==null&&(e.flags|=64,O&&(e.flags|=8192),O=u.callbacks,O===null?u.callbacks=[x]:O.push(x))}else O={lane:x,tag:_.tag,payload:_.payload,callback:_.callback,next:null},D===null?(N=D=O,v=k):D=D.next=O,d|=x;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;O=_,_=O.next,O.next=null,u.lastBaseUpdate=O,u.shared.pending=null}}while(!0);D===null&&(v=k),u.baseState=v,u.firstBaseUpdate=N,u.lastBaseUpdate=D,c===null&&(u.shared.lanes=0),ii|=d,e.lanes=d,e.memoizedState=k}}function xm(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function Rm(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)xm(s[e],n)}var Os=T(null),Sr=T(0);function Om(e,n){e=On,j(Sr,e),j(Os,n),On=e|n.baseLanes}function ic(){j(Sr,On),j(Os,Os.current)}function sc(){On=Sr.current,L(Os),L(Sr)}var Mt=T(null),Pt=null;function $n(e){var n=e.alternate;j(Ve,Ve.current&1),j(Mt,e),Pt===null&&(n===null||Os.current!==null||n.memoizedState!==null)&&(Pt=e)}function ac(e){j(Ve,Ve.current),j(Mt,e),Pt===null&&(Pt=e)}function Dm(e){e.tag===22?(j(Ve,Ve.current),j(Mt,e),Pt===null&&(Pt=e)):ei()}function ei(){j(Ve,Ve.current),j(Mt,Mt.current)}function It(e){L(Mt),Pt===e&&(Pt=null),L(Ve)}var Ve=T(0);function Er(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||hf(s)||df(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var En=0,te=null,Ce=null,Ye=null,Tr=!1,Ds=!1,Yi=!1,Cr=0,qa=0,Ms=null,tS=0;function ze(){throw Error(l(321))}function lc(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!Ot(e[s],n[s]))return!1;return!0}function rc(e,n,s,r,u,c){return En=c,te=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,M.H=e===null||e.memoizedState===null?mp:Ec,Yi=!1,c=s(r,u),Yi=!1,Ds&&(c=Im(n,s,r,u)),Mm(e),c}function Mm(e){M.H=Pa;var n=Ce!==null&&Ce.next!==null;if(En=0,Ye=Ce=te=null,Tr=!1,qa=0,Ms=null,n)throw Error(l(300));e===null||Qe||(e=e.dependencies,e!==null&&mr(e)&&(Qe=!0))}function Im(e,n,s,r){te=e;var u=0;do{if(Ds&&(Ms=null),qa=0,Ds=!1,25<=u)throw Error(l(301));if(u+=1,Ye=Ce=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}M.H=pp,c=n(s,r)}while(Ds);return c}function nS(){var e=M.H,n=e.useState()[0];return n=typeof n.then=="function"?Va(n):n,e=e.useState()[0],(Ce!==null?Ce.memoizedState:null)!==e&&(te.flags|=1024),n}function oc(){var e=Cr!==0;return Cr=0,e}function uc(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function cc(e){if(Tr){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Tr=!1}En=0,Ye=Ce=te=null,Ds=!1,qa=Cr=0,Ms=null}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?te.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Ge(){if(Ce===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var n=Ye===null?te.memoizedState:Ye.next;if(n!==null)Ye=n,Ce=e;else{if(e===null)throw te.alternate===null?Error(l(467)):Error(l(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Ye===null?te.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function wr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Va(e){var n=qa;return qa+=1,Ms===null&&(Ms=[]),e=Tm(Ms,e,n),n=te,(Ye===null?n.memoizedState:Ye.next)===null&&(n=n.alternate,M.H=n===null||n.memoizedState===null?mp:Ec),e}function Ar(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Va(e);if(e.$$typeof===Z)return st(e)}throw Error(l(438,String(e)))}function fc(e){var n=null,s=te.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var r=te.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(n={data:r.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=wr(),te.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),r=0;r<e;r++)s[r]=Vn;return n.index++,s}function Tn(e,n){return typeof n=="function"?n(e):n}function Nr(e){var n=Ge();return hc(n,Ce,e)}function hc(e,n,s){var r=e.queue;if(r===null)throw Error(l(311));r.lastRenderedReducer=s;var u=e.baseQueue,c=r.pending;if(c!==null){if(u!==null){var d=u.next;u.next=c.next,c.next=d}n.baseQueue=u=c,r.pending=null}if(c=e.baseState,u===null)e.memoizedState=c;else{n=u.next;var _=d=null,v=null,N=n,D=!1;do{var k=N.lane&-536870913;if(k!==N.lane?(ue&k)===k:(En&k)===k){var x=N.revertLane;if(x===0)v!==null&&(v=v.next={lane:0,revertLane:0,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),k===As&&(D=!0);else if((En&x)===x){N=N.next,x===As&&(D=!0);continue}else k={lane:0,revertLane:N.revertLane,gesture:null,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},v===null?(_=v=k,d=c):v=v.next=k,te.lanes|=x,ii|=x;k=N.action,Yi&&s(c,k),c=N.hasEagerState?N.eagerState:s(c,k)}else x={lane:k,revertLane:N.revertLane,gesture:N.gesture,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},v===null?(_=v=x,d=c):v=v.next=x,te.lanes|=k,ii|=k;N=N.next}while(N!==null&&N!==n);if(v===null?d=c:v.next=_,!Ot(c,e.memoizedState)&&(Qe=!0,D&&(s=Ns,s!==null)))throw s;e.memoizedState=c,e.baseState=d,e.baseQueue=v,r.lastRenderedState=c}return u===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function dc(e){var n=Ge(),s=n.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=e;var r=s.dispatch,u=s.pending,c=n.memoizedState;if(u!==null){s.pending=null;var d=u=u.next;do c=e(c,d.action),d=d.next;while(d!==u);Ot(c,n.memoizedState)||(Qe=!0),n.memoizedState=c,n.baseQueue===null&&(n.baseState=c),s.lastRenderedState=c}return[c,r]}function km(e,n,s){var r=te,u=Ge(),c=he;if(c){if(s===void 0)throw Error(l(407));s=s()}else s=n();var d=!Ot((Ce||u).memoizedState,s);if(d&&(u.memoizedState=s,Qe=!0),u=u.queue,gc(zm.bind(null,r,u,e),[e]),u.getSnapshot!==n||d||Ye!==null&&Ye.memoizedState.tag&1){if(r.flags|=2048,Is(9,{destroy:void 0},Um.bind(null,r,u,s,n),null),Oe===null)throw Error(l(349));c||(En&127)!==0||Lm(r,n,s)}return s}function Lm(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=te.updateQueue,n===null?(n=wr(),te.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Um(e,n,s,r){n.value=s,n.getSnapshot=r,Hm(n)&&jm(e)}function zm(e,n,s){return s(function(){Hm(n)&&jm(e)})}function Hm(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!Ot(e,s)}catch{return!0}}function jm(e){var n=Ui(e,2);n!==null&&Ct(n,e,2)}function mc(e){var n=ft();if(typeof e=="function"){var s=e;if(e=s(),Yi){Gn(!0);try{s()}finally{Gn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:e},n}function Bm(e,n,s,r){return e.baseState=s,hc(e,Ce,typeof r=="function"?r:Tn)}function iS(e,n,s,r,u){if(Or(e))throw Error(l(485));if(e=n.action,e!==null){var c={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){c.listeners.push(d)}};M.T!==null?s(!0):c.isTransition=!1,r(c),s=n.pending,s===null?(c.next=n.pending=c,qm(n,c)):(c.next=s.next,n.pending=s.next=c)}}function qm(e,n){var s=n.action,r=n.payload,u=e.state;if(n.isTransition){var c=M.T,d={};M.T=d;try{var _=s(u,r),v=M.S;v!==null&&v(d,_),Vm(e,n,_)}catch(N){pc(e,n,N)}finally{c!==null&&d.types!==null&&(c.types=d.types),M.T=c}}else try{c=s(u,r),Vm(e,n,c)}catch(N){pc(e,n,N)}}function Vm(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(r){Gm(e,n,r)},function(r){return pc(e,n,r)}):Gm(e,n,s)}function Gm(e,n,s){n.status="fulfilled",n.value=s,Pm(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,qm(e,s)))}function pc(e,n,s){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do n.status="rejected",n.reason=s,Pm(n),n=n.next;while(n!==r)}e.action=null}function Pm(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Ym(e,n){return n}function Qm(e,n){if(he){var s=Oe.formState;if(s!==null){e:{var r=te;if(he){if(ke){t:{for(var u=ke,c=Gt;u.nodeType!==8;){if(!c){u=null;break t}if(u=Yt(u.nextSibling),u===null){u=null;break t}}c=u.data,u=c==="F!"||c==="F"?u:null}if(u){ke=Yt(u.nextSibling),r=u.data==="F!";break e}}Kn(r)}r=!1}r&&(n=s[0])}}return s=ft(),s.memoizedState=s.baseState=n,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ym,lastRenderedState:n},s.queue=r,s=fp.bind(null,te,r),r.dispatch=s,r=mc(!1),c=Sc.bind(null,te,!1,r.queue),r=ft(),u={state:n,dispatch:null,action:e,pending:null},r.queue=u,s=iS.bind(null,te,u,c,s),u.dispatch=s,r.memoizedState=e,[n,s,!1]}function Fm(e){var n=Ge();return Km(n,Ce,e)}function Km(e,n,s){if(n=hc(e,n,Ym)[0],e=Nr(Tn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var r=Va(n)}catch(d){throw d===xs?_r:d}else r=n;n=Ge();var u=n.queue,c=u.dispatch;return s!==n.memoizedState&&(te.flags|=2048,Is(9,{destroy:void 0},sS.bind(null,u,s),null)),[r,c,e]}function sS(e,n){e.action=n}function Xm(e){var n=Ge(),s=Ce;if(s!==null)return Km(n,s,e);Ge(),n=n.memoizedState,s=Ge();var r=s.queue.dispatch;return s.memoizedState=e,[n,r,!1]}function Is(e,n,s,r){return e={tag:e,create:s,deps:r,inst:n,next:null},n=te.updateQueue,n===null&&(n=wr(),te.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,n.lastEffect=e),e}function Zm(){return Ge().memoizedState}function xr(e,n,s,r){var u=ft();te.flags|=e,u.memoizedState=Is(1|n,{destroy:void 0},s,r===void 0?null:r)}function Rr(e,n,s,r){var u=Ge();r=r===void 0?null:r;var c=u.memoizedState.inst;Ce!==null&&r!==null&&lc(r,Ce.memoizedState.deps)?u.memoizedState=Is(n,c,s,r):(te.flags|=e,u.memoizedState=Is(1|n,c,s,r))}function Wm(e,n){xr(8390656,8,e,n)}function gc(e,n){Rr(2048,8,e,n)}function aS(e){te.flags|=4;var n=te.updateQueue;if(n===null)n=wr(),te.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function Jm(e){var n=Ge().memoizedState;return aS({ref:n,nextImpl:e}),function(){if((ve&2)!==0)throw Error(l(440));return n.impl.apply(void 0,arguments)}}function $m(e,n){return Rr(4,2,e,n)}function ep(e,n){return Rr(4,4,e,n)}function tp(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function np(e,n,s){s=s!=null?s.concat([e]):null,Rr(4,4,tp.bind(null,n,e),s)}function _c(){}function ip(e,n){var s=Ge();n=n===void 0?null:n;var r=s.memoizedState;return n!==null&&lc(n,r[1])?r[0]:(s.memoizedState=[e,n],e)}function sp(e,n){var s=Ge();n=n===void 0?null:n;var r=s.memoizedState;if(n!==null&&lc(n,r[1]))return r[0];if(r=e(),Yi){Gn(!0);try{e()}finally{Gn(!1)}}return s.memoizedState=[r,n],r}function yc(e,n,s){return s===void 0||(En&1073741824)!==0&&(ue&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=ag(),te.lanes|=e,ii|=e,s)}function ap(e,n,s,r){return Ot(s,n)?s:Os.current!==null?(e=yc(e,s,r),Ot(e,n)||(Qe=!0),e):(En&42)===0||(En&1073741824)!==0&&(ue&261930)===0?(Qe=!0,e.memoizedState=s):(e=ag(),te.lanes|=e,ii|=e,n)}function lp(e,n,s,r,u){var c=H.p;H.p=c!==0&&8>c?c:8;var d=M.T,_={};M.T=_,Sc(e,!1,n,s);try{var v=u(),N=M.S;if(N!==null&&N(_,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var D=eS(v,r);Ga(e,n,D,Ut(e))}else Ga(e,n,r,Ut(e))}catch(k){Ga(e,n,{then:function(){},status:"rejected",reason:k},Ut())}finally{H.p=c,d!==null&&_.types!==null&&(d.types=_.types),M.T=d}}function lS(){}function vc(e,n,s,r){if(e.tag!==5)throw Error(l(476));var u=rp(e).queue;lp(e,u,n,X,s===null?lS:function(){return op(e),s(r)})}function rp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:X},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function op(e){var n=rp(e);n.next===null&&(n=e.alternate.memoizedState),Ga(e,n.next.queue,{},Ut())}function bc(){return st(ll)}function up(){return Ge().memoizedState}function cp(){return Ge().memoizedState}function rS(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=Ut();e=Wn(s);var r=Jn(n,e,s);r!==null&&(Ct(r,n,s),Ha(r,n,s)),n={cache:Xu()},e.payload=n;return}n=n.return}}function oS(e,n,s){var r=Ut();s={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Or(e)?hp(n,s):(s=Hu(e,n,s,r),s!==null&&(Ct(s,e,r),dp(s,n,r)))}function fp(e,n,s){var r=Ut();Ga(e,n,s,r)}function Ga(e,n,s,r){var u={lane:r,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Or(e))hp(n,u);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=n.lastRenderedReducer,c!==null))try{var d=n.lastRenderedState,_=c(d,s);if(u.hasEagerState=!0,u.eagerState=_,Ot(_,d))return cr(e,n,u,0),Oe===null&&ur(),!1}catch{}finally{}if(s=Hu(e,n,u,r),s!==null)return Ct(s,e,r),dp(s,n,r),!0}return!1}function Sc(e,n,s,r){if(r={lane:2,revertLane:$c(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Or(e)){if(n)throw Error(l(479))}else n=Hu(e,s,r,2),n!==null&&Ct(n,e,2)}function Or(e){var n=e.alternate;return e===te||n!==null&&n===te}function hp(e,n){Ds=Tr=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function dp(e,n,s){if((s&4194048)!==0){var r=n.lanes;r&=e.pendingLanes,s|=r,n.lanes=s,yd(e,s)}}var Pa={readContext:st,use:Ar,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useLayoutEffect:ze,useInsertionEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useSyncExternalStore:ze,useId:ze,useHostTransitionStatus:ze,useFormState:ze,useActionState:ze,useOptimistic:ze,useMemoCache:ze,useCacheRefresh:ze};Pa.useEffectEvent=ze;var mp={readContext:st,use:Ar,useCallback:function(e,n){return ft().memoizedState=[e,n===void 0?null:n],e},useContext:st,useEffect:Wm,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,xr(4194308,4,tp.bind(null,n,e),s)},useLayoutEffect:function(e,n){return xr(4194308,4,e,n)},useInsertionEffect:function(e,n){xr(4,2,e,n)},useMemo:function(e,n){var s=ft();n=n===void 0?null:n;var r=e();if(Yi){Gn(!0);try{e()}finally{Gn(!1)}}return s.memoizedState=[r,n],r},useReducer:function(e,n,s){var r=ft();if(s!==void 0){var u=s(n);if(Yi){Gn(!0);try{s(n)}finally{Gn(!1)}}}else u=n;return r.memoizedState=r.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},r.queue=e,e=e.dispatch=oS.bind(null,te,e),[r.memoizedState,e]},useRef:function(e){var n=ft();return e={current:e},n.memoizedState=e},useState:function(e){e=mc(e);var n=e.queue,s=fp.bind(null,te,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:_c,useDeferredValue:function(e,n){var s=ft();return yc(s,e,n)},useTransition:function(){var e=mc(!1);return e=lp.bind(null,te,e.queue,!0,!1),ft().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var r=te,u=ft();if(he){if(s===void 0)throw Error(l(407));s=s()}else{if(s=n(),Oe===null)throw Error(l(349));(ue&127)!==0||Lm(r,n,s)}u.memoizedState=s;var c={value:s,getSnapshot:n};return u.queue=c,Wm(zm.bind(null,r,c,e),[e]),r.flags|=2048,Is(9,{destroy:void 0},Um.bind(null,r,c,s,n),null),s},useId:function(){var e=ft(),n=Oe.identifierPrefix;if(he){var s=on,r=rn;s=(r&~(1<<32-Rt(r)-1)).toString(32)+s,n="_"+n+"R_"+s,s=Cr++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=tS++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:bc,useFormState:Qm,useActionState:Qm,useOptimistic:function(e){var n=ft();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Sc.bind(null,te,!0,s),s.dispatch=n,[e,n]},useMemoCache:fc,useCacheRefresh:function(){return ft().memoizedState=rS.bind(null,te)},useEffectEvent:function(e){var n=ft(),s={impl:e};return n.memoizedState=s,function(){if((ve&2)!==0)throw Error(l(440));return s.impl.apply(void 0,arguments)}}},Ec={readContext:st,use:Ar,useCallback:ip,useContext:st,useEffect:gc,useImperativeHandle:np,useInsertionEffect:$m,useLayoutEffect:ep,useMemo:sp,useReducer:Nr,useRef:Zm,useState:function(){return Nr(Tn)},useDebugValue:_c,useDeferredValue:function(e,n){var s=Ge();return ap(s,Ce.memoizedState,e,n)},useTransition:function(){var e=Nr(Tn)[0],n=Ge().memoizedState;return[typeof e=="boolean"?e:Va(e),n]},useSyncExternalStore:km,useId:up,useHostTransitionStatus:bc,useFormState:Fm,useActionState:Fm,useOptimistic:function(e,n){var s=Ge();return Bm(s,Ce,e,n)},useMemoCache:fc,useCacheRefresh:cp};Ec.useEffectEvent=Jm;var pp={readContext:st,use:Ar,useCallback:ip,useContext:st,useEffect:gc,useImperativeHandle:np,useInsertionEffect:$m,useLayoutEffect:ep,useMemo:sp,useReducer:dc,useRef:Zm,useState:function(){return dc(Tn)},useDebugValue:_c,useDeferredValue:function(e,n){var s=Ge();return Ce===null?yc(s,e,n):ap(s,Ce.memoizedState,e,n)},useTransition:function(){var e=dc(Tn)[0],n=Ge().memoizedState;return[typeof e=="boolean"?e:Va(e),n]},useSyncExternalStore:km,useId:up,useHostTransitionStatus:bc,useFormState:Xm,useActionState:Xm,useOptimistic:function(e,n){var s=Ge();return Ce!==null?Bm(s,Ce,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:fc,useCacheRefresh:cp};pp.useEffectEvent=Jm;function Tc(e,n,s,r){n=e.memoizedState,s=s(r,n),s=s==null?n:y({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Cc={enqueueSetState:function(e,n,s){e=e._reactInternals;var r=Ut(),u=Wn(r);u.payload=n,s!=null&&(u.callback=s),n=Jn(e,u,r),n!==null&&(Ct(n,e,r),Ha(n,e,r))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var r=Ut(),u=Wn(r);u.tag=1,u.payload=n,s!=null&&(u.callback=s),n=Jn(e,u,r),n!==null&&(Ct(n,e,r),Ha(n,e,r))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Ut(),r=Wn(s);r.tag=2,n!=null&&(r.callback=n),n=Jn(e,r,s),n!==null&&(Ct(n,e,s),Ha(n,e,s))}};function gp(e,n,s,r,u,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,c,d):n.prototype&&n.prototype.isPureReactComponent?!Oa(s,r)||!Oa(u,c):!0}function _p(e,n,s,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,r),n.state!==e&&Cc.enqueueReplaceState(n,n.state,null)}function Qi(e,n){var s=n;if("ref"in n){s={};for(var r in n)r!=="ref"&&(s[r]=n[r])}if(e=e.defaultProps){s===n&&(s=y({},s));for(var u in e)s[u]===void 0&&(s[u]=e[u])}return s}function yp(e){or(e)}function vp(e){console.error(e)}function bp(e){or(e)}function Dr(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(r){setTimeout(function(){throw r})}}function Sp(e,n,s){try{var r=e.onCaughtError;r(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function wc(e,n,s){return s=Wn(s),s.tag=3,s.payload={element:null},s.callback=function(){Dr(e,n)},s}function Ep(e){return e=Wn(e),e.tag=3,e}function Tp(e,n,s,r){var u=s.type.getDerivedStateFromError;if(typeof u=="function"){var c=r.value;e.payload=function(){return u(c)},e.callback=function(){Sp(n,s,r)}}var d=s.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){Sp(n,s,r),typeof u!="function"&&(si===null?si=new Set([this]):si.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})})}function uS(e,n,s,r,u){if(s.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(n=s.alternate,n!==null&&ws(n,s,u,!0),s=Mt.current,s!==null){switch(s.tag){case 31:case 13:return Pt===null?Gr():s.alternate===null&&He===0&&(He=3),s.flags&=-257,s.flags|=65536,s.lanes=u,r===yr?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([r]):n.add(r),Zc(e,r,u)),!1;case 22:return s.flags|=65536,r===yr?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([r])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([r]):s.add(r)),Zc(e,r,u)),!1}throw Error(l(435,s.tag))}return Zc(e,r,u),Gr(),!1}if(he)return n=Mt.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,r!==Pu&&(e=Error(l(422),{cause:r}),Ia(Bt(e,s)))):(r!==Pu&&(n=Error(l(423),{cause:r}),Ia(Bt(n,s))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,r=Bt(r,s),u=wc(e.stateNode,r,u),tc(e,u),He!==4&&(He=2)),!1;var c=Error(l(520),{cause:r});if(c=Bt(c,s),Ja===null?Ja=[c]:Ja.push(c),He!==4&&(He=2),n===null)return!0;r=Bt(r,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=u&-u,s.lanes|=e,e=wc(s.stateNode,r,e),tc(s,e),!1;case 1:if(n=s.type,c=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(si===null||!si.has(c))))return s.flags|=65536,u&=-u,s.lanes|=u,u=Ep(u),Tp(u,e,s,r),tc(s,u),!1}s=s.return}while(s!==null);return!1}var Ac=Error(l(461)),Qe=!1;function at(e,n,s,r){n.child=e===null?Nm(n,null,s,r):Pi(n,e.child,s,r)}function Cp(e,n,s,r,u){s=s.render;var c=n.ref;if("ref"in r){var d={};for(var _ in r)_!=="ref"&&(d[_]=r[_])}else d=r;return Bi(n),r=rc(e,n,s,d,c,u),_=oc(),e!==null&&!Qe?(uc(e,n,u),Cn(e,n,u)):(he&&_&&Vu(n),n.flags|=1,at(e,n,r,u),n.child)}function wp(e,n,s,r,u){if(e===null){var c=s.type;return typeof c=="function"&&!ju(c)&&c.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=c,Ap(e,n,c,r,u)):(e=hr(s.type,null,r,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(c=e.child,!kc(e,u)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Oa,s(d,r)&&e.ref===n.ref)return Cn(e,n,u)}return n.flags|=1,e=yn(c,r),e.ref=n.ref,e.return=n,n.child=e}function Ap(e,n,s,r,u){if(e!==null){var c=e.memoizedProps;if(Oa(c,r)&&e.ref===n.ref)if(Qe=!1,n.pendingProps=r=c,kc(e,u))(e.flags&131072)!==0&&(Qe=!0);else return n.lanes=e.lanes,Cn(e,n,u)}return Nc(e,n,s,r,u)}function Np(e,n,s,r){var u=r.children,c=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((n.flags&128)!==0){if(c=c!==null?c.baseLanes|s:s,e!==null){for(r=n.child=e.child,u=0;r!==null;)u=u|r.lanes|r.childLanes,r=r.sibling;r=u&~c}else r=0,n.child=null;return xp(e,n,c,s,r)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&gr(n,c!==null?c.cachePool:null),c!==null?Om(n,c):ic(),Dm(n);else return r=n.lanes=536870912,xp(e,n,c!==null?c.baseLanes|s:s,s,r)}else c!==null?(gr(n,c.cachePool),Om(n,c),ei(),n.memoizedState=null):(e!==null&&gr(n,null),ic(),ei());return at(e,n,u,s),n.child}function Ya(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function xp(e,n,s,r,u){var c=Wu();return c=c===null?null:{parent:Pe._currentValue,pool:c},n.memoizedState={baseLanes:s,cachePool:c},e!==null&&gr(n,null),ic(),Dm(n),e!==null&&ws(e,n,r,!0),n.childLanes=u,null}function Mr(e,n){return n=kr({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Rp(e,n,s){return Pi(n,e.child,null,s),e=Mr(n,n.pendingProps),e.flags|=2,It(n),n.memoizedState=null,e}function cS(e,n,s){var r=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(he){if(r.mode==="hidden")return e=Mr(n,r),n.lanes=536870912,Ya(null,e);if(ac(n),(e=ke)?(e=qg(e,Gt),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Qn!==null?{id:rn,overflow:on}:null,retryLane:536870912,hydrationErrors:null},s=hm(e),s.return=n,n.child=s,it=n,ke=null)):e=null,e===null)throw Kn(n);return n.lanes=536870912,null}return Mr(n,r)}var c=e.memoizedState;if(c!==null){var d=c.dehydrated;if(ac(n),u)if(n.flags&256)n.flags&=-257,n=Rp(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(l(558));else if(Qe||ws(e,n,s,!1),u=(s&e.childLanes)!==0,Qe||u){if(r=Oe,r!==null&&(d=vd(r,s),d!==0&&d!==c.retryLane))throw c.retryLane=d,Ui(e,d),Ct(r,e,d),Ac;Gr(),n=Rp(e,n,s)}else e=c.treeContext,ke=Yt(d.nextSibling),it=n,he=!0,Fn=null,Gt=!1,e!==null&&pm(n,e),n=Mr(n,r),n.flags|=4096;return n}return e=yn(e.child,{mode:r.mode,children:r.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ir(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(l(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function Nc(e,n,s,r,u){return Bi(n),s=rc(e,n,s,r,void 0,u),r=oc(),e!==null&&!Qe?(uc(e,n,u),Cn(e,n,u)):(he&&r&&Vu(n),n.flags|=1,at(e,n,s,u),n.child)}function Op(e,n,s,r,u,c){return Bi(n),n.updateQueue=null,s=Im(n,r,s,u),Mm(e),r=oc(),e!==null&&!Qe?(uc(e,n,c),Cn(e,n,c)):(he&&r&&Vu(n),n.flags|=1,at(e,n,s,c),n.child)}function Dp(e,n,s,r,u){if(Bi(n),n.stateNode===null){var c=Ss,d=s.contextType;typeof d=="object"&&d!==null&&(c=st(d)),c=new s(r,c),n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Cc,n.stateNode=c,c._reactInternals=n,c=n.stateNode,c.props=r,c.state=n.memoizedState,c.refs={},$u(n),d=s.contextType,c.context=typeof d=="object"&&d!==null?st(d):Ss,c.state=n.memoizedState,d=s.getDerivedStateFromProps,typeof d=="function"&&(Tc(n,s,d,r),c.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(d=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),d!==c.state&&Cc.enqueueReplaceState(c,c.state,null),Ba(n,r,c,u),ja(),c.state=n.memoizedState),typeof c.componentDidMount=="function"&&(n.flags|=4194308),r=!0}else if(e===null){c=n.stateNode;var _=n.memoizedProps,v=Qi(s,_);c.props=v;var N=c.context,D=s.contextType;d=Ss,typeof D=="object"&&D!==null&&(d=st(D));var k=s.getDerivedStateFromProps;D=typeof k=="function"||typeof c.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,D||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(_||N!==d)&&_p(n,c,r,d),Zn=!1;var x=n.memoizedState;c.state=x,Ba(n,r,c,u),ja(),N=n.memoizedState,_||x!==N||Zn?(typeof k=="function"&&(Tc(n,s,k,r),N=n.memoizedState),(v=Zn||gp(n,s,v,r,x,N,d))?(D||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(n.flags|=4194308)):(typeof c.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=N),c.props=r,c.state=N,c.context=d,r=v):(typeof c.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{c=n.stateNode,ec(e,n),d=n.memoizedProps,D=Qi(s,d),c.props=D,k=n.pendingProps,x=c.context,N=s.contextType,v=Ss,typeof N=="object"&&N!==null&&(v=st(N)),_=s.getDerivedStateFromProps,(N=typeof _=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(d!==k||x!==v)&&_p(n,c,r,v),Zn=!1,x=n.memoizedState,c.state=x,Ba(n,r,c,u),ja();var O=n.memoizedState;d!==k||x!==O||Zn||e!==null&&e.dependencies!==null&&mr(e.dependencies)?(typeof _=="function"&&(Tc(n,s,_,r),O=n.memoizedState),(D=Zn||gp(n,s,D,r,x,O,v)||e!==null&&e.dependencies!==null&&mr(e.dependencies))?(N||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,O,v),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,O,v)),typeof c.componentDidUpdate=="function"&&(n.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(n.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=O),c.props=r,c.state=O,c.context=v,r=D):(typeof c.componentDidUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(n.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&x===e.memoizedState||(n.flags|=1024),r=!1)}return c=r,Ir(e,n),r=(n.flags&128)!==0,c||r?(c=n.stateNode,s=r&&typeof s.getDerivedStateFromError!="function"?null:c.render(),n.flags|=1,e!==null&&r?(n.child=Pi(n,e.child,null,u),n.child=Pi(n,null,s,u)):at(e,n,s,u),n.memoizedState=c.state,e=n.child):e=Cn(e,n,u),e}function Mp(e,n,s,r){return Hi(),n.flags|=256,at(e,n,s,r),n.child}var xc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rc(e){return{baseLanes:e,cachePool:Sm()}}function Oc(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=Lt),e}function Ip(e,n,s){var r=n.pendingProps,u=!1,c=(n.flags&128)!==0,d;if((d=c)||(d=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),d&&(u=!0,n.flags&=-129),d=(n.flags&32)!==0,n.flags&=-33,e===null){if(he){if(u?$n(n):ei(),(e=ke)?(e=qg(e,Gt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Qn!==null?{id:rn,overflow:on}:null,retryLane:536870912,hydrationErrors:null},s=hm(e),s.return=n,n.child=s,it=n,ke=null)):e=null,e===null)throw Kn(n);return df(e)?n.lanes=32:n.lanes=536870912,null}var _=r.children;return r=r.fallback,u?(ei(),u=n.mode,_=kr({mode:"hidden",children:_},u),r=zi(r,u,s,null),_.return=n,r.return=n,_.sibling=r,n.child=_,r=n.child,r.memoizedState=Rc(s),r.childLanes=Oc(e,d,s),n.memoizedState=xc,Ya(null,r)):($n(n),Dc(n,_))}var v=e.memoizedState;if(v!==null&&(_=v.dehydrated,_!==null)){if(c)n.flags&256?($n(n),n.flags&=-257,n=Mc(e,n,s)):n.memoizedState!==null?(ei(),n.child=e.child,n.flags|=128,n=null):(ei(),_=r.fallback,u=n.mode,r=kr({mode:"visible",children:r.children},u),_=zi(_,u,s,null),_.flags|=2,r.return=n,_.return=n,r.sibling=_,n.child=r,Pi(n,e.child,null,s),r=n.child,r.memoizedState=Rc(s),r.childLanes=Oc(e,d,s),n.memoizedState=xc,n=Ya(null,r));else if($n(n),df(_)){if(d=_.nextSibling&&_.nextSibling.dataset,d)var N=d.dgst;d=N,r=Error(l(419)),r.stack="",r.digest=d,Ia({value:r,source:null,stack:null}),n=Mc(e,n,s)}else if(Qe||ws(e,n,s,!1),d=(s&e.childLanes)!==0,Qe||d){if(d=Oe,d!==null&&(r=vd(d,s),r!==0&&r!==v.retryLane))throw v.retryLane=r,Ui(e,r),Ct(d,e,r),Ac;hf(_)||Gr(),n=Mc(e,n,s)}else hf(_)?(n.flags|=192,n.child=e.child,n=null):(e=v.treeContext,ke=Yt(_.nextSibling),it=n,he=!0,Fn=null,Gt=!1,e!==null&&pm(n,e),n=Dc(n,r.children),n.flags|=4096);return n}return u?(ei(),_=r.fallback,u=n.mode,v=e.child,N=v.sibling,r=yn(v,{mode:"hidden",children:r.children}),r.subtreeFlags=v.subtreeFlags&65011712,N!==null?_=yn(N,_):(_=zi(_,u,s,null),_.flags|=2),_.return=n,r.return=n,r.sibling=_,n.child=r,Ya(null,r),r=n.child,_=e.child.memoizedState,_===null?_=Rc(s):(u=_.cachePool,u!==null?(v=Pe._currentValue,u=u.parent!==v?{parent:v,pool:v}:u):u=Sm(),_={baseLanes:_.baseLanes|s,cachePool:u}),r.memoizedState=_,r.childLanes=Oc(e,d,s),n.memoizedState=xc,Ya(e.child,r)):($n(n),s=e.child,e=s.sibling,s=yn(s,{mode:"visible",children:r.children}),s.return=n,s.sibling=null,e!==null&&(d=n.deletions,d===null?(n.deletions=[e],n.flags|=16):d.push(e)),n.child=s,n.memoizedState=null,s)}function Dc(e,n){return n=kr({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function kr(e,n){return e=Dt(22,e,null,n),e.lanes=0,e}function Mc(e,n,s){return Pi(n,e.child,null,s),e=Dc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function kp(e,n,s){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),Fu(e.return,n,s)}function Ic(e,n,s,r,u,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:u,treeForkCount:c}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=s,d.tailMode=u,d.treeForkCount=c)}function Lp(e,n,s){var r=n.pendingProps,u=r.revealOrder,c=r.tail;r=r.children;var d=Ve.current,_=(d&2)!==0;if(_?(d=d&1|2,n.flags|=128):d&=1,j(Ve,d),at(e,n,r,s),r=he?Ma:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kp(e,s,n);else if(e.tag===19)kp(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(s=n.child,u=null;s!==null;)e=s.alternate,e!==null&&Er(e)===null&&(u=s),s=s.sibling;s=u,s===null?(u=n.child,n.child=null):(u=s.sibling,s.sibling=null),Ic(n,!1,u,s,c,r);break;case"backwards":case"unstable_legacy-backwards":for(s=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&Er(e)===null){n.child=u;break}e=u.sibling,u.sibling=s,s=u,u=e}Ic(n,!0,s,null,c,r);break;case"together":Ic(n,!1,null,null,void 0,r);break;default:n.memoizedState=null}return n.child}function Cn(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),ii|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(ws(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,s=yn(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=yn(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function kc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&mr(e)))}function fS(e,n,s){switch(n.tag){case 3:ct(n,n.stateNode.containerInfo),Xn(n,Pe,e.memoizedState.cache),Hi();break;case 27:case 5:_a(n);break;case 4:ct(n,n.stateNode.containerInfo);break;case 10:Xn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,ac(n),null;break;case 13:var r=n.memoizedState;if(r!==null)return r.dehydrated!==null?($n(n),n.flags|=128,null):(s&n.child.childLanes)!==0?Ip(e,n,s):($n(n),e=Cn(e,n,s),e!==null?e.sibling:null);$n(n);break;case 19:var u=(e.flags&128)!==0;if(r=(s&n.childLanes)!==0,r||(ws(e,n,s,!1),r=(s&n.childLanes)!==0),u){if(r)return Lp(e,n,s);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),j(Ve,Ve.current),r)break;return null;case 22:return n.lanes=0,Np(e,n,s,n.pendingProps);case 24:Xn(n,Pe,e.memoizedState.cache)}return Cn(e,n,s)}function Up(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)Qe=!0;else{if(!kc(e,s)&&(n.flags&128)===0)return Qe=!1,fS(e,n,s);Qe=(e.flags&131072)!==0}else Qe=!1,he&&(n.flags&1048576)!==0&&mm(n,Ma,n.index);switch(n.lanes=0,n.tag){case 16:e:{var r=n.pendingProps;if(e=Vi(n.elementType),n.type=e,typeof e=="function")ju(e)?(r=Qi(e,r),n.tag=1,n=Dp(null,n,e,r,s)):(n.tag=0,n=Nc(null,n,e,r,s));else{if(e!=null){var u=e.$$typeof;if(u===Y){n.tag=11,n=Cp(null,n,e,r,s);break e}else if(u===K){n.tag=14,n=wp(null,n,e,r,s);break e}}throw n=mn(e)||e,Error(l(306,n,""))}}return n;case 0:return Nc(e,n,n.type,n.pendingProps,s);case 1:return r=n.type,u=Qi(r,n.pendingProps),Dp(e,n,r,u,s);case 3:e:{if(ct(n,n.stateNode.containerInfo),e===null)throw Error(l(387));r=n.pendingProps;var c=n.memoizedState;u=c.element,ec(e,n),Ba(n,r,null,s);var d=n.memoizedState;if(r=d.cache,Xn(n,Pe,r),r!==c.cache&&Ku(n,[Pe],s,!0),ja(),r=d.element,c.isDehydrated)if(c={element:r,isDehydrated:!1,cache:d.cache},n.updateQueue.baseState=c,n.memoizedState=c,n.flags&256){n=Mp(e,n,r,s);break e}else if(r!==u){u=Bt(Error(l(424)),n),Ia(u),n=Mp(e,n,r,s);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ke=Yt(e.firstChild),it=n,he=!0,Fn=null,Gt=!0,s=Nm(n,null,r,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Hi(),r===u){n=Cn(e,n,s);break e}at(e,n,r,s)}n=n.child}return n;case 26:return Ir(e,n),e===null?(s=Fg(n.type,null,n.pendingProps,null))?n.memoizedState=s:he||(s=n.type,e=n.pendingProps,r=Zr(ae.current).createElement(s),r[nt]=n,r[yt]=e,lt(r,s,e),Je(r),n.stateNode=r):n.memoizedState=Fg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return _a(n),e===null&&he&&(r=n.stateNode=Pg(n.type,n.pendingProps,ae.current),it=n,Gt=!0,u=ke,oi(n.type)?(mf=u,ke=Yt(r.firstChild)):ke=u),at(e,n,n.pendingProps.children,s),Ir(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&he&&((u=r=ke)&&(r=qS(r,n.type,n.pendingProps,Gt),r!==null?(n.stateNode=r,it=n,ke=Yt(r.firstChild),Gt=!1,u=!0):u=!1),u||Kn(n)),_a(n),u=n.type,c=n.pendingProps,d=e!==null?e.memoizedProps:null,r=c.children,uf(u,c)?r=null:d!==null&&uf(u,d)&&(n.flags|=32),n.memoizedState!==null&&(u=rc(e,n,nS,null,null,s),ll._currentValue=u),Ir(e,n),at(e,n,r,s),n.child;case 6:return e===null&&he&&((e=s=ke)&&(s=VS(s,n.pendingProps,Gt),s!==null?(n.stateNode=s,it=n,ke=null,e=!0):e=!1),e||Kn(n)),null;case 13:return Ip(e,n,s);case 4:return ct(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=Pi(n,null,r,s):at(e,n,r,s),n.child;case 11:return Cp(e,n,n.type,n.pendingProps,s);case 7:return at(e,n,n.pendingProps,s),n.child;case 8:return at(e,n,n.pendingProps.children,s),n.child;case 12:return at(e,n,n.pendingProps.children,s),n.child;case 10:return r=n.pendingProps,Xn(n,n.type,r.value),at(e,n,r.children,s),n.child;case 9:return u=n.type._context,r=n.pendingProps.children,Bi(n),u=st(u),r=r(u),n.flags|=1,at(e,n,r,s),n.child;case 14:return wp(e,n,n.type,n.pendingProps,s);case 15:return Ap(e,n,n.type,n.pendingProps,s);case 19:return Lp(e,n,s);case 31:return cS(e,n,s);case 22:return Np(e,n,s,n.pendingProps);case 24:return Bi(n),r=st(Pe),e===null?(u=Wu(),u===null&&(u=Oe,c=Xu(),u.pooledCache=c,c.refCount++,c!==null&&(u.pooledCacheLanes|=s),u=c),n.memoizedState={parent:r,cache:u},$u(n),Xn(n,Pe,u)):((e.lanes&s)!==0&&(ec(e,n),Ba(n,null,null,s),ja()),u=e.memoizedState,c=n.memoizedState,u.parent!==r?(u={parent:r,cache:r},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Xn(n,Pe,r)):(r=c.cache,Xn(n,Pe,r),r!==u.cache&&Ku(n,[Pe],s,!0))),at(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function wn(e){e.flags|=4}function Lc(e,n,s,r,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(ug())e.flags|=8192;else throw Gi=yr,Ju}else e.flags&=-16777217}function zp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jg(n))if(ug())e.flags|=8192;else throw Gi=yr,Ju}function Lr(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?gd():536870912,e.lanes|=n,zs|=n)}function Qa(e,n){if(!he)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Le(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(n)for(var u=e.child;u!==null;)s|=u.lanes|u.childLanes,r|=u.subtreeFlags&65011712,r|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)s|=u.lanes|u.childLanes,r|=u.subtreeFlags,r|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=r,e.childLanes=s,n}function hS(e,n,s){var r=n.pendingProps;switch(Gu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(n),null;case 1:return Le(n),null;case 3:return s=n.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Sn(Pe),qe(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Cs(n)?wn(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Yu())),Le(n),null;case 26:var u=n.type,c=n.memoizedState;return e===null?(wn(n),c!==null?(Le(n),zp(n,c)):(Le(n),Lc(n,u,null,r,s))):c?c!==e.memoizedState?(wn(n),Le(n),zp(n,c)):(Le(n),n.flags&=-16777217):(e=e.memoizedProps,e!==r&&wn(n),Le(n),Lc(n,u,e,r,s)),null;case 27:if(Ql(n),s=ae.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&wn(n);else{if(!r){if(n.stateNode===null)throw Error(l(166));return Le(n),null}e=q.current,Cs(n)?gm(n):(e=Pg(u,r,s),n.stateNode=e,wn(n))}return Le(n),null;case 5:if(Ql(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==r&&wn(n);else{if(!r){if(n.stateNode===null)throw Error(l(166));return Le(n),null}if(c=q.current,Cs(n))gm(n);else{var d=Zr(ae.current);switch(c){case 1:c=d.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:c=d.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":c=d.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":c=d.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":c=d.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof r.is=="string"?d.createElement("select",{is:r.is}):d.createElement("select"),r.multiple?c.multiple=!0:r.size&&(c.size=r.size);break;default:c=typeof r.is=="string"?d.createElement(u,{is:r.is}):d.createElement(u)}}c[nt]=n,c[yt]=r;e:for(d=n.child;d!==null;){if(d.tag===5||d.tag===6)c.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}n.stateNode=c;e:switch(lt(c,u,r),u){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&wn(n)}}return Le(n),Lc(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==r&&wn(n);else{if(typeof r!="string"&&n.stateNode===null)throw Error(l(166));if(e=ae.current,Cs(n)){if(e=n.stateNode,s=n.memoizedProps,r=null,u=it,u!==null)switch(u.tag){case 27:case 5:r=u.memoizedProps}e[nt]=n,e=!!(e.nodeValue===s||r!==null&&r.suppressHydrationWarning===!0||Ig(e.nodeValue,s)),e||Kn(n,!0)}else e=Zr(e).createTextNode(r),e[nt]=n,n.stateNode=e}return Le(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(r=Cs(n),s!==null){if(e===null){if(!r)throw Error(l(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(557));e[nt]=n}else Hi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Le(n),e=!1}else s=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(It(n),n):(It(n),null);if((n.flags&128)!==0)throw Error(l(558))}return Le(n),null;case 13:if(r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Cs(n),r!==null&&r.dehydrated!==null){if(e===null){if(!u)throw Error(l(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(l(317));u[nt]=n}else Hi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Le(n),u=!1}else u=Yu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(It(n),n):(It(n),null)}return It(n),(n.flags&128)!==0?(n.lanes=s,n):(s=r!==null,e=e!==null&&e.memoizedState!==null,s&&(r=n.child,u=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(u=r.alternate.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==u&&(r.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),Lr(n,n.updateQueue),Le(n),null);case 4:return qe(),e===null&&sf(n.stateNode.containerInfo),Le(n),null;case 10:return Sn(n.type),Le(n),null;case 19:if(L(Ve),r=n.memoizedState,r===null)return Le(n),null;if(u=(n.flags&128)!==0,c=r.rendering,c===null)if(u)Qa(r,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(c=Er(e),c!==null){for(n.flags|=128,Qa(r,!1),e=c.updateQueue,n.updateQueue=e,Lr(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)fm(s,e),s=s.sibling;return j(Ve,Ve.current&1|2),he&&vn(n,r.treeForkCount),n.child}e=e.sibling}r.tail!==null&&Nt()>Br&&(n.flags|=128,u=!0,Qa(r,!1),n.lanes=4194304)}else{if(!u)if(e=Er(c),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,Lr(n,e),Qa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!c.alternate&&!he)return Le(n),null}else 2*Nt()-r.renderingStartTime>Br&&s!==536870912&&(n.flags|=128,u=!0,Qa(r,!1),n.lanes=4194304);r.isBackwards?(c.sibling=n.child,n.child=c):(e=r.last,e!==null?e.sibling=c:n.child=c,r.last=c)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Nt(),e.sibling=null,s=Ve.current,j(Ve,u?s&1|2:s&1),he&&vn(n,r.treeForkCount),e):(Le(n),null);case 22:case 23:return It(n),sc(),r=n.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(n.flags|=8192):r&&(n.flags|=8192),r?(s&536870912)!==0&&(n.flags&128)===0&&(Le(n),n.subtreeFlags&6&&(n.flags|=8192)):Le(n),s=n.updateQueue,s!==null&&Lr(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),r=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),r!==s&&(n.flags|=2048),e!==null&&L(qi),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Sn(Pe),Le(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function dS(e,n){switch(Gu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Sn(Pe),qe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Ql(n),null;case 31:if(n.memoizedState!==null){if(It(n),n.alternate===null)throw Error(l(340));Hi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(It(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));Hi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return L(Ve),null;case 4:return qe(),null;case 10:return Sn(n.type),null;case 22:case 23:return It(n),sc(),e!==null&&L(qi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Sn(Pe),null;case 25:return null;default:return null}}function Hp(e,n){switch(Gu(n),n.tag){case 3:Sn(Pe),qe();break;case 26:case 27:case 5:Ql(n);break;case 4:qe();break;case 31:n.memoizedState!==null&&It(n);break;case 13:It(n);break;case 19:L(Ve);break;case 10:Sn(n.type);break;case 22:case 23:It(n),sc(),e!==null&&L(qi);break;case 24:Sn(Pe)}}function Fa(e,n){try{var s=n.updateQueue,r=s!==null?s.lastEffect:null;if(r!==null){var u=r.next;s=u;do{if((s.tag&e)===e){r=void 0;var c=s.create,d=s.inst;r=c(),d.destroy=r}s=s.next}while(s!==u)}}catch(_){Ee(n,n.return,_)}}function ti(e,n,s){try{var r=n.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var c=u.next;r=c;do{if((r.tag&e)===e){var d=r.inst,_=d.destroy;if(_!==void 0){d.destroy=void 0,u=n;var v=s,N=_;try{N()}catch(D){Ee(u,v,D)}}}r=r.next}while(r!==c)}}catch(D){Ee(n,n.return,D)}}function jp(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{Rm(n,s)}catch(r){Ee(e,e.return,r)}}}function Bp(e,n,s){s.props=Qi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(r){Ee(e,n,r)}}function Ka(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof s=="function"?e.refCleanup=s(r):s.current=r}}catch(u){Ee(e,n,u)}}function un(e,n){var s=e.ref,r=e.refCleanup;if(s!==null)if(typeof r=="function")try{r()}catch(u){Ee(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(u){Ee(e,n,u)}else s.current=null}function qp(e){var n=e.type,s=e.memoizedProps,r=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break e;case"img":s.src?r.src=s.src:s.srcSet&&(r.srcset=s.srcSet)}}catch(u){Ee(e,e.return,u)}}function Uc(e,n,s){try{var r=e.stateNode;LS(r,e.type,s,n),r[yt]=n}catch(u){Ee(e,e.return,u)}}function Vp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&oi(e.type)||e.tag===4}function zc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&oi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hc(e,n,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=gn));else if(r!==4&&(r===27&&oi(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(Hc(e,n,s),e=e.sibling;e!==null;)Hc(e,n,s),e=e.sibling}function Ur(e,n,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(r!==4&&(r===27&&oi(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Ur(e,n,s),e=e.sibling;e!==null;)Ur(e,n,s),e=e.sibling}function Gp(e){var n=e.stateNode,s=e.memoizedProps;try{for(var r=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);lt(n,r,s),n[nt]=e,n[yt]=s}catch(c){Ee(e,e.return,c)}}var An=!1,Fe=!1,jc=!1,Pp=typeof WeakSet=="function"?WeakSet:Set,$e=null;function mS(e,n){if(e=e.containerInfo,rf=io,e=nm(e),Mu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var u=r.anchorOffset,c=r.focusNode;r=r.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,_=-1,v=-1,N=0,D=0,k=e,x=null;t:for(;;){for(var O;k!==s||u!==0&&k.nodeType!==3||(_=d+u),k!==c||r!==0&&k.nodeType!==3||(v=d+r),k.nodeType===3&&(d+=k.nodeValue.length),(O=k.firstChild)!==null;)x=k,k=O;for(;;){if(k===e)break t;if(x===s&&++N===u&&(_=d),x===c&&++D===r&&(v=d),(O=k.nextSibling)!==null)break;k=x,x=k.parentNode}k=O}s=_===-1||v===-1?null:{start:_,end:v}}else s=null}s=s||{start:0,end:0}}else s=null;for(of={focusedElem:e,selectionRange:s},io=!1,$e=n;$e!==null;)if(n=$e,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,$e=e;else for(;$e!==null;){switch(n=$e,c=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)u=e[s],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,s=n,u=c.memoizedProps,c=c.memoizedState,r=s.stateNode;try{var B=Qi(s.type,u);e=r.getSnapshotBeforeUpdate(B,c),r.__reactInternalSnapshotBeforeUpdate=e}catch(Q){Ee(s,s.return,Q)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)ff(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ff(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,$e=e;break}$e=n.return}}function Yp(e,n,s){var r=s.flags;switch(s.tag){case 0:case 11:case 15:xn(e,s),r&4&&Fa(5,s);break;case 1:if(xn(e,s),r&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(d){Ee(s,s.return,d)}else{var u=Qi(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(d){Ee(s,s.return,d)}}r&64&&jp(s),r&512&&Ka(s,s.return);break;case 3:if(xn(e,s),r&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Rm(e,n)}catch(d){Ee(s,s.return,d)}}break;case 27:n===null&&r&4&&Gp(s);case 26:case 5:xn(e,s),n===null&&r&4&&qp(s),r&512&&Ka(s,s.return);break;case 12:xn(e,s);break;case 31:xn(e,s),r&4&&Kp(e,s);break;case 13:xn(e,s),r&4&&Xp(e,s),r&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=TS.bind(null,s),GS(e,s))));break;case 22:if(r=s.memoizedState!==null||An,!r){n=n!==null&&n.memoizedState!==null||Fe,u=An;var c=Fe;An=r,(Fe=n)&&!c?Rn(e,s,(s.subtreeFlags&8772)!==0):xn(e,s),An=u,Fe=c}break;case 30:break;default:xn(e,s)}}function Qp(e){var n=e.alternate;n!==null&&(e.alternate=null,Qp(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&pu(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,bt=!1;function Nn(e,n,s){for(s=s.child;s!==null;)Fp(e,n,s),s=s.sibling}function Fp(e,n,s){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(ya,s)}catch{}switch(s.tag){case 26:Fe||un(s,n),Nn(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Fe||un(s,n);var r=Ue,u=bt;oi(s.type)&&(Ue=s.stateNode,bt=!1),Nn(e,n,s),il(s.stateNode),Ue=r,bt=u;break;case 5:Fe||un(s,n);case 6:if(r=Ue,u=bt,Ue=null,Nn(e,n,s),Ue=r,bt=u,Ue!==null)if(bt)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(s.stateNode)}catch(c){Ee(s,n,c)}else try{Ue.removeChild(s.stateNode)}catch(c){Ee(s,n,c)}break;case 18:Ue!==null&&(bt?(e=Ue,jg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Ys(e)):jg(Ue,s.stateNode));break;case 4:r=Ue,u=bt,Ue=s.stateNode.containerInfo,bt=!0,Nn(e,n,s),Ue=r,bt=u;break;case 0:case 11:case 14:case 15:ti(2,s,n),Fe||ti(4,s,n),Nn(e,n,s);break;case 1:Fe||(un(s,n),r=s.stateNode,typeof r.componentWillUnmount=="function"&&Bp(s,n,r)),Nn(e,n,s);break;case 21:Nn(e,n,s);break;case 22:Fe=(r=Fe)||s.memoizedState!==null,Nn(e,n,s),Fe=r;break;default:Nn(e,n,s)}}function Kp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Ys(e)}catch(s){Ee(n,n.return,s)}}}function Xp(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Ys(e)}catch(s){Ee(n,n.return,s)}}function pS(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Pp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Pp),n;default:throw Error(l(435,e.tag))}}function zr(e,n){var s=pS(e);n.forEach(function(r){if(!s.has(r)){s.add(r);var u=CS.bind(null,e,r);r.then(u,u)}})}function St(e,n){var s=n.deletions;if(s!==null)for(var r=0;r<s.length;r++){var u=s[r],c=e,d=n,_=d;e:for(;_!==null;){switch(_.tag){case 27:if(oi(_.type)){Ue=_.stateNode,bt=!1;break e}break;case 5:Ue=_.stateNode,bt=!1;break e;case 3:case 4:Ue=_.stateNode.containerInfo,bt=!0;break e}_=_.return}if(Ue===null)throw Error(l(160));Fp(c,d,u),Ue=null,bt=!1,c=u.alternate,c!==null&&(c.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Zp(n,e),n=n.sibling}var Jt=null;function Zp(e,n){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:St(n,e),Et(e),r&4&&(ti(3,e,e.return),Fa(3,e),ti(5,e,e.return));break;case 1:St(n,e),Et(e),r&512&&(Fe||s===null||un(s,s.return)),r&64&&An&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?r:s.concat(r))));break;case 26:var u=Jt;if(St(n,e),Et(e),r&512&&(Fe||s===null||un(s,s.return)),r&4){var c=s!==null?s.memoizedState:null;if(r=e.memoizedState,s===null)if(r===null)if(e.stateNode===null){e:{r=e.type,s=e.memoizedProps,u=u.ownerDocument||u;t:switch(r){case"title":c=u.getElementsByTagName("title")[0],(!c||c[Sa]||c[nt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=u.createElement(r),u.head.insertBefore(c,u.querySelector("head > title"))),lt(c,r,s),c[nt]=e,Je(c),r=c;break e;case"link":var d=Zg("link","href",u).get(r+(s.href||""));if(d){for(var _=0;_<d.length;_++)if(c=d[_],c.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&c.getAttribute("rel")===(s.rel==null?null:s.rel)&&c.getAttribute("title")===(s.title==null?null:s.title)&&c.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){d.splice(_,1);break t}}c=u.createElement(r),lt(c,r,s),u.head.appendChild(c);break;case"meta":if(d=Zg("meta","content",u).get(r+(s.content||""))){for(_=0;_<d.length;_++)if(c=d[_],c.getAttribute("content")===(s.content==null?null:""+s.content)&&c.getAttribute("name")===(s.name==null?null:s.name)&&c.getAttribute("property")===(s.property==null?null:s.property)&&c.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&c.getAttribute("charset")===(s.charSet==null?null:s.charSet)){d.splice(_,1);break t}}c=u.createElement(r),lt(c,r,s),u.head.appendChild(c);break;default:throw Error(l(468,r))}c[nt]=e,Je(c),r=c}e.stateNode=r}else Wg(u,e.type,e.stateNode);else e.stateNode=Xg(u,r,e.memoizedProps);else c!==r?(c===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):c.count--,r===null?Wg(u,e.type,e.stateNode):Xg(u,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Uc(e,e.memoizedProps,s.memoizedProps)}break;case 27:St(n,e),Et(e),r&512&&(Fe||s===null||un(s,s.return)),s!==null&&r&4&&Uc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(St(n,e),Et(e),r&512&&(Fe||s===null||un(s,s.return)),e.flags&32){u=e.stateNode;try{ms(u,"")}catch(B){Ee(e,e.return,B)}}r&4&&e.stateNode!=null&&(u=e.memoizedProps,Uc(e,u,s!==null?s.memoizedProps:u)),r&1024&&(jc=!0);break;case 6:if(St(n,e),Et(e),r&4){if(e.stateNode===null)throw Error(l(162));r=e.memoizedProps,s=e.stateNode;try{s.nodeValue=r}catch(B){Ee(e,e.return,B)}}break;case 3:if($r=null,u=Jt,Jt=Wr(n.containerInfo),St(n,e),Jt=u,Et(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Ys(n.containerInfo)}catch(B){Ee(e,e.return,B)}jc&&(jc=!1,Wp(e));break;case 4:r=Jt,Jt=Wr(e.stateNode.containerInfo),St(n,e),Et(e),Jt=r;break;case 12:St(n,e),Et(e);break;case 31:St(n,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,zr(e,r)));break;case 13:St(n,e),Et(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(jr=Nt()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,zr(e,r)));break;case 22:u=e.memoizedState!==null;var v=s!==null&&s.memoizedState!==null,N=An,D=Fe;if(An=N||u,Fe=D||v,St(n,e),Fe=D,An=N,Et(e),r&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(s===null||v||An||Fe||Fi(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){v=s=n;try{if(c=v.stateNode,u)d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{_=v.stateNode;var k=v.memoizedProps.style,x=k!=null&&k.hasOwnProperty("display")?k.display:null;_.style.display=x==null||typeof x=="boolean"?"":(""+x).trim()}}catch(B){Ee(v,v.return,B)}}}else if(n.tag===6){if(s===null){v=n;try{v.stateNode.nodeValue=u?"":v.memoizedProps}catch(B){Ee(v,v.return,B)}}}else if(n.tag===18){if(s===null){v=n;try{var O=v.stateNode;u?Bg(O,!0):Bg(v.stateNode,!1)}catch(B){Ee(v,v.return,B)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}r&4&&(r=e.updateQueue,r!==null&&(s=r.retryQueue,s!==null&&(r.retryQueue=null,zr(e,s))));break;case 19:St(n,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,zr(e,r)));break;case 30:break;case 21:break;default:St(n,e),Et(e)}}function Et(e){var n=e.flags;if(n&2){try{for(var s,r=e.return;r!==null;){if(Vp(r)){s=r;break}r=r.return}if(s==null)throw Error(l(160));switch(s.tag){case 27:var u=s.stateNode,c=zc(e);Ur(e,c,u);break;case 5:var d=s.stateNode;s.flags&32&&(ms(d,""),s.flags&=-33);var _=zc(e);Ur(e,_,d);break;case 3:case 4:var v=s.stateNode.containerInfo,N=zc(e);Hc(e,N,v);break;default:throw Error(l(161))}}catch(D){Ee(e,e.return,D)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Wp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Wp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function xn(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Yp(e,n.alternate,n),n=n.sibling}function Fi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ti(4,n,n.return),Fi(n);break;case 1:un(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&Bp(n,n.return,s),Fi(n);break;case 27:il(n.stateNode);case 26:case 5:un(n,n.return),Fi(n);break;case 22:n.memoizedState===null&&Fi(n);break;case 30:Fi(n);break;default:Fi(n)}e=e.sibling}}function Rn(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var r=n.alternate,u=e,c=n,d=c.flags;switch(c.tag){case 0:case 11:case 15:Rn(u,c,s),Fa(4,c);break;case 1:if(Rn(u,c,s),r=c,u=r.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(N){Ee(r,r.return,N)}if(r=c,u=r.updateQueue,u!==null){var _=r.stateNode;try{var v=u.shared.hiddenCallbacks;if(v!==null)for(u.shared.hiddenCallbacks=null,u=0;u<v.length;u++)xm(v[u],_)}catch(N){Ee(r,r.return,N)}}s&&d&64&&jp(c),Ka(c,c.return);break;case 27:Gp(c);case 26:case 5:Rn(u,c,s),s&&r===null&&d&4&&qp(c),Ka(c,c.return);break;case 12:Rn(u,c,s);break;case 31:Rn(u,c,s),s&&d&4&&Kp(u,c);break;case 13:Rn(u,c,s),s&&d&4&&Xp(u,c);break;case 22:c.memoizedState===null&&Rn(u,c,s),Ka(c,c.return);break;case 30:break;default:Rn(u,c,s)}n=n.sibling}}function Bc(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&ka(s))}function qc(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ka(e))}function $t(e,n,s,r){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jp(e,n,s,r),n=n.sibling}function Jp(e,n,s,r){var u=n.flags;switch(n.tag){case 0:case 11:case 15:$t(e,n,s,r),u&2048&&Fa(9,n);break;case 1:$t(e,n,s,r);break;case 3:$t(e,n,s,r),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&ka(e)));break;case 12:if(u&2048){$t(e,n,s,r),e=n.stateNode;try{var c=n.memoizedProps,d=c.id,_=c.onPostCommit;typeof _=="function"&&_(d,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(v){Ee(n,n.return,v)}}else $t(e,n,s,r);break;case 31:$t(e,n,s,r);break;case 13:$t(e,n,s,r);break;case 23:break;case 22:c=n.stateNode,d=n.alternate,n.memoizedState!==null?c._visibility&2?$t(e,n,s,r):Xa(e,n):c._visibility&2?$t(e,n,s,r):(c._visibility|=2,ks(e,n,s,r,(n.subtreeFlags&10256)!==0||!1)),u&2048&&Bc(d,n);break;case 24:$t(e,n,s,r),u&2048&&qc(n.alternate,n);break;default:$t(e,n,s,r)}}function ks(e,n,s,r,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var c=e,d=n,_=s,v=r,N=d.flags;switch(d.tag){case 0:case 11:case 15:ks(c,d,_,v,u),Fa(8,d);break;case 23:break;case 22:var D=d.stateNode;d.memoizedState!==null?D._visibility&2?ks(c,d,_,v,u):Xa(c,d):(D._visibility|=2,ks(c,d,_,v,u)),u&&N&2048&&Bc(d.alternate,d);break;case 24:ks(c,d,_,v,u),u&&N&2048&&qc(d.alternate,d);break;default:ks(c,d,_,v,u)}n=n.sibling}}function Xa(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,r=n,u=r.flags;switch(r.tag){case 22:Xa(s,r),u&2048&&Bc(r.alternate,r);break;case 24:Xa(s,r),u&2048&&qc(r.alternate,r);break;default:Xa(s,r)}n=n.sibling}}var Za=8192;function Ls(e,n,s){if(e.subtreeFlags&Za)for(e=e.child;e!==null;)$p(e,n,s),e=e.sibling}function $p(e,n,s){switch(e.tag){case 26:Ls(e,n,s),e.flags&Za&&e.memoizedState!==null&&tE(s,Jt,e.memoizedState,e.memoizedProps);break;case 5:Ls(e,n,s);break;case 3:case 4:var r=Jt;Jt=Wr(e.stateNode.containerInfo),Ls(e,n,s),Jt=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Za,Za=16777216,Ls(e,n,s),Za=r):Ls(e,n,s));break;default:Ls(e,n,s)}}function eg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Wa(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];$e=r,ng(r,e)}eg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)tg(e),e=e.sibling}function tg(e){switch(e.tag){case 0:case 11:case 15:Wa(e),e.flags&2048&&ti(9,e,e.return);break;case 3:Wa(e);break;case 12:Wa(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Hr(e)):Wa(e);break;default:Wa(e)}}function Hr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];$e=r,ng(r,e)}eg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ti(8,n,n.return),Hr(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Hr(n));break;default:Hr(n)}e=e.sibling}}function ng(e,n){for(;$e!==null;){var s=$e;switch(s.tag){case 0:case 11:case 15:ti(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var r=s.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ka(s.memoizedState.cache)}if(r=s.child,r!==null)r.return=s,$e=r;else e:for(s=e;$e!==null;){r=$e;var u=r.sibling,c=r.return;if(Qp(r),r===s){$e=null;break e}if(u!==null){u.return=c,$e=u;break e}$e=c}}}var gS={getCacheForType:function(e){var n=st(Pe),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return st(Pe).controller.signal}},_S=typeof WeakMap=="function"?WeakMap:Map,ve=0,Oe=null,le=null,ue=0,Se=0,kt=null,ni=!1,Us=!1,Vc=!1,On=0,He=0,ii=0,Ki=0,Gc=0,Lt=0,zs=0,Ja=null,Tt=null,Pc=!1,jr=0,ig=0,Br=1/0,qr=null,si=null,Xe=0,ai=null,Hs=null,Dn=0,Yc=0,Qc=null,sg=null,$a=0,Fc=null;function Ut(){return(ve&2)!==0&&ue!==0?ue&-ue:M.T!==null?$c():bd()}function ag(){if(Lt===0)if((ue&536870912)===0||he){var e=Xl;Xl<<=1,(Xl&3932160)===0&&(Xl=262144),Lt=e}else Lt=536870912;return e=Mt.current,e!==null&&(e.flags|=32),Lt}function Ct(e,n,s){(e===Oe&&(Se===2||Se===9)||e.cancelPendingCommit!==null)&&(js(e,0),li(e,ue,Lt,!1)),ba(e,s),((ve&2)===0||e!==Oe)&&(e===Oe&&((ve&2)===0&&(Ki|=s),He===4&&li(e,ue,Lt,!1)),cn(e))}function lg(e,n,s){if((ve&6)!==0)throw Error(l(327));var r=!s&&(n&127)===0&&(n&e.expiredLanes)===0||va(e,n),u=r?bS(e,n):Xc(e,n,!0),c=r;do{if(u===0){Us&&!r&&li(e,n,0,!1);break}else{if(s=e.current.alternate,c&&!yS(s)){u=Xc(e,n,!1),c=!1;continue}if(u===2){if(c=n,e.errorRecoveryDisabledLanes&c)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){n=d;e:{var _=e;u=Ja;var v=_.current.memoizedState.isDehydrated;if(v&&(js(_,d).flags|=256),d=Xc(_,d,!1),d!==2){if(Vc&&!v){_.errorRecoveryDisabledLanes|=c,Ki|=c,u=4;break e}c=Tt,Tt=u,c!==null&&(Tt===null?Tt=c:Tt.push.apply(Tt,c))}u=d}if(c=!1,u!==2)continue}}if(u===1){js(e,0),li(e,n,0,!0);break}e:{switch(r=e,c=u,c){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:li(r,n,Lt,!ni);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(u=jr+300-Nt(),10<u)){if(li(r,n,Lt,!ni),Wl(r,0,!0)!==0)break e;Dn=n,r.timeoutHandle=zg(rg.bind(null,r,s,Tt,qr,Pc,n,Lt,Ki,zs,ni,c,"Throttled",-0,0),u);break e}rg(r,s,Tt,qr,Pc,n,Lt,Ki,zs,ni,c,null,-0,0)}}break}while(!0);cn(e)}function rg(e,n,s,r,u,c,d,_,v,N,D,k,x,O){if(e.timeoutHandle=-1,k=n.subtreeFlags,k&8192||(k&16785408)===16785408){k={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gn},$p(n,c,k);var B=(c&62914560)===c?jr-Nt():(c&4194048)===c?ig-Nt():0;if(B=nE(k,B),B!==null){Dn=c,e.cancelPendingCommit=B(pg.bind(null,e,n,c,s,r,u,d,_,v,D,k,null,x,O)),li(e,c,d,!N);return}}pg(e,n,c,s,r,u,d,_,v)}function yS(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var r=0;r<s.length;r++){var u=s[r],c=u.getSnapshot;u=u.value;try{if(!Ot(c(),u))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function li(e,n,s,r){n&=~Gc,n&=~Ki,e.suspendedLanes|=n,e.pingedLanes&=~n,r&&(e.warmLanes|=n),r=e.expirationTimes;for(var u=n;0<u;){var c=31-Rt(u),d=1<<c;r[c]=-1,u&=~d}s!==0&&_d(e,s,n)}function Vr(){return(ve&6)===0?(el(0),!1):!0}function Kc(){if(le!==null){if(Se===0)var e=le.return;else e=le,bn=ji=null,cc(e),Rs=null,Ua=0,e=le;for(;e!==null;)Hp(e.alternate,e),e=e.return;le=null}}function js(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,HS(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Dn=0,Kc(),Oe=e,le=s=yn(e.current,null),ue=n,Se=0,kt=null,ni=!1,Us=va(e,n),Vc=!1,zs=Lt=Gc=Ki=ii=He=0,Tt=Ja=null,Pc=!1,(n&8)!==0&&(n|=n&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=n;0<r;){var u=31-Rt(r),c=1<<u;n|=e[u],r&=~c}return On=n,ur(),s}function og(e,n){te=null,M.H=Pa,n===xs||n===_r?(n=Cm(),Se=3):n===Ju?(n=Cm(),Se=4):Se=n===Ac?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,kt=n,le===null&&(He=1,Dr(e,Bt(n,e.current)))}function ug(){var e=Mt.current;return e===null?!0:(ue&4194048)===ue?Pt===null:(ue&62914560)===ue||(ue&536870912)!==0?e===Pt:!1}function cg(){var e=M.H;return M.H=Pa,e===null?Pa:e}function fg(){var e=M.A;return M.A=gS,e}function Gr(){He=4,ni||(ue&4194048)!==ue&&Mt.current!==null||(Us=!0),(ii&134217727)===0&&(Ki&134217727)===0||Oe===null||li(Oe,ue,Lt,!1)}function Xc(e,n,s){var r=ve;ve|=2;var u=cg(),c=fg();(Oe!==e||ue!==n)&&(qr=null,js(e,n)),n=!1;var d=He;e:do try{if(Se!==0&&le!==null){var _=le,v=kt;switch(Se){case 8:Kc(),d=6;break e;case 3:case 2:case 9:case 6:Mt.current===null&&(n=!0);var N=Se;if(Se=0,kt=null,Bs(e,_,v,N),s&&Us){d=0;break e}break;default:N=Se,Se=0,kt=null,Bs(e,_,v,N)}}vS(),d=He;break}catch(D){og(e,D)}while(!0);return n&&e.shellSuspendCounter++,bn=ji=null,ve=r,M.H=u,M.A=c,le===null&&(Oe=null,ue=0,ur()),d}function vS(){for(;le!==null;)hg(le)}function bS(e,n){var s=ve;ve|=2;var r=cg(),u=fg();Oe!==e||ue!==n?(qr=null,Br=Nt()+500,js(e,n)):Us=va(e,n);e:do try{if(Se!==0&&le!==null){n=le;var c=kt;t:switch(Se){case 1:Se=0,kt=null,Bs(e,n,c,1);break;case 2:case 9:if(Em(c)){Se=0,kt=null,dg(n);break}n=function(){Se!==2&&Se!==9||Oe!==e||(Se=7),cn(e)},c.then(n,n);break e;case 3:Se=7;break e;case 4:Se=5;break e;case 7:Em(c)?(Se=0,kt=null,dg(n)):(Se=0,kt=null,Bs(e,n,c,7));break;case 5:var d=null;switch(le.tag){case 26:d=le.memoizedState;case 5:case 27:var _=le;if(d?Jg(d):_.stateNode.complete){Se=0,kt=null;var v=_.sibling;if(v!==null)le=v;else{var N=_.return;N!==null?(le=N,Pr(N)):le=null}break t}}Se=0,kt=null,Bs(e,n,c,5);break;case 6:Se=0,kt=null,Bs(e,n,c,6);break;case 8:Kc(),He=6;break e;default:throw Error(l(462))}}SS();break}catch(D){og(e,D)}while(!0);return bn=ji=null,M.H=r,M.A=u,ve=s,le!==null?0:(Oe=null,ue=0,ur(),He)}function SS(){for(;le!==null&&!P0();)hg(le)}function hg(e){var n=Up(e.alternate,e,On);e.memoizedProps=e.pendingProps,n===null?Pr(e):le=n}function dg(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=Op(s,n,n.pendingProps,n.type,void 0,ue);break;case 11:n=Op(s,n,n.pendingProps,n.type.render,n.ref,ue);break;case 5:cc(n);default:Hp(s,n),n=le=fm(n,On),n=Up(s,n,On)}e.memoizedProps=e.pendingProps,n===null?Pr(e):le=n}function Bs(e,n,s,r){bn=ji=null,cc(n),Rs=null,Ua=0;var u=n.return;try{if(uS(e,u,n,s,ue)){He=1,Dr(e,Bt(s,e.current)),le=null;return}}catch(c){if(u!==null)throw le=u,c;He=1,Dr(e,Bt(s,e.current)),le=null;return}n.flags&32768?(he||r===1?e=!0:Us||(ue&536870912)!==0?e=!1:(ni=e=!0,(r===2||r===9||r===3||r===6)&&(r=Mt.current,r!==null&&r.tag===13&&(r.flags|=16384))),mg(n,e)):Pr(n)}function Pr(e){var n=e;do{if((n.flags&32768)!==0){mg(n,ni);return}e=n.return;var s=hS(n.alternate,n,On);if(s!==null){le=s;return}if(n=n.sibling,n!==null){le=n;return}le=n=e}while(n!==null);He===0&&(He=5)}function mg(e,n){do{var s=dS(e.alternate,e);if(s!==null){s.flags&=32767,le=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){le=e;return}le=e=s}while(e!==null);He=6,le=null}function pg(e,n,s,r,u,c,d,_,v){e.cancelPendingCommit=null;do Yr();while(Xe!==0);if((ve&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(c=n.lanes|n.childLanes,c|=zu,eb(e,s,c,d,_,v),e===Oe&&(le=Oe=null,ue=0),Hs=n,ai=e,Dn=s,Yc=c,Qc=u,sg=r,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,wS(Fl,function(){return bg(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||r){r=M.T,M.T=null,u=H.p,H.p=2,d=ve,ve|=4;try{mS(e,n,s)}finally{ve=d,H.p=u,M.T=r}}Xe=1,gg(),_g(),yg()}}function gg(){if(Xe===1){Xe=0;var e=ai,n=Hs,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=M.T,M.T=null;var r=H.p;H.p=2;var u=ve;ve|=4;try{Zp(n,e);var c=of,d=nm(e.containerInfo),_=c.focusedElem,v=c.selectionRange;if(d!==_&&_&&_.ownerDocument&&tm(_.ownerDocument.documentElement,_)){if(v!==null&&Mu(_)){var N=v.start,D=v.end;if(D===void 0&&(D=N),"selectionStart"in _)_.selectionStart=N,_.selectionEnd=Math.min(D,_.value.length);else{var k=_.ownerDocument||document,x=k&&k.defaultView||window;if(x.getSelection){var O=x.getSelection(),B=_.textContent.length,Q=Math.min(v.start,B),Ae=v.end===void 0?Q:Math.min(v.end,B);!O.extend&&Q>Ae&&(d=Ae,Ae=Q,Q=d);var w=em(_,Q),E=em(_,Ae);if(w&&E&&(O.rangeCount!==1||O.anchorNode!==w.node||O.anchorOffset!==w.offset||O.focusNode!==E.node||O.focusOffset!==E.offset)){var A=k.createRange();A.setStart(w.node,w.offset),O.removeAllRanges(),Q>Ae?(O.addRange(A),O.extend(E.node,E.offset)):(A.setEnd(E.node,E.offset),O.addRange(A))}}}}for(k=[],O=_;O=O.parentNode;)O.nodeType===1&&k.push({element:O,left:O.scrollLeft,top:O.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<k.length;_++){var I=k[_];I.element.scrollLeft=I.left,I.element.scrollTop=I.top}}io=!!rf,of=rf=null}finally{ve=u,H.p=r,M.T=s}}e.current=n,Xe=2}}function _g(){if(Xe===2){Xe=0;var e=ai,n=Hs,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=M.T,M.T=null;var r=H.p;H.p=2;var u=ve;ve|=4;try{Yp(e,n.alternate,n)}finally{ve=u,H.p=r,M.T=s}}Xe=3}}function yg(){if(Xe===4||Xe===3){Xe=0,Y0();var e=ai,n=Hs,s=Dn,r=sg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Xe=5:(Xe=0,Hs=ai=null,vg(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(si=null),du(s),n=n.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(ya,n,void 0,(n.current.flags&128)===128)}catch{}if(r!==null){n=M.T,u=H.p,H.p=2,M.T=null;try{for(var c=e.onRecoverableError,d=0;d<r.length;d++){var _=r[d];c(_.value,{componentStack:_.stack})}}finally{M.T=n,H.p=u}}(Dn&3)!==0&&Yr(),cn(e),u=e.pendingLanes,(s&261930)!==0&&(u&42)!==0?e===Fc?$a++:($a=0,Fc=e):$a=0,el(0)}}function vg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,ka(n)))}function Yr(){return gg(),_g(),yg(),bg()}function bg(){if(Xe!==5)return!1;var e=ai,n=Yc;Yc=0;var s=du(Dn),r=M.T,u=H.p;try{H.p=32>s?32:s,M.T=null,s=Qc,Qc=null;var c=ai,d=Dn;if(Xe=0,Hs=ai=null,Dn=0,(ve&6)!==0)throw Error(l(331));var _=ve;if(ve|=4,tg(c.current),Jp(c,c.current,d,s),ve=_,el(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(ya,c)}catch{}return!0}finally{H.p=u,M.T=r,vg(e,n)}}function Sg(e,n,s){n=Bt(s,n),n=wc(e.stateNode,n,2),e=Jn(e,n,2),e!==null&&(ba(e,2),cn(e))}function Ee(e,n,s){if(e.tag===3)Sg(e,e,s);else for(;n!==null;){if(n.tag===3){Sg(n,e,s);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){e=Bt(s,e),s=Ep(2),r=Jn(n,s,2),r!==null&&(Tp(s,r,n,e),ba(r,2),cn(r));break}}n=n.return}}function Zc(e,n,s){var r=e.pingCache;if(r===null){r=e.pingCache=new _S;var u=new Set;r.set(n,u)}else u=r.get(n),u===void 0&&(u=new Set,r.set(n,u));u.has(s)||(Vc=!0,u.add(s),e=ES.bind(null,e,n,s),n.then(e,e))}function ES(e,n,s){var r=e.pingCache;r!==null&&r.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Oe===e&&(ue&s)===s&&(He===4||He===3&&(ue&62914560)===ue&&300>Nt()-jr?(ve&2)===0&&js(e,0):Gc|=s,zs===ue&&(zs=0)),cn(e)}function Eg(e,n){n===0&&(n=gd()),e=Ui(e,n),e!==null&&(ba(e,n),cn(e))}function TS(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Eg(e,s)}function CS(e,n){var s=0;switch(e.tag){case 31:case 13:var r=e.stateNode,u=e.memoizedState;u!==null&&(s=u.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(l(314))}r!==null&&r.delete(n),Eg(e,s)}function wS(e,n){return uu(e,n)}var Qr=null,qs=null,Wc=!1,Fr=!1,Jc=!1,ri=0;function cn(e){e!==qs&&e.next===null&&(qs===null?Qr=qs=e:qs=qs.next=e),Fr=!0,Wc||(Wc=!0,NS())}function el(e,n){if(!Jc&&Fr){Jc=!0;do for(var s=!1,r=Qr;r!==null;){if(e!==0){var u=r.pendingLanes;if(u===0)var c=0;else{var d=r.suspendedLanes,_=r.pingedLanes;c=(1<<31-Rt(42|e)+1)-1,c&=u&~(d&~_),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(s=!0,Ag(r,c))}else c=ue,c=Wl(r,r===Oe?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(c&3)===0||va(r,c)||(s=!0,Ag(r,c));r=r.next}while(s);Jc=!1}}function AS(){Tg()}function Tg(){Fr=Wc=!1;var e=0;ri!==0&&zS()&&(e=ri);for(var n=Nt(),s=null,r=Qr;r!==null;){var u=r.next,c=Cg(r,n);c===0?(r.next=null,s===null?Qr=u:s.next=u,u===null&&(qs=s)):(s=r,(e!==0||(c&3)!==0)&&(Fr=!0)),r=u}Xe!==0&&Xe!==5||el(e),ri!==0&&(ri=0)}function Cg(e,n){for(var s=e.suspendedLanes,r=e.pingedLanes,u=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var d=31-Rt(c),_=1<<d,v=u[d];v===-1?((_&s)===0||(_&r)!==0)&&(u[d]=$0(_,n)):v<=n&&(e.expiredLanes|=_),c&=~_}if(n=Oe,s=ue,s=Wl(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,s===0||e===n&&(Se===2||Se===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&cu(r),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||va(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(r!==null&&cu(r),du(s)){case 2:case 8:s=md;break;case 32:s=Fl;break;case 268435456:s=pd;break;default:s=Fl}return r=wg.bind(null,e),s=uu(s,r),e.callbackPriority=n,e.callbackNode=s,n}return r!==null&&r!==null&&cu(r),e.callbackPriority=2,e.callbackNode=null,2}function wg(e,n){if(Xe!==0&&Xe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Yr()&&e.callbackNode!==s)return null;var r=ue;return r=Wl(e,e===Oe?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(lg(e,r,n),Cg(e,Nt()),e.callbackNode!=null&&e.callbackNode===s?wg.bind(null,e):null)}function Ag(e,n){if(Yr())return null;lg(e,n,!0)}function NS(){jS(function(){(ve&6)!==0?uu(dd,AS):Tg()})}function $c(){if(ri===0){var e=As;e===0&&(e=Kl,Kl<<=1,(Kl&261888)===0&&(Kl=256)),ri=e}return ri}function Ng(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:tr(""+e)}function xg(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function xS(e,n,s,r,u){if(n==="submit"&&s&&s.stateNode===u){var c=Ng((u[yt]||null).action),d=r.submitter;d&&(n=(n=d[yt]||null)?Ng(n.formAction):d.getAttribute("formAction"),n!==null&&(c=n,d=null));var _=new ar("action","action",null,r,u);e.push({event:_,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ri!==0){var v=d?xg(u,d):new FormData(u);vc(s,{pending:!0,data:v,method:u.method,action:c},null,v)}}else typeof c=="function"&&(_.preventDefault(),v=d?xg(u,d):new FormData(u),vc(s,{pending:!0,data:v,method:u.method,action:c},c,v))},currentTarget:u}]})}}for(var ef=0;ef<Uu.length;ef++){var tf=Uu[ef],RS=tf.toLowerCase(),OS=tf[0].toUpperCase()+tf.slice(1);Wt(RS,"on"+OS)}Wt(am,"onAnimationEnd"),Wt(lm,"onAnimationIteration"),Wt(rm,"onAnimationStart"),Wt("dblclick","onDoubleClick"),Wt("focusin","onFocus"),Wt("focusout","onBlur"),Wt(Qb,"onTransitionRun"),Wt(Fb,"onTransitionStart"),Wt(Kb,"onTransitionCancel"),Wt(om,"onTransitionEnd"),hs("onMouseEnter",["mouseout","mouseover"]),hs("onMouseLeave",["mouseout","mouseover"]),hs("onPointerEnter",["pointerout","pointerover"]),hs("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tl));function Rg(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],u=r.event;r=r.listeners;e:{var c=void 0;if(n)for(var d=r.length-1;0<=d;d--){var _=r[d],v=_.instance,N=_.currentTarget;if(_=_.listener,v!==c&&u.isPropagationStopped())break e;c=_,u.currentTarget=N;try{c(u)}catch(D){or(D)}u.currentTarget=null,c=v}else for(d=0;d<r.length;d++){if(_=r[d],v=_.instance,N=_.currentTarget,_=_.listener,v!==c&&u.isPropagationStopped())break e;c=_,u.currentTarget=N;try{c(u)}catch(D){or(D)}u.currentTarget=null,c=v}}}}function re(e,n){var s=n[mu];s===void 0&&(s=n[mu]=new Set);var r=e+"__bubble";s.has(r)||(Og(n,e,2,!1),s.add(r))}function nf(e,n,s){var r=0;n&&(r|=4),Og(s,e,r,n)}var Kr="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[Kr]){e[Kr]=!0,Td.forEach(function(s){s!=="selectionchange"&&(DS.has(s)||nf(s,!1,e),nf(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Kr]||(n[Kr]=!0,nf("selectionchange",!1,n))}}function Og(e,n,s,r){switch(a_(n)){case 2:var u=aE;break;case 8:u=lE;break;default:u=vf}s=u.bind(null,n,s,e),u=void 0,!Tu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),r?u!==void 0?e.addEventListener(n,s,{capture:!0,passive:u}):e.addEventListener(n,s,!0):u!==void 0?e.addEventListener(n,s,{passive:u}):e.addEventListener(n,s,!1)}function af(e,n,s,r,u){var c=r;if((n&1)===0&&(n&2)===0&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var _=r.stateNode.containerInfo;if(_===u)break;if(d===4)for(d=r.return;d!==null;){var v=d.tag;if((v===3||v===4)&&d.stateNode.containerInfo===u)return;d=d.return}for(;_!==null;){if(d=us(_),d===null)return;if(v=d.tag,v===5||v===6||v===26||v===27){r=c=d;continue e}_=_.parentNode}}r=r.return}Ld(function(){var N=c,D=Su(s),k=[];e:{var x=um.get(e);if(x!==void 0){var O=ar,B=e;switch(e){case"keypress":if(ir(s)===0)break e;case"keydown":case"keyup":O=Cb;break;case"focusin":B="focus",O=Nu;break;case"focusout":B="blur",O=Nu;break;case"beforeblur":case"afterblur":O=Nu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=hb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=Nb;break;case am:case lm:case rm:O=pb;break;case om:O=Rb;break;case"scroll":case"scrollend":O=cb;break;case"wheel":O=Db;break;case"copy":case"cut":case"paste":O=_b;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Bd;break;case"toggle":case"beforetoggle":O=Ib}var Q=(n&4)!==0,Ae=!Q&&(e==="scroll"||e==="scrollend"),w=Q?x!==null?x+"Capture":null:x;Q=[];for(var E=N,A;E!==null;){var I=E;if(A=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||A===null||w===null||(I=Ta(E,w),I!=null&&Q.push(nl(E,I,A))),Ae)break;E=E.return}0<Q.length&&(x=new O(x,B,null,s,D),k.push({event:x,listeners:Q}))}}if((n&7)===0){e:{if(x=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",x&&s!==bu&&(B=s.relatedTarget||s.fromElement)&&(us(B)||B[os]))break e;if((O||x)&&(x=D.window===D?D:(x=D.ownerDocument)?x.defaultView||x.parentWindow:window,O?(B=s.relatedTarget||s.toElement,O=N,B=B?us(B):null,B!==null&&(Ae=f(B),Q=B.tag,B!==Ae||Q!==5&&Q!==27&&Q!==6)&&(B=null)):(O=null,B=N),O!==B)){if(Q=Hd,I="onMouseLeave",w="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(Q=Bd,I="onPointerLeave",w="onPointerEnter",E="pointer"),Ae=O==null?x:Ea(O),A=B==null?x:Ea(B),x=new Q(I,E+"leave",O,s,D),x.target=Ae,x.relatedTarget=A,I=null,us(D)===N&&(Q=new Q(w,E+"enter",B,s,D),Q.target=A,Q.relatedTarget=Ae,I=Q),Ae=I,O&&B)t:{for(Q=MS,w=O,E=B,A=0,I=w;I;I=Q(I))A++;I=0;for(var P=E;P;P=Q(P))I++;for(;0<A-I;)w=Q(w),A--;for(;0<I-A;)E=Q(E),I--;for(;A--;){if(w===E||E!==null&&w===E.alternate){Q=w;break t}w=Q(w),E=Q(E)}Q=null}else Q=null;O!==null&&Dg(k,x,O,Q,!1),B!==null&&Ae!==null&&Dg(k,Ae,B,Q,!0)}}e:{if(x=N?Ea(N):window,O=x.nodeName&&x.nodeName.toLowerCase(),O==="select"||O==="input"&&x.type==="file")var de=Kd;else if(Qd(x))if(Xd)de=Gb;else{de=qb;var V=Bb}else O=x.nodeName,!O||O.toLowerCase()!=="input"||x.type!=="checkbox"&&x.type!=="radio"?N&&vu(N.elementType)&&(de=Kd):de=Vb;if(de&&(de=de(e,N))){Fd(k,de,s,D);break e}V&&V(e,x,N),e==="focusout"&&N&&x.type==="number"&&N.memoizedProps.value!=null&&yu(x,"number",x.value)}switch(V=N?Ea(N):window,e){case"focusin":(Qd(V)||V.contentEditable==="true")&&(ys=V,Iu=N,Da=null);break;case"focusout":Da=Iu=ys=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,im(k,s,D);break;case"selectionchange":if(Yb)break;case"keydown":case"keyup":im(k,s,D)}var ne;if(Ru)e:{switch(e){case"compositionstart":var ce="onCompositionStart";break e;case"compositionend":ce="onCompositionEnd";break e;case"compositionupdate":ce="onCompositionUpdate";break e}ce=void 0}else _s?Pd(e,s)&&(ce="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ce="onCompositionStart");ce&&(qd&&s.locale!=="ko"&&(_s||ce!=="onCompositionStart"?ce==="onCompositionEnd"&&_s&&(ne=Ud()):(Yn=D,Cu="value"in Yn?Yn.value:Yn.textContent,_s=!0)),V=Xr(N,ce),0<V.length&&(ce=new jd(ce,e,null,s,D),k.push({event:ce,listeners:V}),ne?ce.data=ne:(ne=Yd(s),ne!==null&&(ce.data=ne)))),(ne=Lb?Ub(e,s):zb(e,s))&&(ce=Xr(N,"onBeforeInput"),0<ce.length&&(V=new jd("onBeforeInput","beforeinput",null,s,D),k.push({event:V,listeners:ce}),V.data=ne)),xS(k,e,N,s,D)}Rg(k,n)})}function nl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Xr(e,n){for(var s=n+"Capture",r=[];e!==null;){var u=e,c=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||c===null||(u=Ta(e,s),u!=null&&r.unshift(nl(e,u,c)),u=Ta(e,n),u!=null&&r.push(nl(e,u,c))),e.tag===3)return r;e=e.return}return[]}function MS(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dg(e,n,s,r,u){for(var c=n._reactName,d=[];s!==null&&s!==r;){var _=s,v=_.alternate,N=_.stateNode;if(_=_.tag,v!==null&&v===r)break;_!==5&&_!==26&&_!==27||N===null||(v=N,u?(N=Ta(s,c),N!=null&&d.unshift(nl(s,N,v))):u||(N=Ta(s,c),N!=null&&d.push(nl(s,N,v)))),s=s.return}d.length!==0&&e.push({event:n,listeners:d})}var IS=/\r\n?/g,kS=/\u0000|\uFFFD/g;function Mg(e){return(typeof e=="string"?e:""+e).replace(IS,`
`).replace(kS,"")}function Ig(e,n){return n=Mg(n),Mg(e)===n}function we(e,n,s,r,u,c){switch(s){case"children":typeof r=="string"?n==="body"||n==="textarea"&&r===""||ms(e,r):(typeof r=="number"||typeof r=="bigint")&&n!=="body"&&ms(e,""+r);break;case"className":$l(e,"class",r);break;case"tabIndex":$l(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":$l(e,s,r);break;case"style":Id(e,r,c);break;case"data":if(n!=="object"){$l(e,"data",r);break}case"src":case"href":if(r===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(s);break}r=tr(""+r),e.setAttribute(s,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(s==="formAction"?(n!=="input"&&we(e,n,"name",u.name,u,null),we(e,n,"formEncType",u.formEncType,u,null),we(e,n,"formMethod",u.formMethod,u,null),we(e,n,"formTarget",u.formTarget,u,null)):(we(e,n,"encType",u.encType,u,null),we(e,n,"method",u.method,u,null),we(e,n,"target",u.target,u,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(s);break}r=tr(""+r),e.setAttribute(s,r);break;case"onClick":r!=null&&(e.onclick=gn);break;case"onScroll":r!=null&&re("scroll",e);break;case"onScrollEnd":r!=null&&re("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(s=r.__html,s!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}s=tr(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,""+r):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":r===!0?e.setAttribute(s,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(s,r):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(s,r):e.removeAttribute(s);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(s):e.setAttribute(s,r);break;case"popover":re("beforetoggle",e),re("toggle",e),Jl(e,"popover",r);break;case"xlinkActuate":pn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":pn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":pn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":pn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":pn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":pn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":pn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":pn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":pn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Jl(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ob.get(s)||s,Jl(e,s,r))}}function lf(e,n,s,r,u,c){switch(s){case"style":Id(e,r,c);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(l(61));if(s=r.__html,s!=null){if(u.children!=null)throw Error(l(60));e.innerHTML=s}}break;case"children":typeof r=="string"?ms(e,r):(typeof r=="number"||typeof r=="bigint")&&ms(e,""+r);break;case"onScroll":r!=null&&re("scroll",e);break;case"onScrollEnd":r!=null&&re("scrollend",e);break;case"onClick":r!=null&&(e.onclick=gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cd.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(u=s.endsWith("Capture"),n=s.slice(2,u?s.length-7:void 0),c=e[yt]||null,c=c!=null?c[s]:null,typeof c=="function"&&e.removeEventListener(n,c,u),typeof r=="function")){typeof c!="function"&&c!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,r,u);break e}s in e?e[s]=r:r===!0?e.setAttribute(s,""):Jl(e,s,r)}}}function lt(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":re("error",e),re("load",e);var r=!1,u=!1,c;for(c in s)if(s.hasOwnProperty(c)){var d=s[c];if(d!=null)switch(c){case"src":r=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:we(e,n,c,d,s,null)}}u&&we(e,n,"srcSet",s.srcSet,s,null),r&&we(e,n,"src",s.src,s,null);return;case"input":re("invalid",e);var _=c=d=u=null,v=null,N=null;for(r in s)if(s.hasOwnProperty(r)){var D=s[r];if(D!=null)switch(r){case"name":u=D;break;case"type":d=D;break;case"checked":v=D;break;case"defaultChecked":N=D;break;case"value":c=D;break;case"defaultValue":_=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(l(137,n));break;default:we(e,n,r,D,s,null)}}Rd(e,c,_,v,N,d,u,!1);return;case"select":re("invalid",e),r=d=c=null;for(u in s)if(s.hasOwnProperty(u)&&(_=s[u],_!=null))switch(u){case"value":c=_;break;case"defaultValue":d=_;break;case"multiple":r=_;default:we(e,n,u,_,s,null)}n=c,s=d,e.multiple=!!r,n!=null?ds(e,!!r,n,!1):s!=null&&ds(e,!!r,s,!0);return;case"textarea":re("invalid",e),c=u=r=null;for(d in s)if(s.hasOwnProperty(d)&&(_=s[d],_!=null))switch(d){case"value":r=_;break;case"defaultValue":u=_;break;case"children":c=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(l(91));break;default:we(e,n,d,_,s,null)}Dd(e,r,u,c);return;case"option":for(v in s)if(s.hasOwnProperty(v)&&(r=s[v],r!=null))switch(v){case"selected":e.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:we(e,n,v,r,s,null)}return;case"dialog":re("beforetoggle",e),re("toggle",e),re("cancel",e),re("close",e);break;case"iframe":case"object":re("load",e);break;case"video":case"audio":for(r=0;r<tl.length;r++)re(tl[r],e);break;case"image":re("error",e),re("load",e);break;case"details":re("toggle",e);break;case"embed":case"source":case"link":re("error",e),re("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in s)if(s.hasOwnProperty(N)&&(r=s[N],r!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:we(e,n,N,r,s,null)}return;default:if(vu(n)){for(D in s)s.hasOwnProperty(D)&&(r=s[D],r!==void 0&&lf(e,n,D,r,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(r=s[_],r!=null&&we(e,n,_,r,s,null))}function LS(e,n,s,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,c=null,d=null,_=null,v=null,N=null,D=null;for(O in s){var k=s[O];if(s.hasOwnProperty(O)&&k!=null)switch(O){case"checked":break;case"value":break;case"defaultValue":v=k;default:r.hasOwnProperty(O)||we(e,n,O,null,r,k)}}for(var x in r){var O=r[x];if(k=s[x],r.hasOwnProperty(x)&&(O!=null||k!=null))switch(x){case"type":c=O;break;case"name":u=O;break;case"checked":N=O;break;case"defaultChecked":D=O;break;case"value":d=O;break;case"defaultValue":_=O;break;case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(l(137,n));break;default:O!==k&&we(e,n,x,O,r,k)}}_u(e,d,_,v,N,D,c,u);return;case"select":O=d=_=x=null;for(c in s)if(v=s[c],s.hasOwnProperty(c)&&v!=null)switch(c){case"value":break;case"multiple":O=v;default:r.hasOwnProperty(c)||we(e,n,c,null,r,v)}for(u in r)if(c=r[u],v=s[u],r.hasOwnProperty(u)&&(c!=null||v!=null))switch(u){case"value":x=c;break;case"defaultValue":_=c;break;case"multiple":d=c;default:c!==v&&we(e,n,u,c,r,v)}n=_,s=d,r=O,x!=null?ds(e,!!s,x,!1):!!r!=!!s&&(n!=null?ds(e,!!s,n,!0):ds(e,!!s,s?[]:"",!1));return;case"textarea":O=x=null;for(_ in s)if(u=s[_],s.hasOwnProperty(_)&&u!=null&&!r.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:we(e,n,_,null,r,u)}for(d in r)if(u=r[d],c=s[d],r.hasOwnProperty(d)&&(u!=null||c!=null))switch(d){case"value":x=u;break;case"defaultValue":O=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(l(91));break;default:u!==c&&we(e,n,d,u,r,c)}Od(e,x,O);return;case"option":for(var B in s)if(x=s[B],s.hasOwnProperty(B)&&x!=null&&!r.hasOwnProperty(B))switch(B){case"selected":e.selected=!1;break;default:we(e,n,B,null,r,x)}for(v in r)if(x=r[v],O=s[v],r.hasOwnProperty(v)&&x!==O&&(x!=null||O!=null))switch(v){case"selected":e.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:we(e,n,v,x,r,O)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Q in s)x=s[Q],s.hasOwnProperty(Q)&&x!=null&&!r.hasOwnProperty(Q)&&we(e,n,Q,null,r,x);for(N in r)if(x=r[N],O=s[N],r.hasOwnProperty(N)&&x!==O&&(x!=null||O!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(x!=null)throw Error(l(137,n));break;default:we(e,n,N,x,r,O)}return;default:if(vu(n)){for(var Ae in s)x=s[Ae],s.hasOwnProperty(Ae)&&x!==void 0&&!r.hasOwnProperty(Ae)&&lf(e,n,Ae,void 0,r,x);for(D in r)x=r[D],O=s[D],!r.hasOwnProperty(D)||x===O||x===void 0&&O===void 0||lf(e,n,D,x,r,O);return}}for(var w in s)x=s[w],s.hasOwnProperty(w)&&x!=null&&!r.hasOwnProperty(w)&&we(e,n,w,null,r,x);for(k in r)x=r[k],O=s[k],!r.hasOwnProperty(k)||x===O||x==null&&O==null||we(e,n,k,x,r,O)}function kg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function US(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),r=0;r<s.length;r++){var u=s[r],c=u.transferSize,d=u.initiatorType,_=u.duration;if(c&&_&&kg(d)){for(d=0,_=u.responseEnd,r+=1;r<s.length;r++){var v=s[r],N=v.startTime;if(N>_)break;var D=v.transferSize,k=v.initiatorType;D&&kg(k)&&(v=v.responseEnd,d+=D*(v<_?1:(_-N)/(v-N)))}if(--r,n+=8*(c+d)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var rf=null,of=null;function Zr(e){return e.nodeType===9?e:e.ownerDocument}function Lg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ug(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function uf(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var cf=null;function zS(){var e=window.event;return e&&e.type==="popstate"?e===cf?!1:(cf=e,!0):(cf=null,!1)}var zg=typeof setTimeout=="function"?setTimeout:void 0,HS=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(e){return Hg.resolve(null).then(e).catch(BS)}:zg;function BS(e){setTimeout(function(){throw e})}function oi(e){return e==="head"}function jg(e,n){var s=n,r=0;do{var u=s.nextSibling;if(e.removeChild(s),u&&u.nodeType===8)if(s=u.data,s==="/$"||s==="/&"){if(r===0){e.removeChild(u),Ys(n);return}r--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")r++;else if(s==="html")il(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,il(s);for(var c=s.firstChild;c;){var d=c.nextSibling,_=c.nodeName;c[Sa]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&c.rel.toLowerCase()==="stylesheet"||s.removeChild(c),c=d}}else s==="body"&&il(e.ownerDocument.body);s=u}while(s);Ys(n)}function Bg(e,n){var s=e;e=0;do{var r=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=r}while(s)}function ff(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ff(s),pu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function qS(e,n,s,r){for(;e.nodeType===1;){var u=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Sa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var c=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=Yt(e.nextSibling),e===null)break}return null}function VS(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Yt(e.nextSibling),e===null))return null;return e}function qg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Yt(e.nextSibling),e===null))return null;return e}function hf(e){return e.data==="$?"||e.data==="$~"}function df(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function GS(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var r=function(){n(),s.removeEventListener("DOMContentLoaded",r)};s.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Yt(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var mf=null;function Vg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Yt(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function Gg(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function Pg(e,n,s){switch(n=Zr(s),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function il(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);pu(e)}var Qt=new Map,Yg=new Set;function Wr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Mn=H.d;H.d={f:PS,r:YS,D:QS,C:FS,L:KS,m:XS,X:WS,S:ZS,M:JS};function PS(){var e=Mn.f(),n=Vr();return e||n}function YS(e){var n=cs(e);n!==null&&n.tag===5&&n.type==="form"?op(n):Mn.r(e)}var Vs=typeof document>"u"?null:document;function Qg(e,n,s){var r=Vs;if(r&&typeof n=="string"&&n){var u=Ht(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof s=="string"&&(u+='[crossorigin="'+s+'"]'),Yg.has(u)||(Yg.add(u),e={rel:e,crossOrigin:s,href:n},r.querySelector(u)===null&&(n=r.createElement("link"),lt(n,"link",e),Je(n),r.head.appendChild(n)))}}function QS(e){Mn.D(e),Qg("dns-prefetch",e,null)}function FS(e,n){Mn.C(e,n),Qg("preconnect",e,n)}function KS(e,n,s){Mn.L(e,n,s);var r=Vs;if(r&&e&&n){var u='link[rel="preload"][as="'+Ht(n)+'"]';n==="image"&&s&&s.imageSrcSet?(u+='[imagesrcset="'+Ht(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(u+='[imagesizes="'+Ht(s.imageSizes)+'"]')):u+='[href="'+Ht(e)+'"]';var c=u;switch(n){case"style":c=Gs(e);break;case"script":c=Ps(e)}Qt.has(c)||(e=y({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Qt.set(c,e),r.querySelector(u)!==null||n==="style"&&r.querySelector(sl(c))||n==="script"&&r.querySelector(al(c))||(n=r.createElement("link"),lt(n,"link",e),Je(n),r.head.appendChild(n)))}}function XS(e,n){Mn.m(e,n);var s=Vs;if(s&&e){var r=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+Ht(r)+'"][href="'+Ht(e)+'"]',c=u;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Ps(e)}if(!Qt.has(c)&&(e=y({rel:"modulepreload",href:e},n),Qt.set(c,e),s.querySelector(u)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(al(c)))return}r=s.createElement("link"),lt(r,"link",e),Je(r),s.head.appendChild(r)}}}function ZS(e,n,s){Mn.S(e,n,s);var r=Vs;if(r&&e){var u=fs(r).hoistableStyles,c=Gs(e);n=n||"default";var d=u.get(c);if(!d){var _={loading:0,preload:null};if(d=r.querySelector(sl(c)))_.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Qt.get(c))&&pf(e,s);var v=d=r.createElement("link");Je(v),lt(v,"link",e),v._p=new Promise(function(N,D){v.onload=N,v.onerror=D}),v.addEventListener("load",function(){_.loading|=1}),v.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Jr(d,n,r)}d={type:"stylesheet",instance:d,count:1,state:_},u.set(c,d)}}}function WS(e,n){Mn.X(e,n);var s=Vs;if(s&&e){var r=fs(s).hoistableScripts,u=Ps(e),c=r.get(u);c||(c=s.querySelector(al(u)),c||(e=y({src:e,async:!0},n),(n=Qt.get(u))&&gf(e,n),c=s.createElement("script"),Je(c),lt(c,"link",e),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},r.set(u,c))}}function JS(e,n){Mn.M(e,n);var s=Vs;if(s&&e){var r=fs(s).hoistableScripts,u=Ps(e),c=r.get(u);c||(c=s.querySelector(al(u)),c||(e=y({src:e,async:!0,type:"module"},n),(n=Qt.get(u))&&gf(e,n),c=s.createElement("script"),Je(c),lt(c,"link",e),s.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},r.set(u,c))}}function Fg(e,n,s,r){var u=(u=ae.current)?Wr(u):null;if(!u)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Gs(s.href),s=fs(u).hoistableStyles,r=s.get(n),r||(r={type:"style",instance:null,count:0,state:null},s.set(n,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Gs(s.href);var c=fs(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(sl(e)))&&!c._p&&(d.instance=c,d.state.loading=5),Qt.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Qt.set(e,s),c||$S(u,e,s,d.state))),n&&r===null)throw Error(l(528,""));return d}if(n&&r!==null)throw Error(l(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ps(s),s=fs(u).hoistableScripts,r=s.get(n),r||(r={type:"script",instance:null,count:0,state:null},s.set(n,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function Gs(e){return'href="'+Ht(e)+'"'}function sl(e){return'link[rel="stylesheet"]['+e+"]"}function Kg(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function $S(e,n,s,r){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?r.loading=1:(n=e.createElement("link"),r.preload=n,n.addEventListener("load",function(){return r.loading|=1}),n.addEventListener("error",function(){return r.loading|=2}),lt(n,"link",s),Je(n),e.head.appendChild(n))}function Ps(e){return'[src="'+Ht(e)+'"]'}function al(e){return"script[async]"+e}function Xg(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var r=e.querySelector('style[data-href~="'+Ht(s.href)+'"]');if(r)return n.instance=r,Je(r),r;var u=y({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),Je(r),lt(r,"style",u),Jr(r,s.precedence,e),n.instance=r;case"stylesheet":u=Gs(s.href);var c=e.querySelector(sl(u));if(c)return n.state.loading|=4,n.instance=c,Je(c),c;r=Kg(s),(u=Qt.get(u))&&pf(r,u),c=(e.ownerDocument||e).createElement("link"),Je(c);var d=c;return d._p=new Promise(function(_,v){d.onload=_,d.onerror=v}),lt(c,"link",r),n.state.loading|=4,Jr(c,s.precedence,e),n.instance=c;case"script":return c=Ps(s.src),(u=e.querySelector(al(c)))?(n.instance=u,Je(u),u):(r=s,(u=Qt.get(c))&&(r=y({},s),gf(r,u)),e=e.ownerDocument||e,u=e.createElement("script"),Je(u),lt(u,"link",r),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(r=n.instance,n.state.loading|=4,Jr(r,s.precedence,e));return n.instance}function Jr(e,n,s){for(var r=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=r.length?r[r.length-1]:null,c=u,d=0;d<r.length;d++){var _=r[d];if(_.dataset.precedence===n)c=_;else if(c!==u)break}c?c.parentNode.insertBefore(e,c.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function pf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function gf(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var $r=null;function Zg(e,n,s){if($r===null){var r=new Map,u=$r=new Map;u.set(s,r)}else u=$r,r=u.get(s),r||(r=new Map,u.set(s,r));if(r.has(e))return r;for(r.set(e,null),s=s.getElementsByTagName(e),u=0;u<s.length;u++){var c=s[u];if(!(c[Sa]||c[nt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var d=c.getAttribute(n)||"";d=e+d;var _=r.get(d);_?_.push(c):r.set(d,[c])}}return r}function Wg(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function eE(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function tE(e,n,s,r){if(s.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var u=Gs(r.href),c=n.querySelector(sl(u));if(c){n=c._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=eo.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=c,Je(c);return}c=n.ownerDocument||n,r=Kg(r),(u=Qt.get(u))&&pf(r,u),c=c.createElement("link"),Je(c);var d=c;d._p=new Promise(function(_,v){d.onload=_,d.onerror=v}),lt(c,"link",r),s.instance=c}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=eo.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var _f=0;function nE(e,n){return e.stylesheets&&e.count===0&&no(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var r=setTimeout(function(){if(e.stylesheets&&no(e,e.stylesheets),e.unsuspend){var c=e.unsuspend;e.unsuspend=null,c()}},6e4+n);0<e.imgBytes&&_f===0&&(_f=62500*US());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&no(e,e.stylesheets),e.unsuspend)){var c=e.unsuspend;e.unsuspend=null,c()}},(e.imgBytes>_f?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(u)}}:null}function eo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)no(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var to=null;function no(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,to=new Map,n.forEach(iE,e),to=null,eo.call(e))}function iE(e,n){if(!(n.state.loading&4)){var s=to.get(e);if(s)var r=s.get(null);else{s=new Map,to.set(e,s);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<u.length;c++){var d=u[c];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(s.set(d.dataset.precedence,d),r=d)}r&&s.set(null,r)}u=n.instance,d=u.getAttribute("data-precedence"),c=s.get(d)||r,c===r&&s.set(null,u),s.set(d,u),this.count++,r=eo.bind(this),u.addEventListener("load",r),u.addEventListener("error",r),c?c.parentNode.insertBefore(u,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var ll={$$typeof:Z,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function sE(e,n,s,r,u,c,d,_,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fu(0),this.hiddenUpdates=fu(null),this.identifierPrefix=r,this.onUncaughtError=u,this.onCaughtError=c,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function $g(e,n,s,r,u,c,d,_,v,N,D,k){return e=new sE(e,n,s,d,v,N,D,k,_),n=1,c===!0&&(n|=24),c=Dt(3,null,null,n),e.current=c,c.stateNode=e,n=Xu(),n.refCount++,e.pooledCache=n,n.refCount++,c.memoizedState={element:r,isDehydrated:s,cache:n},$u(c),e}function e_(e){return e?(e=Ss,e):Ss}function t_(e,n,s,r,u,c){u=e_(u),r.context===null?r.context=u:r.pendingContext=u,r=Wn(n),r.payload={element:s},c=c===void 0?null:c,c!==null&&(r.callback=c),s=Jn(e,r,n),s!==null&&(Ct(s,e,n),Ha(s,e,n))}function n_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function yf(e,n){n_(e,n),(e=e.alternate)&&n_(e,n)}function i_(e){if(e.tag===13||e.tag===31){var n=Ui(e,67108864);n!==null&&Ct(n,e,67108864),yf(e,67108864)}}function s_(e){if(e.tag===13||e.tag===31){var n=Ut();n=hu(n);var s=Ui(e,n);s!==null&&Ct(s,e,n),yf(e,n)}}var io=!0;function aE(e,n,s,r){var u=M.T;M.T=null;var c=H.p;try{H.p=2,vf(e,n,s,r)}finally{H.p=c,M.T=u}}function lE(e,n,s,r){var u=M.T;M.T=null;var c=H.p;try{H.p=8,vf(e,n,s,r)}finally{H.p=c,M.T=u}}function vf(e,n,s,r){if(io){var u=bf(r);if(u===null)af(e,n,r,so,s),l_(e,r);else if(oE(u,e,n,s,r))r.stopPropagation();else if(l_(e,r),n&4&&-1<rE.indexOf(e)){for(;u!==null;){var c=cs(u);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var d=Di(c.pendingLanes);if(d!==0){var _=c;for(_.pendingLanes|=2,_.entangledLanes|=2;d;){var v=1<<31-Rt(d);_.entanglements[1]|=v,d&=~v}cn(c),(ve&6)===0&&(Br=Nt()+500,el(0))}}break;case 31:case 13:_=Ui(c,2),_!==null&&Ct(_,c,2),Vr(),yf(c,2)}if(c=bf(r),c===null&&af(e,n,r,so,s),c===u)break;u=c}u!==null&&r.stopPropagation()}else af(e,n,r,null,s)}}function bf(e){return e=Su(e),Sf(e)}var so=null;function Sf(e){if(so=null,e=us(e),e!==null){var n=f(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=h(n),e!==null)return e;e=null}else if(s===31){if(e=m(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return so=e,null}function a_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Q0()){case dd:return 2;case md:return 8;case Fl:case F0:return 32;case pd:return 268435456;default:return 32}default:return 32}}var Ef=!1,ui=null,ci=null,fi=null,rl=new Map,ol=new Map,hi=[],rE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l_(e,n){switch(e){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":rl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(n.pointerId)}}function ul(e,n,s,r,u,c){return e===null||e.nativeEvent!==c?(e={blockedOn:n,domEventName:s,eventSystemFlags:r,nativeEvent:c,targetContainers:[u]},n!==null&&(n=cs(n),n!==null&&i_(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function oE(e,n,s,r,u){switch(n){case"focusin":return ui=ul(ui,e,n,s,r,u),!0;case"dragenter":return ci=ul(ci,e,n,s,r,u),!0;case"mouseover":return fi=ul(fi,e,n,s,r,u),!0;case"pointerover":var c=u.pointerId;return rl.set(c,ul(rl.get(c)||null,e,n,s,r,u)),!0;case"gotpointercapture":return c=u.pointerId,ol.set(c,ul(ol.get(c)||null,e,n,s,r,u)),!0}return!1}function r_(e){var n=us(e.target);if(n!==null){var s=f(n);if(s!==null){if(n=s.tag,n===13){if(n=h(s),n!==null){e.blockedOn=n,Sd(e.priority,function(){s_(s)});return}}else if(n===31){if(n=m(s),n!==null){e.blockedOn=n,Sd(e.priority,function(){s_(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ao(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=bf(e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);bu=r,s.target.dispatchEvent(r),bu=null}else return n=cs(s),n!==null&&i_(n),e.blockedOn=s,!1;n.shift()}return!0}function o_(e,n,s){ao(e)&&s.delete(n)}function uE(){Ef=!1,ui!==null&&ao(ui)&&(ui=null),ci!==null&&ao(ci)&&(ci=null),fi!==null&&ao(fi)&&(fi=null),rl.forEach(o_),ol.forEach(o_)}function lo(e,n){e.blockedOn===n&&(e.blockedOn=null,Ef||(Ef=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,uE)))}var ro=null;function u_(e){ro!==e&&(ro=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ro===e&&(ro=null);for(var n=0;n<e.length;n+=3){var s=e[n],r=e[n+1],u=e[n+2];if(typeof r!="function"){if(Sf(r||s)===null)continue;break}var c=cs(s);c!==null&&(e.splice(n,3),n-=3,vc(c,{pending:!0,data:u,method:s.method,action:r},r,u))}}))}function Ys(e){function n(v){return lo(v,e)}ui!==null&&lo(ui,e),ci!==null&&lo(ci,e),fi!==null&&lo(fi,e),rl.forEach(n),ol.forEach(n);for(var s=0;s<hi.length;s++){var r=hi[s];r.blockedOn===e&&(r.blockedOn=null)}for(;0<hi.length&&(s=hi[0],s.blockedOn===null);)r_(s),s.blockedOn===null&&hi.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(r=0;r<s.length;r+=3){var u=s[r],c=s[r+1],d=u[yt]||null;if(typeof c=="function")d||u_(s);else if(d){var _=null;if(c&&c.hasAttribute("formAction")){if(u=c,d=c[yt]||null)_=d.formAction;else if(Sf(u)!==null)continue}else _=d.action;typeof _=="function"?s[r+1]=_:(s.splice(r,3),r-=3),u_(s)}}}function c_(){function e(c){c.canIntercept&&c.info==="react-transition"&&c.intercept({handler:function(){return new Promise(function(d){return u=d})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),r||setTimeout(s,20)}function s(){if(!r&&!navigation.transition){var c=navigation.currentEntry;c&&c.url!=null&&navigation.navigate(c.url,{state:c.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function Tf(e){this._internalRoot=e}oo.prototype.render=Tf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var s=n.current,r=Ut();t_(s,r,e,n,null,null)},oo.prototype.unmount=Tf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;t_(e.current,2,null,e,null,null),Vr(),n[os]=null}};function oo(e){this._internalRoot=e}oo.prototype.unstable_scheduleHydration=function(e){if(e){var n=bd();e={blockedOn:null,target:e,priority:n};for(var s=0;s<hi.length&&n!==0&&n<hi[s].priority;s++);hi.splice(s,0,e),s===0&&r_(e)}};var f_=t.version;if(f_!=="19.2.4")throw Error(l(527,f_,"19.2.4"));H.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=p(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var cE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uo.isDisabled&&uo.supportsFiber)try{ya=uo.inject(cE),xt=uo}catch{}}return fl.createRoot=function(e,n){if(!o(e))throw Error(l(299));var s=!1,r="",u=yp,c=vp,d=bp;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),n=$g(e,1,!1,null,null,s,r,null,u,c,d,c_),e[os]=n.current,sf(e),new Tf(n)},fl.hydrateRoot=function(e,n,s){if(!o(e))throw Error(l(299));var r=!1,u="",c=yp,d=vp,_=bp,v=null;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(c=s.onUncaughtError),s.onCaughtError!==void 0&&(d=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.formState!==void 0&&(v=s.formState)),n=$g(e,1,!0,n,s??null,r,u,v,c,d,_,c_),n.context=e_(null),s=n.current,r=Ut(),r=hu(r),u=Wn(r),u.callback=null,Jn(s,u,r),s=r,n.current.lanes=s,ba(n,s),cn(n),e[os]=n.current,sf(e),new oo(n)},fl.version="19.2.4",fl}var S_;function bE(){if(S_)return Af.exports;S_=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Af.exports=vE(),Af.exports}var SE=bE();const EE=Dy(SE),vi=({id:a,username:t,className:i=""})=>{const l=`https://robohash.org/${a}`;return C.jsx("div",{className:`shrink-0 overflow-hidden bg-slate-50 flex items-center justify-center rounded-full border-2 border-slate-100 ${i}`,children:C.jsx("img",{src:l,alt:t,className:"w-full h-full object-cover",loading:"lazy",onError:o=>{const f=o.target;f.style.display="none";const h=t.substring(0,1).toUpperCase();f.parentElement.innerHTML=`<span class="font-black text-slate-400 uppercase">${h}</span>`}})})},TE=a=>{const t=Math.floor((Date.now()-a)/1e3);if(t<60)return"Just now";const i=Math.floor(t/60);if(i<60)return`${i}m`;const l=Math.floor(i/60);if(l<24)return`${l}h`;const o=Math.floor(l/24);return o<7?`${o}d`:new Date(a).toLocaleDateString([],{month:"short",day:"numeric"})},CE=a=>btoa(unescape(encodeURIComponent(a))),wE=a=>{try{return decodeURIComponent(escape(atob(a)))}catch{return"[Encrypted Message]"}},AE=(a,t)=>{let i="";for(let l=0;l<a.length;l++){const o=a.charCodeAt(l)^t.charCodeAt(l%t.length);i+=String.fromCharCode(o)}return CE(i)},My=(a,t)=>{const i=wE(a);if(i==="[Encrypted Message]")return i;let l="";for(let o=0;o<i.length;o++){const f=i.charCodeAt(o)^t.charCodeAt(o%t.length);l+=String.fromCharCode(f)}return l},E_=({contacts:a,onChatClick:t,onDeleteChat:i,activeContactId:l,isMobile:o})=>{const[f,h]=mo.useState(null),m=mo.useRef(null),g=mo.useRef(0),p=R=>{m.current=setTimeout(()=>{h(R)},500)},b=()=>{m.current&&(clearTimeout(m.current),m.current=null)},y=R=>{const U=Date.now();U-g.current<300?h(R.id):(t(R),h(null)),g.current=U},S=R=>{if(!R.lastMessage)return R.id.substring(0,16)+"...";let U=R.lastMessage;return!U.startsWith("EMOJI:")&&!U.startsWith("STICKER:")?U=My(U,R.hashingKey):U.startsWith("EMOJI:")&&(U="Sent a sticker"),U};return C.jsxs("div",{className:`flex flex-col ${o?"p-3":"gap-2"}`,children:[!o&&C.jsxs("div",{className:"flex items-center justify-between px-3 mb-2",children:[C.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Recent Chats"}),C.jsx("span",{className:"bg-slate-200 text-slate-500 text-[9px] font-black px-2 py-0.5 rounded-none uppercase",children:a.length})]}),a.map(R=>C.jsxs("div",{className:"relative",children:[C.jsxs("button",{onMouseDown:()=>p(R.id),onMouseUp:b,onMouseLeave:b,onTouchStart:()=>p(R.id),onTouchEnd:b,onContextMenu:U=>{U.preventDefault(),h(R.id)},onClick:()=>y(R),className:`group w-full flex items-center gap-4 p-4 rounded-full transition-all relative ${l===R.id&&!o?"bg-slate-900 text-white shadow-none":"bg-white hover:bg-slate-200 text-slate-600 border-none"} ${f===R.id?"opacity-50 blur-[2px]":""}`,children:[C.jsx("div",{className:"relative shrink-0",children:C.jsx(vi,{id:R.id,username:R.username,avatar:R.avatar,className:o?"w-14 h-14":"w-11 h-11"})}),C.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[C.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[C.jsx("p",{className:`text-base font-black truncate ${l===R.id&&!o?"text-white":"text-slate-900"}`,children:R.username}),R.lastTimestamp&&C.jsx("span",{className:`text-[10px] font-black uppercase tracking-tighter shrink-0 ml-2 ${l===R.id&&!o?"text-white/50":"text-slate-400"}`,children:TE(R.lastTimestamp)})]}),C.jsx("p",{className:`text-xs font-bold truncate opacity-80 ${l===R.id&&!o?"text-white/60":"text-slate-400"}`,children:S(R)})]})]}),f===R.id&&C.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center p-2 animate-in fade-in zoom-in duration-200",children:C.jsxs("div",{className:"bg-white shadow-2xl rounded-full flex items-center gap-2 border border-slate-100 p-1",children:[C.jsx("button",{onClick:()=>{i(R.id),h(null)},className:"bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-full text-xs font-black uppercase tracking-widest transition-colors border-none",children:"Remove Chat"}),C.jsx("button",{onClick:()=>h(null),className:"bg-slate-100 hover:bg-slate-200 text-slate-500 px-6 py-2 rounded-full text-xs font-black uppercase tracking-widest transition-colors border-none",children:"Cancel"})]})})]},R.id)),a.length===0&&C.jsxs("div",{className:`py-20 text-center ${o?"px-8":"px-4"}`,children:[C.jsx("div",{className:"inline-flex w-16 h-16 bg-slate-100 items-center justify-center mb-6",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),C.jsx("p",{className:"text-sm text-slate-400 font-black leading-relaxed uppercase tracking-widest max-w-[180px] mx-auto opacity-60",children:"No contacts"})]})]})},NE=()=>{};var T_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(a,t){if(!a)throw ua(t)},ua=function(a){return new Error("Firebase Database ("+Iy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=function(a){const t=[];let i=0;for(let l=0;l<a.length;l++){let o=a.charCodeAt(l);o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):(o&64512)===55296&&l+1<a.length&&(a.charCodeAt(l+1)&64512)===56320?(o=65536+((o&1023)<<10)+(a.charCodeAt(++l)&1023),t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},xE=function(a){const t=[];let i=0,l=0;for(;i<a.length;){const o=a[i++];if(o<128)t[l++]=String.fromCharCode(o);else if(o>191&&o<224){const f=a[i++];t[l++]=String.fromCharCode((o&31)<<6|f&63)}else if(o>239&&o<365){const f=a[i++],h=a[i++],m=a[i++],g=((o&7)<<18|(f&63)<<12|(h&63)<<6|m&63)-65536;t[l++]=String.fromCharCode(55296+(g>>10)),t[l++]=String.fromCharCode(56320+(g&1023))}else{const f=a[i++],h=a[i++];t[l++]=String.fromCharCode((o&15)<<12|(f&63)<<6|h&63)}}return t.join("")},ph={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,t){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,l=[];for(let o=0;o<a.length;o+=3){const f=a[o],h=o+1<a.length,m=h?a[o+1]:0,g=o+2<a.length,p=g?a[o+2]:0,b=f>>2,y=(f&3)<<4|m>>4;let S=(m&15)<<2|p>>6,R=p&63;g||(R=64,h||(S=64)),l.push(i[b],i[y],i[S],i[R])}return l.join("")},encodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(a):this.encodeByteArray(ky(a),t)},decodeString(a,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(a):xE(this.decodeStringToByteArray(a,t))},decodeStringToByteArray(a,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,l=[];for(let o=0;o<a.length;){const f=i[a.charAt(o++)],m=o<a.length?i[a.charAt(o)]:0;++o;const p=o<a.length?i[a.charAt(o)]:64;++o;const y=o<a.length?i[a.charAt(o)]:64;if(++o,f==null||m==null||p==null||y==null)throw new RE;const S=f<<2|m>>4;if(l.push(S),p!==64){const R=m<<4&240|p>>2;if(l.push(R),y!==64){const U=p<<6&192|y;l.push(U)}}}return l},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class RE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ly=function(a){const t=ky(a);return ph.encodeByteArray(t,!0)},bo=function(a){return Ly(a).replace(/\./g,"")},So=function(a){try{return ph.decodeString(a,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(a){return Uy(void 0,a)}function Uy(a,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const i=t;return new Date(i.getTime());case Object:a===void 0&&(a={});break;case Array:a=[];break;default:return t}for(const i in t)!t.hasOwnProperty(i)||!DE(i)||(a[i]=Uy(a[i],t[i]));return a}function DE(a){return a!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=()=>ME().__FIREBASE_DEFAULTS__,kE=()=>{if(typeof process>"u"||typeof T_>"u")return;const a=T_.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},LE=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=a&&So(a[1]);return t&&JSON.parse(t)},gh=()=>{try{return NE()||IE()||kE()||LE()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},zy=a=>{var t,i;return(i=(t=gh())==null?void 0:t.emulatorHosts)==null?void 0:i[a]},UE=a=>{const t=zy(a);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const l=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),l]:[t.substring(0,i),l]},Hy=()=>{var a;return(a=gh())==null?void 0:a.config},jy=a=>{var t;return(t=gh())==null?void 0:t[`_${a}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,l)=>{i?this.reject(i):this.resolve(l),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function By(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(a,t){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},l=t||"demo-project",o=a.iat||0,f=a.sub||a.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${l}`,aud:l,iat:o,exp:o+3600,auth_time:o,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...a};return[bo(JSON.stringify(i)),bo(JSON.stringify(h)),""].join(".")}const gl={};function HE(){const a={prod:[],emulator:[]};for(const t of Object.keys(gl))gl[t]?a.emulator.push(t):a.prod.push(t);return a}function jE(a){let t=document.getElementById(a),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",a),i=!0),{created:i,element:t}}let C_=!1;function qy(a,t){if(typeof window>"u"||typeof document>"u"||!ca(window.location.host)||gl[a]===t||gl[a]||C_)return;gl[a]=t;function i(S){return`__firebase__banner__${S}`}const l="__firebase__banner",f=HE().prod.length>0;function h(){const S=document.getElementById(l);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{C_=!0,h()},S}function b(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function y(){const S=jE(l),R=i("text"),U=document.getElementById(R)||document.createElement("span"),G=i("learnmore"),fe=document.getElementById(G)||document.createElement("a"),_e=i("preprendIcon"),De=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Z=S.element;m(Z),b(fe,G);const Y=p();g(De,_e),Z.append(De,U,fe,Y),document.body.appendChild(Z)}f?(U.innerText="Preview backend disconnected.",De.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(De.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _h(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function BE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qE(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function Vy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VE(){const a=mt();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function GE(){return Iy.NODE_ADMIN===!0}function PE(){try{return typeof indexedDB=="object"}catch{return!1}}function YE(){return new Promise((a,t)=>{try{let i=!0;const l="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(l);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(l),a(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var f;t(((f=o.error)==null?void 0:f.message)||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="FirebaseError";class xi extends Error{constructor(t,i,l){super(i),this.code=t,this.customData=l,this.name=QE,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ul.prototype.create)}}class Ul{constructor(t,i,l){this.service=t,this.serviceName=i,this.errors=l}create(t,...i){const l=i[0]||{},o=`${this.service}/${t}`,f=this.errors[t],h=f?FE(f,l):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new xi(o,m,l)}}function FE(a,t){return a.replace(KE,(i,l)=>{const o=t[l];return o!=null?String(o):`<${l}?>`})}const KE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(a){return JSON.parse(a)}function We(a){return JSON.stringify(a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=function(a){let t={},i={},l={},o="";try{const f=a.split(".");t=Tl(So(f[0])||""),i=Tl(So(f[1])||""),o=f[2],l=i.d||{},delete i.d}catch{}return{header:t,claims:i,data:l,signature:o}},XE=function(a){const t=Gy(a),i=t.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},ZE=function(a){const t=Gy(a).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function ta(a,t){if(Object.prototype.hasOwnProperty.call(a,t))return a[t]}function Pf(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}function Eo(a,t,i){const l={};for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&(l[o]=t.call(i,a[o],o,a));return l}function es(a,t){if(a===t)return!0;const i=Object.keys(a),l=Object.keys(t);for(const o of i){if(!l.includes(o))return!1;const f=a[o],h=t[o];if(w_(f)&&w_(h)){if(!es(f,h))return!1}else if(f!==h)return!1}for(const o of l)if(!i.includes(o))return!1;return!0}function w_(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(a){const t=[];for(const[i,l]of Object.entries(a))Array.isArray(l)?l.forEach(o=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(l));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,i){i||(i=0);const l=this.W_;if(typeof t=="string")for(let y=0;y<16;y++)l[y]=t.charCodeAt(i)<<24|t.charCodeAt(i+1)<<16|t.charCodeAt(i+2)<<8|t.charCodeAt(i+3),i+=4;else for(let y=0;y<16;y++)l[y]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i+=4;for(let y=16;y<80;y++){const S=l[y-3]^l[y-8]^l[y-14]^l[y-16];l[y]=(S<<1|S>>>31)&4294967295}let o=this.chain_[0],f=this.chain_[1],h=this.chain_[2],m=this.chain_[3],g=this.chain_[4],p,b;for(let y=0;y<80;y++){y<40?y<20?(p=m^f&(h^m),b=1518500249):(p=f^h^m,b=1859775393):y<60?(p=f&h|m&(f|h),b=2400959708):(p=f^h^m,b=3395469782);const S=(o<<5|o>>>27)+p+g+b+l[y]&4294967295;g=m,m=h,h=(f<<30|f>>>2)&4294967295,f=o,o=S}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+f&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,i){if(t==null)return;i===void 0&&(i=t.length);const l=i-this.blockSize;let o=0;const f=this.buf_;let h=this.inbuf_;for(;o<i;){if(h===0)for(;o<=l;)this.compress_(t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<i;)if(f[h]=t.charCodeAt(o),++h,++o,h===this.blockSize){this.compress_(f),h=0;break}}else for(;o<i;)if(f[h]=t[o],++h,++o,h===this.blockSize){this.compress_(f),h=0;break}}this.inbuf_=h,this.total_+=i}digest(){const t=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=i&255,i/=256;this.compress_(this.buf_);let l=0;for(let o=0;o<5;o++)for(let f=24;f>=0;f-=8)t[l]=this.chain_[o]>>f&255,++l;return t}}function JE(a,t){const i=new $E(a,t);return i.subscribe.bind(i)}class $E{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(l=>{this.error(l)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,l){let o;if(t===void 0&&i===void 0&&l===void 0)throw new Error("Missing Observer.");e1(t,["next","error","complete"])?o=t:o={next:t,error:i,complete:l},o.next===void 0&&(o.next=Of),o.error===void 0&&(o.error=Of),o.complete===void 0&&(o.complete=Of);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),f}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(l){typeof console<"u"&&console.error&&console.error(l)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e1(a,t){if(typeof a!="object"||a===null)return!1;for(const i of t)if(i in a&&typeof a[i]=="function")return!0;return!1}function Of(){}function Go(a,t){return`${a} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=function(a){const t=[];let i=0;for(let l=0;l<a.length;l++){let o=a.charCodeAt(l);if(o>=55296&&o<=56319){const f=o-55296;l++,z(l<a.length,"Surrogate pair missing trail surrogate.");const h=a.charCodeAt(l)-56320;o=65536+(f<<10)+h}o<128?t[i++]=o:o<2048?(t[i++]=o>>6|192,t[i++]=o&63|128):o<65536?(t[i++]=o>>12|224,t[i++]=o>>6&63|128,t[i++]=o&63|128):(t[i++]=o>>18|240,t[i++]=o>>12&63|128,t[i++]=o>>6&63|128,t[i++]=o&63|128)}return t},Po=function(a){let t=0;for(let i=0;i<a.length;i++){const l=a.charCodeAt(i);l<128?t++:l<2048?t+=2:l>=55296&&l<=56319?(t+=4,i++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(a){return a&&a._delegate?a._delegate:a}class ts{constructor(t,i,l){this.name=t,this.instanceFactory=i,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const l=new Ll;if(this.instancesDeferred.set(i,l),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&l.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),l=(t==null?void 0:t.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(l)return null;throw o}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(s1(t))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[i,l]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const f=this.getOrInitializeService({instanceIdentifier:o});l.resolve(f)}catch{}}}}clearInstance(t=Xi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xi){return this.instances.has(t)}getOptions(t=Xi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,l=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:l,options:i});for(const[f,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(f);l===m&&h.resolve(o)}return o}onInit(t,i){const l=this.normalizeInstanceIdentifier(i),o=this.onInitCallbacks.get(l)??new Set;o.add(t),this.onInitCallbacks.set(l,o);const f=this.instances.get(l);return f&&t(f,l),()=>{o.delete(t)}}invokeOnInitCallbacks(t,i){const l=this.onInitCallbacks.get(i);if(l)for(const o of l)try{o(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let l=this.instances.get(t);if(!l&&this.component&&(l=this.component.instanceFactory(this.container,{instanceIdentifier:i1(t),options:i}),this.instances.set(t,l),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(l,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,l)}catch{}return l||null}normalizeInstanceIdentifier(t=Xi){return this.component?this.component.multipleInstances?t:Xi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function i1(a){return a===Xi?void 0:a}function s1(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new n1(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Ne||(Ne={}));const l1={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},r1=Ne.INFO,o1={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},u1=(a,t,...i)=>{if(t<a.logLevel)return;const l=new Date().toISOString(),o=o1[t];if(o)console[o](`[${l}]  ${a.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yh{constructor(t){this.name=t,this._logLevel=r1,this._logHandler=u1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ne))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?l1[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...t),this._logHandler(this,Ne.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...t),this._logHandler(this,Ne.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...t),this._logHandler(this,Ne.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...t),this._logHandler(this,Ne.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...t),this._logHandler(this,Ne.ERROR,...t)}}const c1=(a,t)=>t.some(i=>a instanceof i);let A_,N_;function f1(){return A_||(A_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h1(){return N_||(N_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Py=new WeakMap,Yf=new WeakMap,Yy=new WeakMap,Df=new WeakMap,vh=new WeakMap;function d1(a){const t=new Promise((i,l)=>{const o=()=>{a.removeEventListener("success",f),a.removeEventListener("error",h)},f=()=>{i(bi(a.result)),o()},h=()=>{l(a.error),o()};a.addEventListener("success",f),a.addEventListener("error",h)});return t.then(i=>{i instanceof IDBCursor&&Py.set(i,a)}).catch(()=>{}),vh.set(t,a),t}function m1(a){if(Yf.has(a))return;const t=new Promise((i,l)=>{const o=()=>{a.removeEventListener("complete",f),a.removeEventListener("error",h),a.removeEventListener("abort",h)},f=()=>{i(),o()},h=()=>{l(a.error||new DOMException("AbortError","AbortError")),o()};a.addEventListener("complete",f),a.addEventListener("error",h),a.addEventListener("abort",h)});Yf.set(a,t)}let Qf={get(a,t,i){if(a instanceof IDBTransaction){if(t==="done")return Yf.get(a);if(t==="objectStoreNames")return a.objectStoreNames||Yy.get(a);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return bi(a[t])},set(a,t,i){return a[t]=i,!0},has(a,t){return a instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in a}};function p1(a){Qf=a(Qf)}function g1(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const l=a.call(Mf(this),t,...i);return Yy.set(l,t.sort?t.sort():[t]),bi(l)}:h1().includes(a)?function(...t){return a.apply(Mf(this),t),bi(Py.get(this))}:function(...t){return bi(a.apply(Mf(this),t))}}function _1(a){return typeof a=="function"?g1(a):(a instanceof IDBTransaction&&m1(a),c1(a,f1())?new Proxy(a,Qf):a)}function bi(a){if(a instanceof IDBRequest)return d1(a);if(Df.has(a))return Df.get(a);const t=_1(a);return t!==a&&(Df.set(a,t),vh.set(t,a)),t}const Mf=a=>vh.get(a);function y1(a,t,{blocked:i,upgrade:l,blocking:o,terminated:f}={}){const h=indexedDB.open(a,t),m=bi(h);return l&&h.addEventListener("upgradeneeded",g=>{l(bi(h.result),g.oldVersion,g.newVersion,bi(h.transaction),g)}),i&&h.addEventListener("blocked",g=>i(g.oldVersion,g.newVersion,g)),m.then(g=>{f&&g.addEventListener("close",()=>f()),o&&g.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const v1=["get","getKey","getAll","getAllKeys","count"],b1=["put","add","delete","clear"],If=new Map;function x_(a,t){if(!(a instanceof IDBDatabase&&!(t in a)&&typeof t=="string"))return;if(If.get(t))return If.get(t);const i=t.replace(/FromIndex$/,""),l=t!==i,o=b1.includes(i);if(!(i in(l?IDBIndex:IDBObjectStore).prototype)||!(o||v1.includes(i)))return;const f=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let p=g.store;return l&&(p=p.index(m.shift())),(await Promise.all([p[i](...m),o&&g.done]))[0]};return If.set(t,f),f}p1(a=>({...a,get:(t,i,l)=>x_(t,i)||a.get(t,i,l),has:(t,i)=>!!x_(t,i)||a.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(E1(i)){const l=i.getImmediate();return`${l.library}/${l.version}`}else return null}).filter(i=>i).join(" ")}}function E1(a){const t=a.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ff="@firebase/app",R_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new yh("@firebase/app"),T1="@firebase/app-compat",C1="@firebase/analytics-compat",w1="@firebase/analytics",A1="@firebase/app-check-compat",N1="@firebase/app-check",x1="@firebase/auth",R1="@firebase/auth-compat",O1="@firebase/database",D1="@firebase/data-connect",M1="@firebase/database-compat",I1="@firebase/functions",k1="@firebase/functions-compat",L1="@firebase/installations",U1="@firebase/installations-compat",z1="@firebase/messaging",H1="@firebase/messaging-compat",j1="@firebase/performance",B1="@firebase/performance-compat",q1="@firebase/remote-config",V1="@firebase/remote-config-compat",G1="@firebase/storage",P1="@firebase/storage-compat",Y1="@firebase/firestore",Q1="@firebase/ai",F1="@firebase/firestore-compat",K1="firebase",X1="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="[DEFAULT]",Z1={[Ff]:"fire-core",[T1]:"fire-core-compat",[w1]:"fire-analytics",[C1]:"fire-analytics-compat",[N1]:"fire-app-check",[A1]:"fire-app-check-compat",[x1]:"fire-auth",[R1]:"fire-auth-compat",[O1]:"fire-rtdb",[D1]:"fire-data-connect",[M1]:"fire-rtdb-compat",[I1]:"fire-fn",[k1]:"fire-fn-compat",[L1]:"fire-iid",[U1]:"fire-iid-compat",[z1]:"fire-fcm",[H1]:"fire-fcm-compat",[j1]:"fire-perf",[B1]:"fire-perf-compat",[q1]:"fire-rc",[V1]:"fire-rc-compat",[G1]:"fire-gcs",[P1]:"fire-gcs-compat",[Y1]:"fire-fst",[F1]:"fire-fst-compat",[Q1]:"fire-vertex","fire-js":"fire-js",[K1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new Map,W1=new Map,Xf=new Map;function O_(a,t){try{a.container.addComponent(t)}catch(i){Hn.debug(`Component ${t.name} failed to register with FirebaseApp ${a.name}`,i)}}function na(a){const t=a.name;if(Xf.has(t))return Hn.debug(`There were multiple attempts to register component ${t}.`),!1;Xf.set(t,a);for(const i of To.values())O_(i,a);for(const i of W1.values())O_(i,a);return!0}function bh(a,t){const i=a.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),a.container.getProvider(t)}function en(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Ul("app","Firebase",J1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t,i,l){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=l,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=X1;function Qy(a,t={}){let i=a;typeof t!="object"&&(t={name:t});const l={name:Kf,automaticDataCollectionEnabled:!0,...t},o=l.name;if(typeof o!="string"||!o)throw Si.create("bad-app-name",{appName:String(o)});if(i||(i=Hy()),!i)throw Si.create("no-options");const f=To.get(o);if(f){if(es(i,f.options)&&es(l,f.config))return f;throw Si.create("duplicate-app",{appName:o})}const h=new a1(o);for(const g of Xf.values())h.addComponent(g);const m=new $1(i,l,h);return To.set(o,m),m}function Fy(a=Kf){const t=To.get(a);if(!t&&a===Kf&&Hy())return Qy();if(!t)throw Si.create("no-app",{appName:a});return t}function Ei(a,t,i){let l=Z1[a]??a;i&&(l+=`-${i}`);const o=l.match(/\s|\//),f=t.match(/\s|\//);if(o||f){const h=[`Unable to register library "${l}" with version "${t}":`];o&&h.push(`library name "${l}" contains illegal characters (whitespace or "/")`),o&&f&&h.push("and"),f&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hn.warn(h.join(" "));return}na(new ts(`${l}-version`,()=>({library:l,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="firebase-heartbeat-database",tT=1,Cl="firebase-heartbeat-store";let kf=null;function Ky(){return kf||(kf=y1(eT,tT,{upgrade:(a,t)=>{switch(t){case 0:try{a.createObjectStore(Cl)}catch(i){console.warn(i)}}}}).catch(a=>{throw Si.create("idb-open",{originalErrorMessage:a.message})})),kf}async function nT(a){try{const i=(await Ky()).transaction(Cl),l=await i.objectStore(Cl).get(Xy(a));return await i.done,l}catch(t){if(t instanceof xi)Hn.warn(t.message);else{const i=Si.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Hn.warn(i.message)}}}async function D_(a,t){try{const l=(await Ky()).transaction(Cl,"readwrite");await l.objectStore(Cl).put(t,Xy(a)),await l.done}catch(i){if(i instanceof xi)Hn.warn(i.message);else{const l=Si.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Hn.warn(l.message)}}}function Xy(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=1024,sT=30;class aT{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new rT(i),this._heartbeatsCachePromise=this._storage.read().then(l=>(this._heartbeatsCache=l,l))}async triggerHeartbeat(){var t,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),f=M_();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===f||this._heartbeatsCache.heartbeats.some(h=>h.date===f))return;if(this._heartbeatsCache.heartbeats.push({date:f,agent:o}),this._heartbeatsCache.heartbeats.length>sT){const h=oT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(l){Hn.warn(l)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=M_(),{heartbeatsToSend:l,unsentEntries:o}=lT(this._heartbeatsCache.heartbeats),f=bo(JSON.stringify({version:2,heartbeats:l}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}catch(i){return Hn.warn(i),""}}}function M_(){return new Date().toISOString().substring(0,10)}function lT(a,t=iT){const i=[];let l=a.slice();for(const o of a){const f=i.find(h=>h.agent===o.agent);if(f){if(f.dates.push(o.date),I_(i)>t){f.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),I_(i)>t){i.pop();break}l=l.slice(1)}return{heartbeatsToSend:i,unsentEntries:l}}class rT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PE()?YE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await nT(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const l=await this.read();return D_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??l.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const l=await this.read();return D_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...t.heartbeats]})}else return}}function I_(a){return bo(JSON.stringify({version:2,heartbeats:a})).length}function oT(a){if(a.length===0)return-1;let t=0,i=a[0].date;for(let l=1;l<a.length;l++)a[l].date<i&&(i=a[l].date,t=l);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(a){na(new ts("platform-logger",t=>new S1(t),"PRIVATE")),na(new ts("heartbeat",t=>new aT(t),"PRIVATE")),Ei(Ff,R_,a),Ei(Ff,R_,"esm2020"),Ei("fire-js","")}uT("");var cT="firebase",fT="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(cT,fT,"app");function Zy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hT=Zy,Wy=new Ul("auth","Firebase",Zy());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new yh("@firebase/auth");function dT(a,...t){Co.logLevel<=Ne.WARN&&Co.warn(`Auth (${ha}): ${a}`,...t)}function po(a,...t){Co.logLevel<=Ne.ERROR&&Co.error(`Auth (${ha}): ${a}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(a,...t){throw Eh(a,...t)}function an(a,...t){return Eh(a,...t)}function Sh(a,t,i){const l={...hT(),[t]:i};return new Ul("auth","Firebase",l).create(t,{appName:a.name})}function $i(a){return Sh(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mT(a,t,i){const l=i;if(!(t instanceof l))throw l.name!==t.constructor.name&&hn(a,"argument-error"),Sh(a,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Eh(a,...t){if(typeof a!="string"){const i=t[0],l=[...t.slice(1)];return l[0]&&(l[0].appName=a.name),a._errorFactory.create(i,...l)}return Wy.create(a,...t)}function J(a,t,...i){if(!a)throw Eh(t,...i)}function kn(a){const t="INTERNAL ASSERTION FAILED: "+a;throw po(t),new Error(t)}function jn(a,t){a||kn(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.href)||""}function pT(){return k_()==="http:"||k_()==="https:"}function k_(){var a;return typeof self<"u"&&((a=self.location)==null?void 0:a.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pT()||qE()||"connection"in navigator)?navigator.onLine:!0}function _T(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t,i){this.shortDelay=t,this.longDelay=i,jn(i>t,"Short delay should be less than long delay!"),this.isMobile=_h()||Vy()}get(){return gT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(a,t){jn(a.emulator,"Emulator should always be set here");const{url:i}=a.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{static initialize(t,i,l){this.fetchImpl=t,i&&(this.headersImpl=i),l&&(this.responseImpl=l)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bT=new zl(3e4,6e4);function Ch(a,t){return a.tenantId&&!t.tenantId?{...t,tenantId:a.tenantId}:t}async function da(a,t,i,l,o={}){return $y(a,o,async()=>{let f={},h={};l&&(t==="GET"?h=l:f={body:JSON.stringify(l)});const m=fa({key:a.config.apiKey,...h}).slice(1),g=await a._getAdditionalHeaders();g["Content-Type"]="application/json",a.languageCode&&(g["X-Firebase-Locale"]=a.languageCode);const p={method:t,headers:g,...f};return BE()||(p.referrerPolicy="no-referrer"),a.emulatorConfig&&ca(a.emulatorConfig.host)&&(p.credentials="include"),Jy.fetch()(await ev(a,a.config.apiHost,i,m),p)})}async function $y(a,t,i){a._canInitEmulator=!1;const l={...yT,...t};try{const o=new ET(a),f=await Promise.race([i(),o.promise]);o.clearNetworkTimeout();const h=await f.json();if("needConfirmation"in h)throw co(a,"account-exists-with-different-credential",h);if(f.ok&&!("errorMessage"in h))return h;{const m=f.ok?h.errorMessage:h.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw co(a,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw co(a,"email-already-in-use",h);if(g==="USER_DISABLED")throw co(a,"user-disabled",h);const b=l[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Sh(a,b,p);hn(a,b)}}catch(o){if(o instanceof xi)throw o;hn(a,"network-request-failed",{message:String(o)})}}async function ST(a,t,i,l,o={}){const f=await da(a,t,i,l,o);return"mfaPendingCredential"in f&&hn(a,"multi-factor-auth-required",{_serverResponse:f}),f}async function ev(a,t,i,l){const o=`${t}${i}?${l}`,f=a,h=f.config.emulator?Th(a.config,o):`${a.config.apiScheme}://${o}`;return vT.includes(i)&&(await f._persistenceManagerAvailable,f._getPersistenceType()==="COOKIE")?f._getPersistence()._getFinalTarget(h).toString():h}class ET{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,l)=>{this.timer=setTimeout(()=>l(an(this.auth,"network-request-failed")),bT.get())})}}function co(a,t,i){const l={appName:a.name};i.email&&(l.email=i.email),i.phoneNumber&&(l.phoneNumber=i.phoneNumber);const o=an(a,t,l);return o.customData._tokenResponse=i,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TT(a,t){return da(a,"POST","/v1/accounts:delete",t)}async function wo(a,t){return da(a,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(a){if(a)try{const t=new Date(Number(a));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function CT(a,t=!1){const i=pt(a),l=await i.getIdToken(t),o=wh(l);J(o&&o.exp&&o.auth_time&&o.iat,i.auth,"internal-error");const f=typeof o.firebase=="object"?o.firebase:void 0,h=f==null?void 0:f.sign_in_provider;return{claims:o,token:l,authTime:_l(Lf(o.auth_time)),issuedAtTime:_l(Lf(o.iat)),expirationTime:_l(Lf(o.exp)),signInProvider:h||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function Lf(a){return Number(a)*1e3}function wh(a){const[t,i,l]=a.split(".");if(t===void 0||i===void 0||l===void 0)return po("JWT malformed, contained fewer than 3 sections"),null;try{const o=So(i);return o?JSON.parse(o):(po("Failed to decode base64 JWT payload"),null)}catch(o){return po("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function L_(a){const t=wh(a);return J(t,"internal-error"),J(typeof t.exp<"u","internal-error"),J(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(a,t,i=!1){if(i)return t;try{return await t}catch(l){throw l instanceof xi&&wT(l)&&a.auth.currentUser===a&&await a.auth.signOut(),l}}function wT({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const l=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=_l(this.lastLoginAt),this.creationTime=_l(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(a){var y;const t=a.auth,i=await a.getIdToken(),l=await wl(a,wo(t,{idToken:i}));J(l==null?void 0:l.users.length,t,"internal-error");const o=l.users[0];a._notifyReloadListener(o);const f=(y=o.providerUserInfo)!=null&&y.length?tv(o.providerUserInfo):[],h=xT(a.providerData,f),m=a.isAnonymous,g=!(a.email&&o.passwordHash)&&!(h!=null&&h.length),p=m?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Wf(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(a,b)}async function NT(a){const t=pt(a);await Ao(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function xT(a,t){return[...a.filter(l=>!t.some(o=>o.providerId===l.providerId)),...t]}function tv(a){return a.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(a,t){const i=await $y(a,{},async()=>{const l=fa({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:f}=a.config,h=await ev(a,o,"/v1/token",`key=${f}`),m=await a._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:l};return a.emulatorConfig&&ca(a.emulatorConfig.host)&&(g.credentials="include"),Jy.fetch()(h,g)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function OT(a,t){return da(a,"POST","/v2/accounts:revokeToken",Ch(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){J(t.idToken,"internal-error"),J(typeof t.idToken<"u","internal-error"),J(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):L_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){J(t.length!==0,"internal-error");const i=L_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:l,refreshToken:o,expiresIn:f}=await RT(t,i);this.updateTokensAndExpiration(l,o,Number(f))}updateTokensAndExpiration(t,i,l){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+l*1e3}static fromJSON(t,i){const{refreshToken:l,accessToken:o,expirationTime:f}=i,h=new Zs;return l&&(J(typeof l=="string","internal-error",{appName:t}),h.refreshToken=l),o&&(J(typeof o=="string","internal-error",{appName:t}),h.accessToken=o),f&&(J(typeof f=="number","internal-error",{appName:t}),h.expirationTime=f),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(a,t){J(typeof a=="string"||typeof a>"u","internal-error",{appName:t})}class nn{constructor({uid:t,auth:i,stsTokenManager:l,...o}){this.providerId="firebase",this.proactiveRefresh=new AT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const i=await wl(this,this.stsTokenManager.getToken(this.auth,t));return J(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return CT(this,t)}reload(){return NT(this)}_assign(t){this!==t&&(J(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new nn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let l=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),l=!0),i&&await Ao(this),await this.auth._persistUserIfCurrent(this),l&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject($i(this.auth));const t=await this.getIdToken();return await wl(this,TT(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const l=i.displayName??void 0,o=i.email??void 0,f=i.phoneNumber??void 0,h=i.photoURL??void 0,m=i.tenantId??void 0,g=i._redirectEventId??void 0,p=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:y,emailVerified:S,isAnonymous:R,providerData:U,stsTokenManager:G}=i;J(y&&G,t,"internal-error");const fe=Zs.fromJSON(this.name,G);J(typeof y=="string",t,"internal-error"),mi(l,t.name),mi(o,t.name),J(typeof S=="boolean",t,"internal-error"),J(typeof R=="boolean",t,"internal-error"),mi(f,t.name),mi(h,t.name),mi(m,t.name),mi(g,t.name),mi(p,t.name),mi(b,t.name);const _e=new nn({uid:y,auth:t,email:o,emailVerified:S,displayName:l,isAnonymous:R,photoURL:h,phoneNumber:f,tenantId:m,stsTokenManager:fe,createdAt:p,lastLoginAt:b});return U&&Array.isArray(U)&&(_e.providerData=U.map(De=>({...De}))),g&&(_e._redirectEventId=g),_e}static async _fromIdTokenResponse(t,i,l=!1){const o=new Zs;o.updateFromServerResponse(i);const f=new nn({uid:i.localId,auth:t,stsTokenManager:o,isAnonymous:l});return await Ao(f),f}static async _fromGetAccountInfoResponse(t,i,l){const o=i.users[0];J(o.localId!==void 0,"internal-error");const f=o.providerUserInfo!==void 0?tv(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(f!=null&&f.length),m=new Zs;m.updateFromIdToken(l);const g=new nn({uid:o.localId,auth:t,stsTokenManager:m,isAnonymous:h}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Wf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(f!=null&&f.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function Ln(a){jn(a instanceof Function,"Expected a class definition");let t=U_.get(a);return t?(jn(t instanceof a,"Instance stored in cache mismatched with class"),t):(t=new a,U_.set(a,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}nv.type="NONE";const z_=nv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(a,t,i){return`firebase:${a}:${t}:${i}`}class Ws{constructor(t,i,l){this.persistence=t,this.auth=i,this.userKey=l;const{config:o,name:f}=this.auth;this.fullUserKey=go(this.userKey,o.apiKey,f),this.fullPersistenceKey=go("persistence",o.apiKey,f),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await wo(this.auth,{idToken:t}).catch(()=>{});return i?nn._fromGetAccountInfoResponse(this.auth,i,t):null}return nn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,l="authUser"){if(!i.length)return new Ws(Ln(z_),t,l);const o=(await Promise.all(i.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let f=o[0]||Ln(z_);const h=go(l,t.config.apiKey,t.name);let m=null;for(const p of i)try{const b=await p._get(h);if(b){let y;if(typeof b=="string"){const S=await wo(t,{idToken:b}).catch(()=>{});if(!S)break;y=await nn._fromGetAccountInfoResponse(t,S,b)}else y=nn._fromJSON(t,b);p!==f&&(m=y),f=p;break}}catch{}const g=o.filter(p=>p._shouldAllowMigration);return!f._shouldAllowMigration||!g.length?new Ws(f,t,l):(f=g[0],m&&await f._set(h,m.toJSON()),await Promise.all(i.map(async p=>{if(p!==f)try{await p._remove(h)}catch{}})),new Ws(f,t,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(a){const t=a.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ov(t))return"Blackberry";if(uv(t))return"Webos";if(sv(t))return"Safari";if((t.includes("chrome/")||av(t))&&!t.includes("edge/"))return"Chrome";if(rv(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,l=a.match(i);if((l==null?void 0:l.length)===2)return l[1]}return"Other"}function iv(a=mt()){return/firefox\//i.test(a)}function sv(a=mt()){const t=a.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function av(a=mt()){return/crios\//i.test(a)}function lv(a=mt()){return/iemobile/i.test(a)}function rv(a=mt()){return/android/i.test(a)}function ov(a=mt()){return/blackberry/i.test(a)}function uv(a=mt()){return/webos/i.test(a)}function Ah(a=mt()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function DT(a=mt()){var t;return Ah(a)&&!!((t=window.navigator)!=null&&t.standalone)}function MT(){return VE()&&document.documentMode===10}function cv(a=mt()){return Ah(a)||rv(a)||uv(a)||ov(a)||/windows phone/i.test(a)||lv(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(a,t=[]){let i;switch(a){case"Browser":i=H_(mt());break;case"Worker":i=`${H_(mt())}-${a}`;break;default:i=a}const l=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${ha}/${l}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const l=f=>new Promise((h,m)=>{try{const g=t(f);h(g)}catch(g){m(g)}});l.onAbort=i,this.queue.push(l);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const l of this.queue)await l(t),l.onAbort&&i.push(l.onAbort)}catch(l){i.reverse();for(const o of i)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:l==null?void 0:l.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kT(a,t={}){return da(a,"GET","/v2/passwordPolicy",Ch(a,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=6;class UT{constructor(t){var l;const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??LT,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((l=t.allowedNonAlphanumericCharacters)==null?void 0:l.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const l=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;l&&(i.meetsMinPasswordLength=t.length>=l),o&&(i.meetsMaxPasswordLength=t.length<=o)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let l;for(let o=0;o<t.length;o++)l=t.charAt(o),this.updatePasswordCharacterOptionsStatuses(i,l>="a"&&l<="z",l>="A"&&l<="Z",l>="0"&&l<="9",this.allowedNonAlphanumericCharacters.includes(l))}updatePasswordCharacterOptionsStatuses(t,i,l,o,f){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=l)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t,i,l,o){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=l,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new IT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(f=>this._resolvePersistenceManagerAvailable=f)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Ln(i)),this._initializationPromise=this.queue(async()=>{var l,o,f;if(!this._deleted&&(this.persistenceManager=await Ws.create(this,t),(l=this._resolvePersistenceManagerAvailable)==null||l.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((f=this.currentUser)==null?void 0:f.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await wo(this,{idToken:t}),l=await nn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(l)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var f;if(en(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let l=i,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(f=this.redirectUser)==null?void 0:f._redirectEventId,m=l==null?void 0:l._redirectEventId,g=await this.tryRedirectSignIn(t);(!h||h===m)&&(g!=null&&g.user)&&(l=g.user,o=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(l)}catch(h){l=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Ao(t)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=_T()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(en(this.app))return Promise.reject($i(this));const i=t?pt(t):null;return i&&J(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&J(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject($i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return en(this.app)?Promise.reject($i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ln(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await kT(this),i=new UT(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Ul("auth","Firebase",t())}onAuthStateChanged(t,i,l){return this.registerStateListener(this.authStateSubscription,t,i,l)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,l){return this.registerStateListener(this.idTokenSubscription,t,i,l)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const l=this.onAuthStateChanged(()=>{l(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),l={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(l.tenantId=this.tenantId),await OT(this,l)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,i){const l=await this.getOrInitRedirectPersistenceManager(i);return t===null?l.removeCurrentUser():l.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Ln(t)||this._popupRedirectResolver;J(i,this,"argument-error"),this.redirectPersistenceManager=await Ws.create(this,[Ln(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var i,l;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)==null?void 0:i._redirectEventId)===t?this._currentUser:((l=this.redirectUser)==null?void 0:l._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((i=this.currentUser)==null?void 0:i.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,l,o){if(this._deleted)return()=>{};const f=typeof i=="function"?i:i.next.bind(i);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(m,this,"internal-error"),m.then(()=>{h||f(this.currentUser)}),typeof i=="function"){const g=t.addObserver(i,l,o);return()=>{h=!0,g()}}else{const g=t.addObserver(i);return()=>{h=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=fv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const l=await this._getAppCheckToken();return l&&(t["X-Firebase-AppCheck"]=l),t}async _getAppCheckToken(){var i;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getToken());return t!=null&&t.error&&dT(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Yo(a){return pt(a)}class j_{constructor(t){this.auth=t,this.observer=null,this.addObserver=JE(i=>this.observer=i)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HT(a){Nh=a}function jT(a){return Nh.loadJS(a)}function BT(){return Nh.gapiScript}function qT(a){return`__${a}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(a,t){const i=bh(a,"auth");if(i.isInitialized()){const o=i.getImmediate(),f=i.getOptions();if(es(f,t??{}))return o;hn(o,"already-initialized")}return i.initialize({options:t})}function GT(a,t){const i=(t==null?void 0:t.persistence)||[],l=(Array.isArray(i)?i:[i]).map(Ln);t!=null&&t.errorMap&&a._updateErrorMap(t.errorMap),a._initializeWithPersistence(l,t==null?void 0:t.popupRedirectResolver)}function PT(a,t,i){const l=Yo(a);J(/^https?:\/\//.test(t),l,"invalid-emulator-scheme");const o=!1,f=hv(t),{host:h,port:m}=YT(t),g=m===null?"":`:${m}`,p={url:`${f}//${h}${g}/`},b=Object.freeze({host:h,port:m,protocol:f.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!l._canInitEmulator){J(l.config.emulator&&l.emulatorConfig,l,"emulator-config-failed"),J(es(p,l.config.emulator)&&es(b,l.emulatorConfig),l,"emulator-config-failed");return}l.config.emulator=p,l.emulatorConfig=b,l.settings.appVerificationDisabledForTesting=!0,ca(h)?(By(`${f}//${h}${g}`),qy("Auth",!0)):QT()}function hv(a){const t=a.indexOf(":");return t<0?"":a.substr(0,t+1)}function YT(a){const t=hv(a),i=/(\/\/)?([^?#/]+)/.exec(a.substr(t.length));if(!i)return{host:"",port:null};const l=i[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(l);if(o){const f=o[1];return{host:f,port:B_(l.substr(f.length+1))}}else{const[f,h]=l.split(":");return{host:f,port:B_(h)}}}function B_(a){if(!a)return null;const t=Number(a);return isNaN(t)?null:t}function QT(){function a(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return kn("not implemented")}_getIdTokenResponse(t){return kn("not implemented")}_linkToIdToken(t,i){return kn("not implemented")}_getReauthenticationResolver(t){return kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Js(a,t){return ST(a,"POST","/v1/accounts:signInWithIdp",Ch(a,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="http://localhost";class ns extends dv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new ns(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):hn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:l,signInMethod:o,...f}=i;if(!l||!o)return null;const h=new ns(l,o);return h.idToken=f.idToken||void 0,h.accessToken=f.accessToken||void 0,h.secret=f.secret,h.nonce=f.nonce,h.pendingToken=f.pendingToken||null,h}_getIdTokenResponse(t){const i=this.buildRequest();return Js(t,i)}_linkToIdToken(t,i){const l=this.buildRequest();return l.idToken=i,Js(t,l)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Js(t,i)}buildRequest(){const t={requestUri:FT,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=fa(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends xh{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Hl{constructor(){super("facebook.com")}static credential(t){return ns._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return pi.credentialFromTaggedObject(t)}static credentialFromError(t){return pi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return pi.credential(t.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return ns._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return In.credentialFromTaggedObject(t)}static credentialFromError(t){return In.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:l}=t;if(!i&&!l)return null;try{return In.credential(i,l)}catch{return null}}}In.GOOGLE_SIGN_IN_METHOD="google.com";In.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Hl{constructor(){super("github.com")}static credential(t){return ns._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return gi.credentialFromTaggedObject(t)}static credentialFromError(t){return gi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return gi.credential(t.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Hl{constructor(){super("twitter.com")}static credential(t,i){return ns._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return _i.credentialFromTaggedObject(t)}static credentialFromError(t){return _i.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:l}=t;if(!i||!l)return null;try{return _i.credential(i,l)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,l,o=!1){const f=await nn._fromIdTokenResponse(t,l,o),h=q_(l);return new ia({user:f,providerId:h,_tokenResponse:l,operationType:i})}static async _forOperation(t,i,l){await t._updateTokensIfNecessary(l,!0);const o=q_(l);return new ia({user:t,providerId:o,_tokenResponse:l,operationType:i})}}function q_(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends xi{constructor(t,i,l,o){super(i.code,i.message),this.operationType=l,this.user=o,Object.setPrototypeOf(this,No.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:l}}static _fromErrorAndOperation(t,i,l,o){return new No(t,i,l,o)}}function mv(a,t,i,l){return(t==="reauthenticate"?i._getReauthenticationResolver(a):i._getIdTokenResponse(a)).catch(f=>{throw f.code==="auth/multi-factor-auth-required"?No._fromErrorAndOperation(a,f,t,l):f})}async function KT(a,t,i=!1){const l=await wl(a,t._linkToIdToken(a.auth,await a.getIdToken()),i);return ia._forOperation(a,"link",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(a,t,i=!1){const{auth:l}=a;if(en(l.app))return Promise.reject($i(l));const o="reauthenticate";try{const f=await wl(a,mv(l,o,t,a),i);J(f.idToken,l,"internal-error");const h=wh(f.idToken);J(h,l,"internal-error");const{sub:m}=h;return J(a.uid===m,l,"user-mismatch"),ia._forOperation(a,o,f)}catch(f){throw(f==null?void 0:f.code)==="auth/user-not-found"&&hn(l,"user-mismatch"),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZT(a,t,i=!1){if(en(a.app))return Promise.reject($i(a));const l="signIn",o=await mv(a,l,t),f=await ia._fromIdTokenResponse(a,l,o);return i||await a._updateCurrentUser(f.user),f}function WT(a,t,i,l){return pt(a).onIdTokenChanged(t,i,l)}function JT(a,t,i){return pt(a).beforeAuthStateChanged(t,i)}function $T(a,t,i,l){return pt(a).onAuthStateChanged(t,i,l)}function eC(a){return pt(a).signOut()}const xo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(xo,"1"),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1e3,nC=10;class gv extends pv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const l=this.storage.getItem(i),o=this.localCache[i];l!==o&&t(i,o,l)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const l=t.key;i?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(l);!i&&this.localCache[l]===h||this.notifyListeners(l,h)},f=this.storage.getItem(l);MT()&&f!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,nC):o()}notifyListeners(t,i){this.localCache[t]=i;const l=this.listeners[t];if(l)for(const o of Array.from(l))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,l)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:l}),!0)})},tC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}gv.type="LOCAL";const iC=gv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v extends pv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}_v.type="SESSION";const yv=_v;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(a){return Promise.all(a.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const l=new Qo(t);return this.receivers.push(l),l}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:l,eventType:o,data:f}=i.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;i.ports[0].postMessage({status:"ack",eventId:l,eventType:o});const m=Array.from(h).map(async p=>p(i.origin,f)),g=await sC(m);i.ports[0].postMessage({status:"done",eventId:l,eventType:o,response:g})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qo.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(a="",t=10){let i="";for(let l=0;l<t;l++)i+=Math.floor(Math.random()*10);return a+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,l=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let f,h;return new Promise((m,g)=>{const p=Rh("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},l);h={messageChannel:o,onMessage(y){const S=y;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(b),f=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(f),m(S.data.response);break;default:clearTimeout(b),clearTimeout(f),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:t,eventId:p,data:i},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return window}function lC(a){fn().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function rC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oC(){var a;return((a=navigator==null?void 0:navigator.serviceWorker)==null?void 0:a.controller)||null}function uC(){return vv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="firebaseLocalStorageDb",cC=1,Ro="firebaseLocalStorage",Sv="fbase_key";class jl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Fo(a,t){return a.transaction([Ro],t?"readwrite":"readonly").objectStore(Ro)}function fC(){const a=indexedDB.deleteDatabase(bv);return new jl(a).toPromise()}function Jf(){const a=indexedDB.open(bv,cC);return new Promise((t,i)=>{a.addEventListener("error",()=>{i(a.error)}),a.addEventListener("upgradeneeded",()=>{const l=a.result;try{l.createObjectStore(Ro,{keyPath:Sv})}catch(o){i(o)}}),a.addEventListener("success",async()=>{const l=a.result;l.objectStoreNames.contains(Ro)?t(l):(l.close(),await fC(),t(await Jf()))})})}async function V_(a,t,i){const l=Fo(a,!0).put({[Sv]:t,value:i});return new jl(l).toPromise()}async function hC(a,t){const i=Fo(a,!1).get(t),l=await new jl(i).toPromise();return l===void 0?null:l.value}function G_(a,t){const i=Fo(a,!0).delete(t);return new jl(i).toPromise()}const dC=800,mC=3;class Ev{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jf(),this.db)}async _withRetries(t){let i=0;for(;;)try{const l=await this._openDb();return await t(l)}catch(l){if(i++>mC)throw l;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qo._getInstance(uC()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){var i,l;if(this.activeServiceWorker=await rC(),!this.activeServiceWorker)return;this.sender=new aC(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(i=t[0])!=null&&i.fulfilled&&(l=t[0])!=null&&l.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||oC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Jf();return await V_(t,xo,"1"),await G_(t,xo),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(l=>V_(l,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(l=>hC(l,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>G_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(o=>{const f=Fo(o,!1).getAll();return new jl(f).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],l=new Set;if(t.length!==0)for(const{fbase_key:o,value:f}of t)l.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(f)&&(this.notifyListeners(o,f),i.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!l.has(o)&&(this.notifyListeners(o,null),i.push(o));return i}notifyListeners(t,i){this.localCache[t]=i;const l=this.listeners[t];if(l)for(const o of Array.from(l))o(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ev.type="LOCAL";const pC=Ev;new zl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(a,t){return t?Ln(t):(J(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh extends dv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Js(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Js(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Js(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function gC(a){return ZT(a.auth,new Oh(a),a.bypassAuthState)}function _C(a){const{auth:t,user:i}=a;return J(i,t,"internal-error"),XT(i,new Oh(a),a.bypassAuthState)}async function yC(a){const{auth:t,user:i}=a;return J(i,t,"internal-error"),KT(i,new Oh(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(t,i,l,o,f=!1){this.auth=t,this.resolver=l,this.user=o,this.bypassAuthState=f,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(l){this.reject(l)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:l,postBody:o,tenantId:f,error:h,type:m}=t;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:i,sessionId:l,tenantId:f||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return gC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return _C;default:hn(this.auth,"internal-error")}}resolve(t){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new zl(2e3,1e4);async function bC(a,t,i){if(en(a.app))return Promise.reject(an(a,"operation-not-supported-in-this-environment"));const l=Yo(a);mT(a,t,xh);const o=Tv(l,i);return new Wi(l,"signInViaPopup",t,o).executeNotNull()}class Wi extends Cv{constructor(t,i,l,o,f){super(t,i,o,f),this.provider=l,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return J(t,this.auth,"internal-error"),t}async onExecution(){jn(this.filter.length===1,"Popup operations only handle one event");const t=Rh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const t=()=>{var i,l;if((l=(i=this.authWindow)==null?void 0:i.window)!=null&&l.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,vC.get())};t()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="pendingRedirect",_o=new Map;class EC extends Cv{constructor(t,i,l=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,l),this.eventId=null}async execute(){let t=_o.get(this.auth._key());if(!t){try{const l=await TC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(l)}catch(i){t=()=>Promise.reject(i)}_o.set(this.auth._key(),t)}return this.bypassAuthState||_o.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TC(a,t){const i=AC(t),l=wC(a);if(!await l._isAvailable())return!1;const o=await l._get(i)==="true";return await l._remove(i),o}function CC(a,t){_o.set(a._key(),t)}function wC(a){return Ln(a._redirectPersistence)}function AC(a){return go(SC,a.config.apiKey,a.name)}async function NC(a,t,i=!1){if(en(a.app))return Promise.reject($i(a));const l=Yo(a),o=Tv(l,t),h=await new EC(l,o,i).execute();return h&&!i&&(delete h.user._redirectEventId,await l._persistUserIfCurrent(h.user),await l._setRedirectUser(null,t)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=600*1e3;class RC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(l=>{this.isEventForConsumer(t,l)&&(i=!0,this.sendToConsumer(t,l),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!OC(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){var l;if(t.error&&!wv(t)){const o=((l=t.error.code)==null?void 0:l.split("auth/")[1])||"internal-error";i.onError(an(this.auth,o))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const l=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&l}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=xC&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(t))}saveEventToCache(t){this.cachedEventUids.add(P_(t)),this.lastProcessedEventTime=Date.now()}}function P_(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(t=>t).join("-")}function wv({type:a,error:t}){return a==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function OC(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wv(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(a,t={}){return da(a,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;async function kC(a){if(a.config.emulator)return;const{authorizedDomains:t}=await DC(a);for(const i of t)try{if(LC(i))return}catch{}hn(a,"unauthorized-domain")}function LC(a){const t=Zf(),{protocol:i,hostname:l}=new URL(t);if(a.startsWith("chrome-extension://")){const h=new URL(a);return h.hostname===""&&l===""?i==="chrome-extension:"&&a.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&h.hostname===l}if(!IC.test(i))return!1;if(MC.test(a))return l===a;const o=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(l)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new zl(3e4,6e4);function Y_(){const a=fn().___jsl;if(a!=null&&a.H){for(const t of Object.keys(a.H))if(a.H[t].r=a.H[t].r||[],a.H[t].L=a.H[t].L||[],a.H[t].r=[...a.H[t].L],a.CP)for(let i=0;i<a.CP.length;i++)a.CP[i]=null}}function zC(a){return new Promise((t,i)=>{var o,f,h;function l(){Y_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Y_(),i(an(a,"network-request-failed"))},timeout:UC.get()})}if((f=(o=fn().gapi)==null?void 0:o.iframes)!=null&&f.Iframe)t(gapi.iframes.getContext());else if((h=fn().gapi)!=null&&h.load)l();else{const m=qT("iframefcb");return fn()[m]=()=>{gapi.load?l():i(an(a,"network-request-failed"))},jT(`${BT()}?onload=${m}`).catch(g=>i(g))}}).catch(t=>{throw yo=null,t})}let yo=null;function HC(a){return yo=yo||zC(a),yo}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new zl(5e3,15e3),BC="__/auth/iframe",qC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PC(a){const t=a.config;J(t.authDomain,a,"auth-domain-config-required");const i=t.emulator?Th(t,qC):`https://${a.config.authDomain}/${BC}`,l={apiKey:t.apiKey,appName:a.name,v:ha},o=GC.get(a.config.apiHost);o&&(l.eid=o);const f=a._getFrameworks();return f.length&&(l.fw=f.join(",")),`${i}?${fa(l).slice(1)}`}async function YC(a){const t=await HC(a),i=fn().gapi;return J(i,a,"internal-error"),t.open({where:document.body,url:PC(a),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},l=>new Promise(async(o,f)=>{await l.restyle({setHideOnLeave:!1});const h=an(a,"network-request-failed"),m=fn().setTimeout(()=>{f(h)},jC.get());function g(){fn().clearTimeout(m),o(l)}l.ping(g).then(g,()=>{f(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FC=500,KC=600,XC="_blank",ZC="http://localhost";class Q_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WC(a,t,i,l=FC,o=KC){const f=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-l)/2,0).toString();let m="";const g={...QC,width:l.toString(),height:o.toString(),top:f,left:h},p=mt().toLowerCase();i&&(m=av(p)?XC:i),iv(p)&&(t=t||ZC,g.scrollbars="yes");const b=Object.entries(g).reduce((S,[R,U])=>`${S}${R}=${U},`,"");if(DT(p)&&m!=="_self")return JC(t||"",m),new Q_(null);const y=window.open(t||"",m,b);J(y,a,"popup-blocked");try{y.focus()}catch{}return new Q_(y)}function JC(a,t){const i=document.createElement("a");i.href=a,i.target=t;const l=document.createEvent("MouseEvent");l.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="__/auth/handler",ew="emulator/auth/handler",tw=encodeURIComponent("fac");async function F_(a,t,i,l,o,f){J(a.config.authDomain,a,"auth-domain-config-required"),J(a.config.apiKey,a,"invalid-api-key");const h={apiKey:a.config.apiKey,appName:a.name,authType:i,redirectUrl:l,v:ha,eventId:o};if(t instanceof xh){t.setDefaultLanguage(a.languageCode),h.providerId=t.providerId||"",Pf(t.getCustomParameters())||(h.customParameters=JSON.stringify(t.getCustomParameters()));for(const[b,y]of Object.entries({}))h[b]=y}if(t instanceof Hl){const b=t.getScopes().filter(y=>y!=="");b.length>0&&(h.scopes=b.join(","))}a.tenantId&&(h.tid=a.tenantId);const m=h;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await a._getAppCheckToken(),p=g?`#${tw}=${encodeURIComponent(g)}`:"";return`${nw(a)}?${fa(m).slice(1)}${p}`}function nw({config:a}){return a.emulator?Th(a,ew):`https://${a.authDomain}/${$C}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="webStorageSupport";class iw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yv,this._completeRedirectFn=NC,this._overrideRedirectResult=CC}async _openPopup(t,i,l,o){var h;jn((h=this.eventManagers[t._key()])==null?void 0:h.manager,"_initialize() not called before _openPopup()");const f=await F_(t,i,l,Zf(),o);return WC(t,f,Rh())}async _openRedirect(t,i,l,o){await this._originValidation(t);const f=await F_(t,i,l,Zf(),o);return lC(f),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:o,promise:f}=this.eventManagers[i];return o?Promise.resolve(o):(jn(f,"If manager is not set, promise should be"),f)}const l=this.initAndGetManager(t);return this.eventManagers[i]={promise:l},l.catch(()=>{delete this.eventManagers[i]}),l}async initAndGetManager(t){const i=await YC(t),l=new RC(t);return i.register("authEvent",o=>(J(o==null?void 0:o.authEvent,t,"invalid-auth-event"),{status:l.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:l},this.iframes[t._key()]=i,l}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Uf,{type:Uf},o=>{var h;const f=(h=o==null?void 0:o[0])==null?void 0:h[Uf];f!==void 0&&i(!!f),hn(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=kC(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return cv()||sv()||Ah()}}const sw=iw;var K_="@firebase/auth",X_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(l=>{t((l==null?void 0:l.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rw(a){na(new ts("auth",(t,{options:i})=>{const l=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),f=t.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=l.options;J(h&&!h.includes(":"),"invalid-api-key",{appName:l.name});const g={apiKey:h,authDomain:m,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fv(a)},p=new zT(l,o,f,g);return GT(p,i),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,l)=>{t.getProvider("auth-internal").initialize()})),na(new ts("auth-internal",t=>{const i=Yo(t.getProvider("auth").getImmediate());return(l=>new aw(l))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ei(K_,X_,lw(a)),Ei(K_,X_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=300,uw=jy("authIdTokenMaxAge")||ow;let Z_=null;const cw=a=>async t=>{const i=t&&await t.getIdTokenResult(),l=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(l&&l>uw)return;const o=i==null?void 0:i.token;Z_!==o&&(Z_=o,await fetch(a,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function fw(a=Fy()){const t=bh(a,"auth");if(t.isInitialized())return t.getImmediate();const i=VT(a,{popupRedirectResolver:sw,persistence:[pC,iC,yv]}),l=jy("authTokenSyncURL");if(l&&typeof isSecureContext=="boolean"&&isSecureContext){const f=new URL(l,location.origin);if(location.origin===f.origin){const h=cw(f.toString());JT(i,h,()=>h(i.currentUser)),WT(i,m=>h(m))}}const o=zy("auth");return o&&PT(i,`http://${o}`),i}function hw(){var a;return((a=document.getElementsByTagName("head"))==null?void 0:a[0])??document}HT({loadJS(a){return new Promise((t,i)=>{const l=document.createElement("script");l.setAttribute("src",a),l.onload=t,l.onerror=o=>{const f=an("internal-error");f.customData=o,i(f)},l.type="text/javascript",l.charset="UTF-8",hw().appendChild(l)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rw("Browser");var W_={};const J_="@firebase/database",$_="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Av="";function dw(a){Av=a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,i){i==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),We(i))}get(t){const i=this.domStorage_.getItem(this.prefixedName_(t));return i==null?null:Tl(i)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,i){i==null?delete this.cache_[t]:this.cache_[t]=i}get(t){return dn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=function(a){try{if(typeof window<"u"&&typeof window[a]<"u"){const t=window[a];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new mw(t)}}catch{}return new pw},Ji=Nv("localStorage"),gw=Nv("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new yh("@firebase/database"),_w=(function(){let a=1;return function(){return a++}})(),xv=function(a){const t=t1(a),i=new WE;i.update(t);const l=i.digest();return ph.encodeByteArray(l)},Bl=function(...a){let t="";for(let i=0;i<a.length;i++){const l=a[i];Array.isArray(l)||l&&typeof l=="object"&&typeof l.length=="number"?t+=Bl.apply(null,l):typeof l=="object"?t+=We(l):t+=l,t+=" "}return t};let yl=null,ey=!0;const yw=function(a,t){z(!0,"Can't turn on custom loggers persistently."),$s.logLevel=Ne.VERBOSE,yl=$s.log.bind($s)},rt=function(...a){if(ey===!0&&(ey=!1,yl===null&&gw.get("logging_enabled")===!0&&yw()),yl){const t=Bl.apply(null,a);yl(t)}},ql=function(a){return function(...t){rt(a,...t)}},$f=function(...a){const t="FIREBASE INTERNAL ERROR: "+Bl(...a);$s.error(t)},Bn=function(...a){const t=`FIREBASE FATAL ERROR: ${Bl(...a)}`;throw $s.error(t),new Error(t)},dt=function(...a){const t="FIREBASE WARNING: "+Bl(...a);$s.warn(t)},vw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&dt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Dh=function(a){return typeof a=="number"&&(a!==a||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)},bw=function(a){if(document.readyState==="complete")a();else{let t=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}t||(t=!0,a())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},sa="[MIN_NAME]",is="[MAX_NAME]",ls=function(a,t){if(a===t)return 0;if(a===sa||t===is)return-1;if(t===sa||a===is)return 1;{const i=ty(a),l=ty(t);return i!==null?l!==null?i-l===0?a.length-t.length:i-l:-1:l!==null?1:a<t?-1:1}},Sw=function(a,t){return a===t?0:a<t?-1:1},hl=function(a,t){if(t&&a in t)return t[a];throw new Error("Missing required key ("+a+") in object: "+We(t))},Mh=function(a){if(typeof a!="object"||a===null)return We(a);const t=[];for(const l in a)t.push(l);t.sort();let i="{";for(let l=0;l<t.length;l++)l!==0&&(i+=","),i+=We(t[l]),i+=":",i+=Mh(a[t[l]]);return i+="}",i},Rv=function(a,t){const i=a.length;if(i<=t)return[a];const l=[];for(let o=0;o<i;o+=t)o+t>i?l.push(a.substring(o,i)):l.push(a.substring(o,o+t));return l};function ot(a,t){for(const i in a)a.hasOwnProperty(i)&&t(i,a[i])}const Ov=function(a){z(!Dh(a),"Invalid JSON number");const t=11,i=52,l=(1<<t-1)-1;let o,f,h,m,g;a===0?(f=0,h=0,o=1/a===-1/0?1:0):(o=a<0,a=Math.abs(a),a>=Math.pow(2,1-l)?(m=Math.min(Math.floor(Math.log(a)/Math.LN2),l),f=m+l,h=Math.round(a*Math.pow(2,i-m)-Math.pow(2,i))):(f=0,h=Math.round(a/Math.pow(2,1-l-i))));const p=[];for(g=i;g;g-=1)p.push(h%2?1:0),h=Math.floor(h/2);for(g=t;g;g-=1)p.push(f%2?1:0),f=Math.floor(f/2);p.push(o?1:0),p.reverse();const b=p.join("");let y="";for(g=0;g<64;g+=8){let S=parseInt(b.substr(g,8),2).toString(16);S.length===1&&(S="0"+S),y=y+S}return y.toLowerCase()},Ew=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Tw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Cw(a,t){let i="Unknown Error";a==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":a==="permission_denied"?i="Client doesn't have permission to access the desired data.":a==="unavailable"&&(i="The service is unavailable");const l=new Error(a+" at "+t._path.toString()+": "+i);return l.code=a.toUpperCase(),l}const ww=new RegExp("^-?(0*)\\d{1,10}$"),Aw=-2147483648,Nw=2147483647,ty=function(a){if(ww.test(a)){const t=Number(a);if(t>=Aw&&t<=Nw)return t}return null},ma=function(a){try{a()}catch(t){setTimeout(()=>{const i=t.stack||"";throw dt("Exception was thrown by user callback.",i),t},Math.floor(0))}},xw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},vl=function(a,t){const i=setTimeout(a,t);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(t,i){this.appCheckProvider=i,this.appName=t.name,en(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(l=>this.appCheck=l)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((i,l)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(i,l):i(null)},0)})}addTokenChangeListener(t){var i;(i=this.appCheckProvider)==null||i.get().then(l=>l.addTokenListener(t))}notifyForInvalidToken(){dt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t,i,l){this.appName_=t,this.firebaseOptions_=i,this.authProvider_=l,this.auth_=null,this.auth_=l.getImmediate({optional:!0}),this.auth_||l.onInit(o=>this.auth_=o)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(i=>i&&i.code==="auth/token-not-initialized"?(rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,l)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(i,l):i(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(i=>i.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(i=>i.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',dt(t)}}class vo{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}vo.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="5",Dv="v",Mv="s",Iv="r",kv="f",Lv=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Uv="ls",zv="p",eh="ac",Hv="websocket",jv="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(t,i,l,o,f=!1,h="",m=!1,g=!1,p=null){this.secure=i,this.namespace=l,this.webSocketOnly=o,this.nodeAdmin=f,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=g,this.emulatorOptions=p,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ji.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ji.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${i}`}}function Dw(a){return a.host!==a.internalHost||a.isCustomHost()||a.includeNamespaceInQueryParams}function qv(a,t,i){z(typeof t=="string","typeof type must == string"),z(typeof i=="object","typeof params must == object");let l;if(t===Hv)l=(a.secure?"wss://":"ws://")+a.internalHost+"/.ws?";else if(t===jv)l=(a.secure?"https://":"http://")+a.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Dw(a)&&(i.ns=a.namespace);const o=[];return ot(i,(f,h)=>{o.push(f+"="+h)}),l+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.counters_={}}incrementCounter(t,i=1){dn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=i}get(){return OE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf={},Hf={};function kh(a){const t=a.toString();return zf[t]||(zf[t]=new Mw),zf[t]}function Iw(a,t){const i=a.toString();return Hf[i]||(Hf[i]=t()),Hf[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,i){this.closeAfterResponse=t,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,i){for(this.pendingResponses[t]=i;this.pendingResponses[this.currentResponseNum];){const l=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<l.length;++o)l[o]&&ma(()=>{this.onMessage_(l[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="start",Lw="close",Uw="pLPCommand",zw="pRTLPCB",Vv="id",Gv="pw",Pv="ser",Hw="cb",jw="seg",Bw="ts",qw="d",Vw="dframe",Yv=1870,Qv=30,Gw=Yv-Qv,Pw=25e3,Yw=3e4;class Xs{constructor(t,i,l,o,f,h,m){this.connId=t,this.repoInfo=i,this.applicationId=l,this.appCheckToken=o,this.authToken=f,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ql(t),this.stats_=kh(i),this.urlFn=g=>(this.appCheckToken&&(g[eh]=this.appCheckToken),qv(i,jv,g))}open(t,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new kw(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Yw)),bw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lh((...f)=>{const[h,m,g,p,b]=f;if(this.incrementIncomingBytes_(f),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===ny)this.id=m,this.password=g;else if(h===Lw)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...f)=>{const[h,m]=f;this.incrementIncomingBytes_(f),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const l={};l[ny]="t",l[Pv]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(l[Hw]=this.scriptTagHolder.uniqueCallbackIdentifier),l[Dv]=Ih,this.transportSessionId&&(l[Mv]=this.transportSessionId),this.lastSessionId&&(l[Uv]=this.lastSessionId),this.applicationId&&(l[zv]=this.applicationId),this.appCheckToken&&(l[eh]=this.appCheckToken),typeof location<"u"&&location.hostname&&Lv.test(location.hostname)&&(l[Iv]=kv);const o=this.urlFn(l);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xs.forceAllow_=!0}static forceDisallow(){Xs.forceDisallow_=!0}static isAvailable(){return Xs.forceAllow_?!0:!Xs.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Ew()&&!Tw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const i=We(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const l=Ly(i),o=Rv(l,Gw);for(let f=0;f<o.length;f++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[f]),this.curSegmentNum++}addDisconnectPingFrame(t,i){this.myDisconnFrame=document.createElement("iframe");const l={};l[Vw]="t",l[Vv]=t,l[Gv]=i,this.myDisconnFrame.src=this.urlFn(l),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const i=We(t).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class Lh{constructor(t,i,l,o){this.onDisconnect=l,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=_w(),window[Uw+this.uniqueCallbackIdentifier]=t,window[zw+this.uniqueCallbackIdentifier]=i,this.myIFrame=Lh.createIFrame_();let f="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(f='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+f+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){rt("frame writing exception"),m.stack&&rt(m.stack),rt(m)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||rt("No IE domain setting required")}catch{const l=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+l+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,i){for(this.myID=t,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[Vv]=this.myID,t[Gv]=this.myPW,t[Pv]=this.currentSerial;let i=this.urlFn(t),l="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Qv+l.length<=Yv;){const h=this.pendingSegs.shift();l=l+"&"+jw+o+"="+h.seg+"&"+Bw+o+"="+h.ts+"&"+qw+o+"="+h.d,o++}return i=i+l,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(t,i,l){this.pendingSegs.push({seg:t,ts:i,d:l}),this.alive&&this.newRequest_()}addLongPollTag_(t,i){this.outstandingRequests.add(i);const l=()=>{this.outstandingRequests.delete(i),this.newRequest_()},o=setTimeout(l,Math.floor(Pw)),f=()=>{clearTimeout(o),l()};this.addTag(t,f)}addTag(t,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const l=this.myIFrame.doc.createElement("script");l.type="text/javascript",l.async=!0,l.src=t,l.onload=l.onreadystatechange=function(){const o=l.readyState;(!o||o==="loaded"||o==="complete")&&(l.onload=l.onreadystatechange=null,l.parentNode&&l.parentNode.removeChild(l),i())},l.onerror=()=>{rt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(l)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=16384,Fw=45e3;let Oo=null;typeof MozWebSocket<"u"?Oo=MozWebSocket:typeof WebSocket<"u"&&(Oo=WebSocket);class tn{constructor(t,i,l,o,f,h,m){this.connId=t,this.applicationId=l,this.appCheckToken=o,this.authToken=f,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ql(this.connId),this.stats_=kh(i),this.connURL=tn.connectionURL_(i,h,m,o,l),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,l,o,f){const h={};return h[Dv]=Ih,typeof location<"u"&&location.hostname&&Lv.test(location.hostname)&&(h[Iv]=kv),i&&(h[Mv]=i),l&&(h[Uv]=l),o&&(h[eh]=o),f&&(h[zv]=f),qv(t,Hv,h)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ji.set("previous_websocket_failure",!0);try{let l;GE(),this.mySock=new Oo(this.connURL,[],l)}catch(l){this.log_("Error instantiating WebSocket.");const o=l.message||l.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=l=>{this.handleIncomingFrame(l)},this.mySock.onerror=l=>{this.log_("WebSocket error.  Closing connection.");const o=l.message||l.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){tn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,l=navigator.userAgent.match(i);l&&l.length>1&&parseFloat(l[1])<4.4&&(t=!0)}return!t&&Oo!==null&&!tn.forceDisallow_}static previouslyFailed(){return Ji.isInMemoryStorage||Ji.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ji.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const l=Tl(i);this.onMessage(l)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(z(this.frames===null,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const l=this.extractFrameCount_(i);l!==null&&this.appendFrame_(l)}}send(t){this.resetKeepAlive();const i=We(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const l=Rv(i,Qw);l.length>1&&this.sendString_(String(l.length));for(let o=0;o<l.length;o++)this.sendString_(l[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Fw))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}tn.responsesRequiredToBeHealthy=2;tn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{static get ALL_TRANSPORTS(){return[Xs,tn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const i=tn&&tn.isAvailable();let l=i&&!tn.previouslyFailed();if(t.webSocketOnly&&(i||dt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),l=!0),l)this.transports_=[tn];else{const o=this.transports_=[];for(const f of Al.ALL_TRANSPORTS)f&&f.isAvailable()&&o.push(f);Al.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Al.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=6e4,Xw=5e3,Zw=10*1024,Ww=100*1024,jf="t",iy="d",Jw="s",sy="r",$w="e",ay="o",ly="a",ry="n",oy="p",eA="h";class tA{constructor(t,i,l,o,f,h,m,g,p,b){this.id=t,this.repoInfo_=i,this.applicationId_=l,this.appCheckToken_=o,this.authToken_=f,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=g,this.onKill_=p,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ql("c:"+this.id+":"),this.transportManager_=new Al(i),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),l=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,l)},Math.floor(0));const o=t.healthyTimeout||0;o>0&&(this.healthyTimeout_=vl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ww?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Zw?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return i=>{t===this.conn_?this.onConnectionLost_(i):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return i=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(i):t===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(t){const i={t:"d",d:t};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(jf in t){const i=t[jf];i===ly?this.upgradeIfSecondaryHealthy_():i===sy?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===ay&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const i=hl("t",t),l=hl("d",t);if(i==="c")this.onSecondaryControl_(l);else if(i==="d")this.pendingDataMessages.push(l);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:oy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ly,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ry,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const i=hl("t",t),l=hl("d",t);i==="c"?this.onControl_(l):i==="d"&&this.onDataMessage_(l)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const i=hl(jf,t);if(iy in t){const l=t[iy];if(i===eA){const o={...l};this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(i===ry){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===Jw?this.onConnectionShutdown_(l):i===sy?this.onReset_(l):i===$w?$f("Server Error: "+l):i===ay?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$f("Unknown control packet command: "+i)}}onHandshake_(t){const i=t.ts,l=t.v,o=t.h;this.sessionId=t.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),Ih!==l&&dt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),l=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,l),vl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Kw))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,i){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):vl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Xw))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:oy,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ji.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{put(t,i,l,o){}merge(t,i,l,o){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,i,l){}onDisconnectMerge(t,i,l){}onDisconnectCancel(t,i){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(t){this.allowedEvents_=t,this.listeners_={},z(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...i){if(Array.isArray(this.listeners_[t])){const l=[...this.listeners_[t]];for(let o=0;o<l.length;o++)l[o].callback.apply(l[o].context,i)}}on(t,i,l){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:i,context:l});const o=this.getInitialEvent(t);o&&i.apply(l,o)}off(t,i,l){this.validateEventType_(t);const o=this.listeners_[t]||[];for(let f=0;f<o.length;f++)if(o[f].callback===i&&(!l||l===o[f].context)){o.splice(f,1);return}}validateEventType_(t){z(this.allowedEvents_.find(i=>i===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Kv{static getInstance(){return new Do}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_h()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return z(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=32,cy=768;class xe{constructor(t,i){if(i===void 0){this.pieces_=t.split("/");let l=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[l]=this.pieces_[o],l++);this.pieces_.length=l,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=i}toString(){let t="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(t+="/"+this.pieces_[i]);return t||"/"}}function ge(){return new xe("")}function ie(a){return a.pieceNum_>=a.pieces_.length?null:a.pieces_[a.pieceNum_]}function wi(a){return a.pieces_.length-a.pieceNum_}function Ie(a){let t=a.pieceNum_;return t<a.pieces_.length&&t++,new xe(a.pieces_,t)}function Uh(a){return a.pieceNum_<a.pieces_.length?a.pieces_[a.pieces_.length-1]:null}function nA(a){let t="";for(let i=a.pieceNum_;i<a.pieces_.length;i++)a.pieces_[i]!==""&&(t+="/"+encodeURIComponent(String(a.pieces_[i])));return t||"/"}function Nl(a,t=0){return a.pieces_.slice(a.pieceNum_+t)}function Xv(a){if(a.pieceNum_>=a.pieces_.length)return null;const t=[];for(let i=a.pieceNum_;i<a.pieces_.length-1;i++)t.push(a.pieces_[i]);return new xe(t,0)}function je(a,t){const i=[];for(let l=a.pieceNum_;l<a.pieces_.length;l++)i.push(a.pieces_[l]);if(t instanceof xe)for(let l=t.pieceNum_;l<t.pieces_.length;l++)i.push(t.pieces_[l]);else{const l=t.split("/");for(let o=0;o<l.length;o++)l[o].length>0&&i.push(l[o])}return new xe(i,0)}function oe(a){return a.pieceNum_>=a.pieces_.length}function ht(a,t){const i=ie(a),l=ie(t);if(i===null)return t;if(i===l)return ht(Ie(a),Ie(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+a+")")}function iA(a,t){const i=Nl(a,0),l=Nl(t,0);for(let o=0;o<i.length&&o<l.length;o++){const f=ls(i[o],l[o]);if(f!==0)return f}return i.length===l.length?0:i.length<l.length?-1:1}function zh(a,t){if(wi(a)!==wi(t))return!1;for(let i=a.pieceNum_,l=t.pieceNum_;i<=a.pieces_.length;i++,l++)if(a.pieces_[i]!==t.pieces_[l])return!1;return!0}function Kt(a,t){let i=a.pieceNum_,l=t.pieceNum_;if(wi(a)>wi(t))return!1;for(;i<a.pieces_.length;){if(a.pieces_[i]!==t.pieces_[l])return!1;++i,++l}return!0}class sA{constructor(t,i){this.errorPrefix_=i,this.parts_=Nl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let l=0;l<this.parts_.length;l++)this.byteLength_+=Po(this.parts_[l]);Zv(this)}}function aA(a,t){a.parts_.length>0&&(a.byteLength_+=1),a.parts_.push(t),a.byteLength_+=Po(t),Zv(a)}function lA(a){const t=a.parts_.pop();a.byteLength_-=Po(t),a.parts_.length>0&&(a.byteLength_-=1)}function Zv(a){if(a.byteLength_>cy)throw new Error(a.errorPrefix_+"has a key path longer than "+cy+" bytes ("+a.byteLength_+").");if(a.parts_.length>uy)throw new Error(a.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uy+") or object contains a cycle "+Zi(a))}function Zi(a){return a.parts_.length===0?"":"in property '"+a.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends Kv{static getInstance(){return new Hh}constructor(){super(["visible"]);let t,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const l=!document[t];l!==this.visible_&&(this.visible_=l,this.trigger("visible",l))},!1)}getInitialEvent(t){return z(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=1e3,rA=300*1e3,fy=30*1e3,oA=1.3,uA=3e4,cA="server_kill",hy=3;class zn extends Fv{constructor(t,i,l,o,f,h,m,g){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=l,this.onConnectStatus_=o,this.onServerInfoUpdate_=f,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=g,this.id=zn.nextPersistentConnectionId_++,this.log_=ql("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dl,this.maxReconnectDelay_=rA,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Hh.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Do.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,l){const o=++this.requestNumber_,f={r:o,a:t,b:i};this.log_(We(f)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(f),l&&(this.requestCBHash_[o]=l)}get(t){this.initConnection_();const i=new Ll,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;h.s==="ok"?i.resolve(m):i.reject(m)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const f=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(f),i.promise}listen(t,i,l,o){this.initConnection_();const f=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+f),this.listens.has(h)||this.listens.set(h,new Map),z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(h).has(f),"listen() called twice for same path/queryId.");const m={onComplete:o,hashFn:i,query:t,tag:l};this.listens.get(h).set(f,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,l=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(l)})}sendListen_(t){const i=t.query,l=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+l+" for "+o);const f={p:l},h="q";t.tag&&(f.q=i._queryObject,f.t=t.tag),f.h=t.hashFn(),this.sendRequest(h,f,m=>{const g=m.d,p=m.s;zn.warnOnListenWarnings_(g,i),(this.listens.get(l)&&this.listens.get(l).get(o))===t&&(this.log_("listen response",m),p!=="ok"&&this.removeListen_(l,o),t.onComplete&&t.onComplete(p,g))})}static warnOnListenWarnings_(t,i){if(t&&typeof t=="object"&&dn(t,"w")){const l=ta(t,"w");if(Array.isArray(l)&&~l.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',f=i._path.toString();dt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${f} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||ZE(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fy)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=XE(t)?"auth":"gauth",l={cred:t};this.authOverride_===null?l.noauth=!0:typeof this.authOverride_=="object"&&(l.authvar=this.authOverride_),this.sendRequest(i,l,o=>{const f=o.s,h=o.d||"error";this.authToken_===t&&(f==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(f,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,l=t.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,l)})}unlisten(t,i){const l=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+l+" "+o),z(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(l,o)&&this.connected_&&this.sendUnlisten_(l,o,t._queryObject,i)}sendUnlisten_(t,i,l,o){this.log_("Unlisten on "+t+" for "+i);const f={p:t},h="n";o&&(f.q=l,f.t=o),this.sendRequest(h,f)}onDisconnectPut(t,i,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:l})}onDisconnectMerge(t,i,l){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,l):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:l})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,l,o){const f={p:i,d:l};this.log_("onDisconnect "+t,f),this.sendRequest(t,f,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,i,l,o){this.putInternal("p",t,i,l,o)}merge(t,i,l,o){this.putInternal("m",t,i,l,o)}putInternal(t,i,l,o,f){this.initConnection_();const h={p:i,d:l};f!==void 0&&(h.h=f),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,l=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,l,f=>{this.log_(i+" response",f),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(f.s,f.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,l=>{if(l.s!=="ok"){const f=l.d;this.log_("reportStats","Error sending stats: "+f)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+We(t));const i=t.r,l=this.requestCBHash_[i];l&&(delete this.requestCBHash_[i],l(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),t==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):t==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):t==="c"?this.onListenRevoked_(i.p,i.q):t==="ac"?this.onAuthRevoked_(i.s,i.d):t==="apc"?this.onAppCheckRevoked_(i.s,i.d):t==="sd"?this.onSecurityDebugPacket_(i):$f("Unrecognized action received from server: "+We(t)+`
Are you using the latest client?`)}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>uA&&(this.reconnectDelay_=dl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*oA)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),l=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+zn.nextConnectionId_++,f=this.lastSessionId;let h=!1,m=null;const g=function(){m?m.close():(h=!0,l())},p=function(y){z(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(y)};this.realtime_={close:g,sendRequest:p};const b=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,S]=await Promise.all([this.authTokenProvider_.getToken(b),this.appCheckTokenProvider_.getToken(b)]);h?rt("getToken() completed but was canceled"):(rt("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=S&&S.token,m=new tA(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,l,R=>{dt(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(cA)},f))}catch(y){this.log_("Failed to get token: "+y),h||(this.repoInfo_.nodeAdmin&&dt(y),g())}}}interrupt(t){rt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Pf(this.interruptReasons_)&&(this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let l;i?l=i.map(f=>Mh(f)).join("$"):l="default";const o=this.removeListen_(t,l);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const l=new xe(t).toString();let o;if(this.listens.has(l)){const f=this.listens.get(l);o=f.get(i),f.delete(i),f.size===0&&this.listens.delete(l)}else o=void 0;return o}onAuthRevoked_(t,i){rt("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hy&&(this.reconnectDelay_=fy,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){rt("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+Av.replace(/\./g,"-")]=1,_h()?t["framework.cordova"]=1:Vy()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Do.getInstance().currentlyOnline();return Pf(this.interruptReasons_)&&t}}zn.nextPersistentConnectionId_=0;zn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,i){this.name=t,this.node=i}static Wrap(t,i){return new se(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,i){const l=new se(sa,t),o=new se(sa,i);return this.compare(l,o)!==0}minPost(){return se.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo;class Wv extends Ko{static get __EMPTY_NODE(){return fo}static set __EMPTY_NODE(t){fo=t}compare(t,i){return ls(t.name,i.name)}isDefinedOn(t){throw ua("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,i){return!1}minPost(){return se.MIN}maxPost(){return new se(is,fo)}makePost(t,i){return z(typeof t=="string","KeyIndex indexValue must always be a string."),new se(t,fo)}toString(){return".key"}}const ea=new Wv;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,i,l,o,f=null){this.isReverse_=o,this.resultGenerator_=f,this.nodeStack_=[];let h=1;for(;!t.isEmpty();)if(t=t,h=i?l(t.key,i):1,o&&(h*=-1),h<0)this.isReverse_?t=t.left:t=t.right;else if(h===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(t.key,t.value):i={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class tt{constructor(t,i,l,o,f){this.key=t,this.value=i,this.color=l??tt.RED,this.left=o??wt.EMPTY_NODE,this.right=f??wt.EMPTY_NODE}copy(t,i,l,o,f){return new tt(t??this.key,i??this.value,l??this.color,o??this.left,f??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,l){let o=this;const f=l(t,o.key);return f<0?o=o.copy(null,null,null,o.left.insert(t,i,l),null):f===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,i,l)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return wt.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let l,o;if(l=this,i(t,l.key)<0)!l.left.isEmpty()&&!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed_()&&(l=l.rotateRight_()),!l.right.isEmpty()&&!l.right.isRed_()&&!l.right.left.isRed_()&&(l=l.moveRedRight_()),i(t,l.key)===0){if(l.right.isEmpty())return wt.EMPTY_NODE;o=l.right.min_(),l=l.copy(o.key,o.value,null,null,l.right.removeMin_())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}tt.RED=!0;tt.BLACK=!1;class fA{copy(t,i,l,o,f){return this}insert(t,i,l){return new tt(t,i,null)}remove(t,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wt{constructor(t,i=wt.EMPTY_NODE){this.comparator_=t,this.root_=i}insert(t,i){return new wt(this.comparator_,this.root_.insert(t,i,this.comparator_).copy(null,null,tt.BLACK,null,null))}remove(t){return new wt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,tt.BLACK,null,null))}get(t){let i,l=this.root_;for(;!l.isEmpty();){if(i=this.comparator_(t,l.key),i===0)return l.value;i<0?l=l.left:i>0&&(l=l.right)}return null}getPredecessorKey(t){let i,l=this.root_,o=null;for(;!l.isEmpty();)if(i=this.comparator_(t,l.key),i===0){if(l.left.isEmpty())return o?o.key:null;for(l=l.left;!l.right.isEmpty();)l=l.right;return l.key}else i<0?l=l.left:i>0&&(o=l,l=l.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ho(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,i){return new ho(this.root_,t,this.comparator_,!1,i)}getReverseIteratorFrom(t,i){return new ho(this.root_,t,this.comparator_,!0,i)}getReverseIterator(t){return new ho(this.root_,null,this.comparator_,!0,t)}}wt.EMPTY_NODE=new fA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(a,t){return ls(a.name,t.name)}function jh(a,t){return ls(a,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th;function dA(a){th=a}const Jv=function(a){return typeof a=="number"?"number:"+Ov(a):"string:"+a},$v=function(a){if(a.isLeafNode()){const t=a.val();z(typeof t=="string"||typeof t=="number"||typeof t=="object"&&dn(t,".sv"),"Priority must be a string or number.")}else z(a===th||a.isEmpty(),"priority of unexpected type.");z(a===th||a.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dy;class et{static set __childrenNodeConstructor(t){dy=t}static get __childrenNodeConstructor(){return dy}constructor(t,i=et.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$v(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new et(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return oe(t)?this:ie(t)===".priority"?this.priorityNode_:et.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return t===".priority"?this.updatePriority(i):i.isEmpty()&&t!==".priority"?this:et.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const l=ie(t);return l===null?i:i.isEmpty()&&l!==".priority"?this:(z(l!==".priority"||wi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(l,et.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ie(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Jv(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",i==="number"?t+=Ov(this.value_):t+=this.value_,this.lazyHash_=xv(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===et.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof et.__childrenNodeConstructor?-1:(z(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,l=typeof this.value_,o=et.VALUE_TYPE_ORDER.indexOf(i),f=et.VALUE_TYPE_ORDER.indexOf(l);return z(o>=0,"Unknown leaf type: "+i),z(f>=0,"Unknown leaf type: "+l),o===f?l==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:f-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}et.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e0,t0;function mA(a){e0=a}function pA(a){t0=a}class gA extends Ko{compare(t,i){const l=t.node.getPriority(),o=i.node.getPriority(),f=l.compareTo(o);return f===0?ls(t.name,i.name):f}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,i){return!t.getPriority().equals(i.getPriority())}minPost(){return se.MIN}maxPost(){return new se(is,new et("[PRIORITY-POST]",t0))}makePost(t,i){const l=e0(t);return new se(i,new et("[PRIORITY-POST]",l))}toString(){return".priority"}}const Be=new gA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=Math.log(2);class yA{constructor(t){const i=f=>parseInt(Math.log(f)/_A,10),l=f=>parseInt(Array(f+1).join("1"),2);this.count=i(t+1),this.current_=this.count-1;const o=l(this.count);this.bits_=t+1&o}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Mo=function(a,t,i,l){a.sort(t);const o=function(g,p){const b=p-g;let y,S;if(b===0)return null;if(b===1)return y=a[g],S=i?i(y):y,new tt(S,y.node,tt.BLACK,null,null);{const R=parseInt(b/2,10)+g,U=o(g,R),G=o(R+1,p);return y=a[R],S=i?i(y):y,new tt(S,y.node,tt.BLACK,U,G)}},f=function(g){let p=null,b=null,y=a.length;const S=function(U,G){const fe=y-U,_e=y;y-=U;const De=o(fe+1,_e),Z=a[fe],Y=i?i(Z):Z;R(new tt(Y,Z.node,G,null,De))},R=function(U){p?(p.left=U,p=U):(b=U,p=U)};for(let U=0;U<g.count;++U){const G=g.nextBitIsOne(),fe=Math.pow(2,g.count-(U+1));G?S(fe,tt.BLACK):(S(fe,tt.BLACK),S(fe,tt.RED))}return b},h=new yA(a.length),m=f(h);return new wt(l||t,m)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf;const Qs={};class Un{static get Default(){return z(Qs&&Be,"ChildrenNode.ts has not been loaded"),Bf=Bf||new Un({".priority":Qs},{".priority":Be}),Bf}constructor(t,i){this.indexes_=t,this.indexSet_=i}get(t){const i=ta(this.indexes_,t);if(!i)throw new Error("No index defined for "+t);return i instanceof wt?i:null}hasIndex(t){return dn(this.indexSet_,t.toString())}addIndex(t,i){z(t!==ea,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const l=[];let o=!1;const f=i.getIterator(se.Wrap);let h=f.getNext();for(;h;)o=o||t.isDefinedOn(h.node),l.push(h),h=f.getNext();let m;o?m=Mo(l,t.getCompare()):m=Qs;const g=t.toString(),p={...this.indexSet_};p[g]=t;const b={...this.indexes_};return b[g]=m,new Un(b,p)}addToIndexes(t,i){const l=Eo(this.indexes_,(o,f)=>{const h=ta(this.indexSet_,f);if(z(h,"Missing index implementation for "+f),o===Qs)if(h.isDefinedOn(t.node)){const m=[],g=i.getIterator(se.Wrap);let p=g.getNext();for(;p;)p.name!==t.name&&m.push(p),p=g.getNext();return m.push(t),Mo(m,h.getCompare())}else return Qs;else{const m=i.get(t.name);let g=o;return m&&(g=g.remove(new se(t.name,m))),g.insert(t,t.node)}});return new Un(l,this.indexSet_)}removeFromIndexes(t,i){const l=Eo(this.indexes_,o=>{if(o===Qs)return o;{const f=i.get(t.name);return f?o.remove(new se(t.name,f)):o}});return new Un(l,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml;class F{static get EMPTY_NODE(){return ml||(ml=new F(new wt(jh),null,Un.Default))}constructor(t,i,l){this.children_=t,this.priorityNode_=i,this.indexMap_=l,this.lazyHash_=null,this.priorityNode_&&$v(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ml}updatePriority(t){return this.children_.isEmpty()?this:new F(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const i=this.children_.get(t);return i===null?ml:i}}getChild(t){const i=ie(t);return i===null?this:this.getImmediateChild(i).getChild(Ie(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,i){if(z(i,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(i);{const l=new se(t,i);let o,f;i.isEmpty()?(o=this.children_.remove(t),f=this.indexMap_.removeFromIndexes(l,this.children_)):(o=this.children_.insert(t,i),f=this.indexMap_.addToIndexes(l,this.children_));const h=o.isEmpty()?ml:this.priorityNode_;return new F(o,h,f)}}updateChild(t,i){const l=ie(t);if(l===null)return i;{z(ie(t)!==".priority"||wi(t)===1,".priority must be the last token in a path");const o=this.getImmediateChild(l).updateChild(Ie(t),i);return this.updateImmediateChild(l,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let l=0,o=0,f=!0;if(this.forEachChild(Be,(h,m)=>{i[h]=m.val(t),l++,f&&F.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):f=!1}),!t&&f&&o<2*l){const h=[];for(const m in i)h[m]=i[m];return h}else return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Jv(this.getPriority().val())+":"),this.forEachChild(Be,(i,l)=>{const o=l.hash();o!==""&&(t+=":"+i+":"+o)}),this.lazyHash_=t===""?"":xv(t)}return this.lazyHash_}getPredecessorChildName(t,i,l){const o=this.resolveIndex_(l);if(o){const f=o.getPredecessorKey(new se(t,i));return f?f.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const l=i.minKey();return l&&l.name}else return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new se(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const l=i.maxKey();return l&&l.name}else return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new se(i,this.children_.get(i)):null}forEachChild(t,i){const l=this.resolveIndex_(t);return l?l.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const l=this.resolveIndex_(i);if(l)return l.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,se.Wrap);let f=o.peek();for(;f!=null&&i.compare(f,t)<0;)o.getNext(),f=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const l=this.resolveIndex_(i);if(l)return l.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,se.Wrap);let f=o.peek();for(;f!=null&&i.compare(f,t)>0;)o.getNext(),f=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vl?-1:0}withIndex(t){if(t===ea||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new F(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===ea||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const l=this.getIterator(Be),o=i.getIterator(Be);let f=l.getNext(),h=o.getNext();for(;f&&h;){if(f.name!==h.name||!f.node.equals(h.node))return!1;f=l.getNext(),h=o.getNext()}return f===null&&h===null}else return!1;else return!1}}resolveIndex_(t){return t===ea?null:this.indexMap_.get(t.toString())}}F.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class vA extends F{constructor(){super(new wt(jh),F.EMPTY_NODE,Un.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return F.EMPTY_NODE}isEmpty(){return!1}}const Vl=new vA;Object.defineProperties(se,{MIN:{value:new se(sa,F.EMPTY_NODE)},MAX:{value:new se(is,Vl)}});Wv.__EMPTY_NODE=F.EMPTY_NODE;et.__childrenNodeConstructor=F;dA(Vl);pA(Vl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=!0;function Ze(a,t=null){if(a===null)return F.EMPTY_NODE;if(typeof a=="object"&&".priority"in a&&(t=a[".priority"]),z(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof a=="object"&&".value"in a&&a[".value"]!==null&&(a=a[".value"]),typeof a!="object"||".sv"in a){const i=a;return new et(i,Ze(t))}if(!(a instanceof Array)&&bA){const i=[];let l=!1;if(ot(a,(h,m)=>{if(h.substring(0,1)!=="."){const g=Ze(m);g.isEmpty()||(l=l||!g.getPriority().isEmpty(),i.push(new se(h,g)))}}),i.length===0)return F.EMPTY_NODE;const f=Mo(i,hA,h=>h.name,jh);if(l){const h=Mo(i,Be.getCompare());return new F(f,Ze(t),new Un({".priority":h},{".priority":Be}))}else return new F(f,Ze(t),Un.Default)}else{let i=F.EMPTY_NODE;return ot(a,(l,o)=>{if(dn(a,l)&&l.substring(0,1)!=="."){const f=Ze(o);(f.isLeafNode()||!f.isEmpty())&&(i=i.updateImmediateChild(l,f))}}),i.updatePriority(Ze(t))}}mA(Ze);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends Ko{constructor(t){super(),this.indexPath_=t,z(!oe(t)&&ie(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,i){const l=this.extractChild(t.node),o=this.extractChild(i.node),f=l.compareTo(o);return f===0?ls(t.name,i.name):f}makePost(t,i){const l=Ze(t),o=F.EMPTY_NODE.updateChild(this.indexPath_,l);return new se(i,o)}maxPost(){const t=F.EMPTY_NODE.updateChild(this.indexPath_,Vl);return new se(is,t)}toString(){return Nl(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA extends Ko{compare(t,i){const l=t.node.compareTo(i.node);return l===0?ls(t.name,i.name):l}isDefinedOn(t){return!0}indexedValueChanged(t,i){return!t.equals(i)}minPost(){return se.MIN}maxPost(){return se.MAX}makePost(t,i){const l=Ze(t);return new se(i,l)}toString(){return".value"}}const TA=new EA;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(a){return{type:"value",snapshotNode:a}}function aa(a,t){return{type:"child_added",snapshotNode:t,childName:a}}function xl(a,t){return{type:"child_removed",snapshotNode:t,childName:a}}function Rl(a,t,i){return{type:"child_changed",snapshotNode:t,childName:a,oldSnap:i}}function CA(a,t){return{type:"child_moved",snapshotNode:t,childName:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(t){this.index_=t}updateChild(t,i,l,o,f,h){z(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=t.getImmediateChild(i);return m.getChild(o).equals(l.getChild(o))&&m.isEmpty()===l.isEmpty()||(h!=null&&(l.isEmpty()?t.hasChild(i)?h.trackChildChange(xl(i,m)):z(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(aa(i,l)):h.trackChildChange(Rl(i,l,m))),t.isLeafNode()&&l.isEmpty())?t:t.updateImmediateChild(i,l).withIndex(this.index_)}updateFullNode(t,i,l){return l!=null&&(t.isLeafNode()||t.forEachChild(Be,(o,f)=>{i.hasChild(o)||l.trackChildChange(xl(o,f))}),i.isLeafNode()||i.forEachChild(Be,(o,f)=>{if(t.hasChild(o)){const h=t.getImmediateChild(o);h.equals(f)||l.trackChildChange(Rl(o,f,h))}else l.trackChildChange(aa(o,f))})),i.withIndex(this.index_)}updatePriority(t,i){return t.isEmpty()?F.EMPTY_NODE:t.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t){this.indexedFilter_=new Bh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Ol.getStartPost_(t),this.endPost_=Ol.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,l=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return i&&l}updateChild(t,i,l,o,f,h){return this.matches(new se(i,l))||(l=F.EMPTY_NODE),this.indexedFilter_.updateChild(t,i,l,o,f,h)}updateFullNode(t,i,l){i.isLeafNode()&&(i=F.EMPTY_NODE);let o=i.withIndex(this.index_);o=o.updatePriority(F.EMPTY_NODE);const f=this;return i.forEachChild(Be,(h,m)=>{f.matches(new se(h,m))||(o=o.updateImmediateChild(h,F.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,o,l)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const i=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),i)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const i=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),i)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(t){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const l=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?l<=0:l<0},this.withinEndPost=i=>{const l=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?l<=0:l<0},this.rangedFilter_=new Ol(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,i,l,o,f,h){return this.rangedFilter_.matches(new se(i,l))||(l=F.EMPTY_NODE),t.getImmediateChild(i).equals(l)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,i,l,o,f,h):this.fullLimitUpdateChild_(t,i,l,f,h)}updateFullNode(t,i,l){let o;if(i.isLeafNode()||i.isEmpty())o=F.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){o=F.EMPTY_NODE.withIndex(this.index_);let f;this.reverse_?f=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;f.hasNext()&&h<this.limit_;){const m=f.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))o=o.updateImmediateChild(m.name,m.node),h++;else break;else continue}}else{o=i.withIndex(this.index_),o=o.updatePriority(F.EMPTY_NODE);let f;this.reverse_?f=o.getReverseIterator(this.index_):f=o.getIterator(this.index_);let h=0;for(;f.hasNext();){const m=f.getNext();h<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?h++:o=o.updateImmediateChild(m.name,F.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,o,l)}updatePriority(t,i){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,i,l,o,f){let h;if(this.reverse_){const y=this.index_.getCompare();h=(S,R)=>y(R,S)}else h=this.index_.getCompare();const m=t;z(m.numChildren()===this.limit_,"");const g=new se(i,l),p=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),b=this.rangedFilter_.matches(g);if(m.hasChild(i)){const y=m.getImmediateChild(i);let S=o.getChildAfterChild(this.index_,p,this.reverse_);for(;S!=null&&(S.name===i||m.hasChild(S.name));)S=o.getChildAfterChild(this.index_,S,this.reverse_);const R=S==null?1:h(S,g);if(b&&!l.isEmpty()&&R>=0)return f!=null&&f.trackChildChange(Rl(i,l,y)),m.updateImmediateChild(i,l);{f!=null&&f.trackChildChange(xl(i,y));const G=m.updateImmediateChild(i,F.EMPTY_NODE);return S!=null&&this.rangedFilter_.matches(S)?(f!=null&&f.trackChildChange(aa(S.name,S.node)),G.updateImmediateChild(S.name,S.node)):G}}else return l.isEmpty()?t:b&&h(p,g)>=0?(f!=null&&(f.trackChildChange(xl(p.name,p.node)),f.trackChildChange(aa(i,l))),m.updateImmediateChild(i,l).updateImmediateChild(p.name,F.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Be}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:sa}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:is}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Be}copy(){const t=new qh;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function AA(a){return a.loadsAllData()?new Bh(a.getIndex()):a.hasLimit()?new wA(a):new Ol(a)}function my(a){const t={};if(a.isDefault())return t;let i;if(a.index_===Be?i="$priority":a.index_===TA?i="$value":a.index_===ea?i="$key":(z(a.index_ instanceof SA,"Unrecognized index type!"),i=a.index_.toString()),t.orderBy=We(i),a.startSet_){const l=a.startAfterSet_?"startAfter":"startAt";t[l]=We(a.indexStartValue_),a.startNameSet_&&(t[l]+=","+We(a.indexStartName_))}if(a.endSet_){const l=a.endBeforeSet_?"endBefore":"endAt";t[l]=We(a.indexEndValue_),a.endNameSet_&&(t[l]+=","+We(a.indexEndName_))}return a.limitSet_&&(a.isViewFromLeft()?t.limitToFirst=a.limit_:t.limitToLast=a.limit_),t}function py(a){const t={};if(a.startSet_&&(t.sp=a.indexStartValue_,a.startNameSet_&&(t.sn=a.indexStartName_),t.sin=!a.startAfterSet_),a.endSet_&&(t.ep=a.indexEndValue_,a.endNameSet_&&(t.en=a.indexEndName_),t.ein=!a.endBeforeSet_),a.limitSet_){t.l=a.limit_;let i=a.viewFrom_;i===""&&(a.isViewFromLeft()?i="l":i="r"),t.vf=i}return a.index_!==Be&&(t.i=a.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Fv{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,i){return i!==void 0?"tag$"+i:(z(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,i,l,o){super(),this.repoInfo_=t,this.onDataUpdate_=i,this.authTokenProvider_=l,this.appCheckTokenProvider_=o,this.log_=ql("p:rest:"),this.listens_={}}listen(t,i,l,o){const f=t._path.toString();this.log_("Listen called for "+f+" "+t._queryIdentifier);const h=Io.getListenId_(t,l),m={};this.listens_[h]=m;const g=my(t._queryParams);this.restRequest_(f+".json",g,(p,b)=>{let y=b;if(p===404&&(y=null,p=null),p===null&&this.onDataUpdate_(f,y,!1,l),ta(this.listens_,h)===m){let S;p?p===401?S="permission_denied":S="rest_error:"+p:S="ok",o(S,null)}})}unlisten(t,i){const l=Io.getListenId_(t,i);delete this.listens_[l]}get(t){const i=my(t._queryParams),l=t._path.toString(),o=new Ll;return this.restRequest_(l+".json",i,(f,h)=>{let m=h;f===404&&(m=null,f=null),f===null?(this.onDataUpdate_(l,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(t){}restRequest_(t,i={},l){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,f])=>{o&&o.accessToken&&(i.auth=o.accessToken),f&&f.token&&(i.ac=f.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+fa(i);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(l&&m.readyState===4){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let g=null;if(m.status>=200&&m.status<300){try{g=Tl(m.responseText)}catch{dt("Failed to parse JSON response for "+h+": "+m.responseText)}l(null,g)}else m.status!==401&&m.status!==404&&dt("Got unsuccessful REST response for "+h+" Status: "+m.status),l(m.status);l=null}},m.open("GET",h,!0),m.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,i){this.rootNode_=this.rootNode_.updateChild(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(){return{value:null,children:new Map}}function i0(a,t,i){if(oe(t))a.value=i,a.children.clear();else if(a.value!==null)a.value=a.value.updateChild(t,i);else{const l=ie(t);a.children.has(l)||a.children.set(l,ko());const o=a.children.get(l);t=Ie(t),i0(o,t,i)}}function nh(a,t,i){a.value!==null?i(t,a.value):xA(a,(l,o)=>{const f=new xe(t.toString()+"/"+l);nh(o,f,i)})}function xA(a,t){a.children.forEach((i,l)=>{t(l,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),i={...t};return this.last_&&ot(this.last_,(l,o)=>{i[l]=i[l]-o}),this.last_=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=10*1e3,OA=30*1e3,DA=300*1e3;class MA{constructor(t,i){this.server_=i,this.statsToReport_={},this.statsListener_=new RA(t);const l=gy+(OA-gy)*Math.random();vl(this.reportStats_.bind(this),Math.floor(l))}reportStats_(){const t=this.statsListener_.get(),i={};let l=!1;ot(t,(o,f)=>{f>0&&dn(this.statsToReport_,o)&&(i[o]=f,l=!0)}),l&&this.server_.reportStats(i),vl(this.reportStats_.bind(this),Math.floor(Math.random()*2*DA))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn;(function(a){a[a.OVERWRITE=0]="OVERWRITE",a[a.MERGE=1]="MERGE",a[a.ACK_USER_WRITE=2]="ACK_USER_WRITE",a[a.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(sn||(sn={}));function Vh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ph(a){return{fromUser:!1,fromServer:!0,queryId:a,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(t,i,l){this.path=t,this.affectedTree=i,this.revert=l,this.type=sn.ACK_USER_WRITE,this.source=Vh()}operationForChild(t){if(oe(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new xe(t));return new Lo(ge(),i,this.revert)}}else return z(ie(this.path)===t,"operationForChild called for unrelated child."),new Lo(Ie(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(t,i){this.source=t,this.path=i,this.type=sn.LISTEN_COMPLETE}operationForChild(t){return oe(this.path)?new Dl(this.source,ge()):new Dl(this.source,Ie(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t,i,l){this.source=t,this.path=i,this.snap=l,this.type=sn.OVERWRITE}operationForChild(t){return oe(this.path)?new ss(this.source,ge(),this.snap.getImmediateChild(t)):new ss(this.source,Ie(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,i,l){this.source=t,this.path=i,this.children=l,this.type=sn.MERGE}operationForChild(t){if(oe(this.path)){const i=this.children.subtree(new xe(t));return i.isEmpty()?null:i.value?new ss(this.source,ge(),i.value):new la(this.source,ge(),i)}else return z(ie(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new la(this.source,Ie(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,i,l){this.node_=t,this.fullyInitialized_=i,this.filtered_=l}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(oe(t))return this.isFullyInitialized()&&!this.filtered_;const i=ie(t);return this.isCompleteForChild(i)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function kA(a,t,i,l){const o=[],f=[];return t.forEach(h=>{h.type==="child_changed"&&a.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&f.push(CA(h.childName,h.snapshotNode))}),pl(a,o,"child_removed",t,l,i),pl(a,o,"child_added",t,l,i),pl(a,o,"child_moved",f,l,i),pl(a,o,"child_changed",t,l,i),pl(a,o,"value",t,l,i),o}function pl(a,t,i,l,o,f){const h=l.filter(m=>m.type===i);h.sort((m,g)=>UA(a,m,g)),h.forEach(m=>{const g=LA(a,m,f);o.forEach(p=>{p.respondsTo(m.type)&&t.push(p.createEvent(g,a.query_))})})}function LA(a,t,i){return t.type==="value"||t.type==="child_removed"||(t.prevName=i.getPredecessorChildName(t.childName,t.snapshotNode,a.index_)),t}function UA(a,t,i){if(t.childName==null||i.childName==null)throw ua("Should only compare child_ events.");const l=new se(t.childName,t.snapshotNode),o=new se(i.childName,i.snapshotNode);return a.index_.compare(l,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(a,t){return{eventCache:a,serverCache:t}}function bl(a,t,i,l){return Xo(new Ai(t,i,l),a.serverCache)}function s0(a,t,i,l){return Xo(a.eventCache,new Ai(t,i,l))}function Uo(a){return a.eventCache.isFullyInitialized()?a.eventCache.getNode():null}function as(a){return a.serverCache.isFullyInitialized()?a.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qf;const zA=()=>(qf||(qf=new wt(Sw)),qf);class Me{static fromObject(t){let i=new Me(null);return ot(t,(l,o)=>{i=i.set(new xe(l),o)}),i}constructor(t,i=zA()){this.value=t,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,i){if(this.value!=null&&i(this.value))return{path:ge(),value:this.value};if(oe(t))return null;{const l=ie(t),o=this.children.get(l);if(o!==null){const f=o.findRootMostMatchingPathAndValue(Ie(t),i);return f!=null?{path:je(new xe(l),f.path),value:f.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(oe(t))return this;{const i=ie(t),l=this.children.get(i);return l!==null?l.subtree(Ie(t)):new Me(null)}}set(t,i){if(oe(t))return new Me(i,this.children);{const l=ie(t),f=(this.children.get(l)||new Me(null)).set(Ie(t),i),h=this.children.insert(l,f);return new Me(this.value,h)}}remove(t){if(oe(t))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const i=ie(t),l=this.children.get(i);if(l){const o=l.remove(Ie(t));let f;return o.isEmpty()?f=this.children.remove(i):f=this.children.insert(i,o),this.value===null&&f.isEmpty()?new Me(null):new Me(this.value,f)}else return this}}get(t){if(oe(t))return this.value;{const i=ie(t),l=this.children.get(i);return l?l.get(Ie(t)):null}}setTree(t,i){if(oe(t))return i;{const l=ie(t),f=(this.children.get(l)||new Me(null)).setTree(Ie(t),i);let h;return f.isEmpty()?h=this.children.remove(l):h=this.children.insert(l,f),new Me(this.value,h)}}fold(t){return this.fold_(ge(),t)}fold_(t,i){const l={};return this.children.inorderTraversal((o,f)=>{l[o]=f.fold_(je(t,o),i)}),i(t,this.value,l)}findOnPath(t,i){return this.findOnPath_(t,ge(),i)}findOnPath_(t,i,l){const o=this.value?l(i,this.value):!1;if(o)return o;if(oe(t))return null;{const f=ie(t),h=this.children.get(f);return h?h.findOnPath_(Ie(t),je(i,f),l):null}}foreachOnPath(t,i){return this.foreachOnPath_(t,ge(),i)}foreachOnPath_(t,i,l){if(oe(t))return this;{this.value&&l(i,this.value);const o=ie(t),f=this.children.get(o);return f?f.foreachOnPath_(Ie(t),je(i,o),l):new Me(null)}}foreach(t){this.foreach_(ge(),t)}foreach_(t,i){this.children.inorderTraversal((l,o)=>{o.foreach_(je(t,l),i)}),this.value&&i(t,this.value)}foreachChild(t){this.children.inorderTraversal((i,l)=>{l.value&&t(i,l.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.writeTree_=t}static empty(){return new ln(new Me(null))}}function Sl(a,t,i){if(oe(t))return new ln(new Me(i));{const l=a.writeTree_.findRootMostValueAndPath(t);if(l!=null){const o=l.path;let f=l.value;const h=ht(o,t);return f=f.updateChild(h,i),new ln(a.writeTree_.set(o,f))}else{const o=new Me(i),f=a.writeTree_.setTree(t,o);return new ln(f)}}}function ih(a,t,i){let l=a;return ot(i,(o,f)=>{l=Sl(l,je(t,o),f)}),l}function _y(a,t){if(oe(t))return ln.empty();{const i=a.writeTree_.setTree(t,new Me(null));return new ln(i)}}function sh(a,t){return rs(a,t)!=null}function rs(a,t){const i=a.writeTree_.findRootMostValueAndPath(t);return i!=null?a.writeTree_.get(i.path).getChild(ht(i.path,t)):null}function yy(a){const t=[],i=a.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Be,(l,o)=>{t.push(new se(l,o))}):a.writeTree_.children.inorderTraversal((l,o)=>{o.value!=null&&t.push(new se(l,o.value))}),t}function Ti(a,t){if(oe(t))return a;{const i=rs(a,t);return i!=null?new ln(new Me(i)):new ln(a.writeTree_.subtree(t))}}function ah(a){return a.writeTree_.isEmpty()}function ra(a,t){return a0(ge(),a.writeTree_,t)}function a0(a,t,i){if(t.value!=null)return i.updateChild(a,t.value);{let l=null;return t.children.inorderTraversal((o,f)=>{o===".priority"?(z(f.value!==null,"Priority writes must always be leaf nodes"),l=f.value):i=a0(je(a,o),f,i)}),!i.getChild(a).isEmpty()&&l!==null&&(i=i.updateChild(je(a,".priority"),l)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(a,t){return u0(t,a)}function HA(a,t,i,l,o){z(l>a.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),a.allWrites.push({path:t,snap:i,writeId:l,visible:o}),o&&(a.visibleWrites=Sl(a.visibleWrites,t,i)),a.lastWriteId=l}function jA(a,t,i,l){z(l>a.lastWriteId,"Stacking an older merge on top of newer ones"),a.allWrites.push({path:t,children:i,writeId:l,visible:!0}),a.visibleWrites=ih(a.visibleWrites,t,i),a.lastWriteId=l}function BA(a,t){for(let i=0;i<a.allWrites.length;i++){const l=a.allWrites[i];if(l.writeId===t)return l}return null}function qA(a,t){const i=a.allWrites.findIndex(m=>m.writeId===t);z(i>=0,"removeWrite called with nonexistent writeId.");const l=a.allWrites[i];a.allWrites.splice(i,1);let o=l.visible,f=!1,h=a.allWrites.length-1;for(;o&&h>=0;){const m=a.allWrites[h];m.visible&&(h>=i&&VA(m,l.path)?o=!1:Kt(l.path,m.path)&&(f=!0)),h--}if(o){if(f)return GA(a),!0;if(l.snap)a.visibleWrites=_y(a.visibleWrites,l.path);else{const m=l.children;ot(m,g=>{a.visibleWrites=_y(a.visibleWrites,je(l.path,g))})}return!0}else return!1}function VA(a,t){if(a.snap)return Kt(a.path,t);for(const i in a.children)if(a.children.hasOwnProperty(i)&&Kt(je(a.path,i),t))return!0;return!1}function GA(a){a.visibleWrites=l0(a.allWrites,PA,ge()),a.allWrites.length>0?a.lastWriteId=a.allWrites[a.allWrites.length-1].writeId:a.lastWriteId=-1}function PA(a){return a.visible}function l0(a,t,i){let l=ln.empty();for(let o=0;o<a.length;++o){const f=a[o];if(t(f)){const h=f.path;let m;if(f.snap)Kt(i,h)?(m=ht(i,h),l=Sl(l,m,f.snap)):Kt(h,i)&&(m=ht(h,i),l=Sl(l,ge(),f.snap.getChild(m)));else if(f.children){if(Kt(i,h))m=ht(i,h),l=ih(l,m,f.children);else if(Kt(h,i))if(m=ht(h,i),oe(m))l=ih(l,ge(),f.children);else{const g=ta(f.children,ie(m));if(g){const p=g.getChild(Ie(m));l=Sl(l,ge(),p)}}}else throw ua("WriteRecord should have .snap or .children")}}return l}function r0(a,t,i,l,o){if(!l&&!o){const f=rs(a.visibleWrites,t);if(f!=null)return f;{const h=Ti(a.visibleWrites,t);if(ah(h))return i;if(i==null&&!sh(h,ge()))return null;{const m=i||F.EMPTY_NODE;return ra(h,m)}}}else{const f=Ti(a.visibleWrites,t);if(!o&&ah(f))return i;if(!o&&i==null&&!sh(f,ge()))return null;{const h=function(p){return(p.visible||o)&&(!l||!~l.indexOf(p.writeId))&&(Kt(p.path,t)||Kt(t,p.path))},m=l0(a.allWrites,h,t),g=i||F.EMPTY_NODE;return ra(m,g)}}}function YA(a,t,i){let l=F.EMPTY_NODE;const o=rs(a.visibleWrites,t);if(o)return o.isLeafNode()||o.forEachChild(Be,(f,h)=>{l=l.updateImmediateChild(f,h)}),l;if(i){const f=Ti(a.visibleWrites,t);return i.forEachChild(Be,(h,m)=>{const g=ra(Ti(f,new xe(h)),m);l=l.updateImmediateChild(h,g)}),yy(f).forEach(h=>{l=l.updateImmediateChild(h.name,h.node)}),l}else{const f=Ti(a.visibleWrites,t);return yy(f).forEach(h=>{l=l.updateImmediateChild(h.name,h.node)}),l}}function QA(a,t,i,l,o){z(l||o,"Either existingEventSnap or existingServerSnap must exist");const f=je(t,i);if(sh(a.visibleWrites,f))return null;{const h=Ti(a.visibleWrites,f);return ah(h)?o.getChild(i):ra(h,o.getChild(i))}}function FA(a,t,i,l){const o=je(t,i),f=rs(a.visibleWrites,o);if(f!=null)return f;if(l.isCompleteForChild(i)){const h=Ti(a.visibleWrites,o);return ra(h,l.getNode().getImmediateChild(i))}else return null}function KA(a,t){return rs(a.visibleWrites,t)}function XA(a,t,i,l,o,f,h){let m;const g=Ti(a.visibleWrites,t),p=rs(g,ge());if(p!=null)m=p;else if(i!=null)m=ra(g,i);else return[];if(m=m.withIndex(h),!m.isEmpty()&&!m.isLeafNode()){const b=[],y=h.getCompare(),S=f?m.getReverseIteratorFrom(l,h):m.getIteratorFrom(l,h);let R=S.getNext();for(;R&&b.length<o;)y(R,l)!==0&&b.push(R),R=S.getNext();return b}else return[]}function ZA(){return{visibleWrites:ln.empty(),allWrites:[],lastWriteId:-1}}function zo(a,t,i,l){return r0(a.writeTree,a.treePath,t,i,l)}function Yh(a,t){return YA(a.writeTree,a.treePath,t)}function vy(a,t,i,l){return QA(a.writeTree,a.treePath,t,i,l)}function Ho(a,t){return KA(a.writeTree,je(a.treePath,t))}function WA(a,t,i,l,o,f){return XA(a.writeTree,a.treePath,t,i,l,o,f)}function Qh(a,t,i){return FA(a.writeTree,a.treePath,t,i)}function o0(a,t){return u0(je(a.treePath,t),a.writeTree)}function u0(a,t){return{treePath:a,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.changeMap=new Map}trackChildChange(t){const i=t.type,l=t.childName;z(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),z(l!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(l);if(o){const f=o.type;if(i==="child_added"&&f==="child_removed")this.changeMap.set(l,Rl(l,t.snapshotNode,o.snapshotNode));else if(i==="child_removed"&&f==="child_added")this.changeMap.delete(l);else if(i==="child_removed"&&f==="child_changed")this.changeMap.set(l,xl(l,o.oldSnap));else if(i==="child_changed"&&f==="child_added")this.changeMap.set(l,aa(l,t.snapshotNode));else if(i==="child_changed"&&f==="child_changed")this.changeMap.set(l,Rl(l,t.snapshotNode,o.oldSnap));else throw ua("Illegal combination of changes: "+t+" occurred after "+o)}else this.changeMap.set(l,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{getCompleteChild(t){return null}getChildAfterChild(t,i,l){return null}}const c0=new $A;class Fh{constructor(t,i,l=null){this.writes_=t,this.viewCache_=i,this.optCompleteServerCache_=l}getCompleteChild(t){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(t))return i.getNode().getImmediateChild(t);{const l=this.optCompleteServerCache_!=null?new Ai(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qh(this.writes_,t,l)}}getChildAfterChild(t,i,l){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:as(this.viewCache_),f=WA(this.writes_,o,i,1,l,t);return f.length===0?null:f[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(a){return{filter:a}}function tN(a,t){z(t.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),z(t.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed")}function nN(a,t,i,l,o){const f=new JA;let h,m;if(i.type===sn.OVERWRITE){const p=i;p.source.fromUser?h=lh(a,t,p.path,p.snap,l,o,f):(z(p.source.fromServer,"Unknown source."),m=p.source.tagged||t.serverCache.isFiltered()&&!oe(p.path),h=jo(a,t,p.path,p.snap,l,o,m,f))}else if(i.type===sn.MERGE){const p=i;p.source.fromUser?h=sN(a,t,p.path,p.children,l,o,f):(z(p.source.fromServer,"Unknown source."),m=p.source.tagged||t.serverCache.isFiltered(),h=rh(a,t,p.path,p.children,l,o,m,f))}else if(i.type===sn.ACK_USER_WRITE){const p=i;p.revert?h=rN(a,t,p.path,l,o,f):h=aN(a,t,p.path,p.affectedTree,l,o,f)}else if(i.type===sn.LISTEN_COMPLETE)h=lN(a,t,i.path,l,f);else throw ua("Unknown operation type: "+i.type);const g=f.getChanges();return iN(t,h,g),{viewCache:h,changes:g}}function iN(a,t,i){const l=t.eventCache;if(l.isFullyInitialized()){const o=l.getNode().isLeafNode()||l.getNode().isEmpty(),f=Uo(a);(i.length>0||!a.eventCache.isFullyInitialized()||o&&!l.getNode().equals(f)||!l.getNode().getPriority().equals(f.getPriority()))&&i.push(n0(Uo(t)))}}function f0(a,t,i,l,o,f){const h=t.eventCache;if(Ho(l,i)!=null)return t;{let m,g;if(oe(i))if(z(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const p=as(t),b=p instanceof F?p:F.EMPTY_NODE,y=Yh(l,b);m=a.filter.updateFullNode(t.eventCache.getNode(),y,f)}else{const p=zo(l,as(t));m=a.filter.updateFullNode(t.eventCache.getNode(),p,f)}else{const p=ie(i);if(p===".priority"){z(wi(i)===1,"Can't have a priority with additional path components");const b=h.getNode();g=t.serverCache.getNode();const y=vy(l,i,b,g);y!=null?m=a.filter.updatePriority(b,y):m=h.getNode()}else{const b=Ie(i);let y;if(h.isCompleteForChild(p)){g=t.serverCache.getNode();const S=vy(l,i,h.getNode(),g);S!=null?y=h.getNode().getImmediateChild(p).updateChild(b,S):y=h.getNode().getImmediateChild(p)}else y=Qh(l,p,t.serverCache);y!=null?m=a.filter.updateChild(h.getNode(),p,y,b,o,f):m=h.getNode()}}return bl(t,m,h.isFullyInitialized()||oe(i),a.filter.filtersNodes())}}function jo(a,t,i,l,o,f,h,m){const g=t.serverCache;let p;const b=h?a.filter:a.filter.getIndexedFilter();if(oe(i))p=b.updateFullNode(g.getNode(),l,null);else if(b.filtersNodes()&&!g.isFiltered()){const R=g.getNode().updateChild(i,l);p=b.updateFullNode(g.getNode(),R,null)}else{const R=ie(i);if(!g.isCompleteForPath(i)&&wi(i)>1)return t;const U=Ie(i),fe=g.getNode().getImmediateChild(R).updateChild(U,l);R===".priority"?p=b.updatePriority(g.getNode(),fe):p=b.updateChild(g.getNode(),R,fe,U,c0,null)}const y=s0(t,p,g.isFullyInitialized()||oe(i),b.filtersNodes()),S=new Fh(o,y,f);return f0(a,y,i,o,S,m)}function lh(a,t,i,l,o,f,h){const m=t.eventCache;let g,p;const b=new Fh(o,t,f);if(oe(i))p=a.filter.updateFullNode(t.eventCache.getNode(),l,h),g=bl(t,p,!0,a.filter.filtersNodes());else{const y=ie(i);if(y===".priority")p=a.filter.updatePriority(t.eventCache.getNode(),l),g=bl(t,p,m.isFullyInitialized(),m.isFiltered());else{const S=Ie(i),R=m.getNode().getImmediateChild(y);let U;if(oe(S))U=l;else{const G=b.getCompleteChild(y);G!=null?Uh(S)===".priority"&&G.getChild(Xv(S)).isEmpty()?U=G:U=G.updateChild(S,l):U=F.EMPTY_NODE}if(R.equals(U))g=t;else{const G=a.filter.updateChild(m.getNode(),y,U,S,b,h);g=bl(t,G,m.isFullyInitialized(),a.filter.filtersNodes())}}}return g}function by(a,t){return a.eventCache.isCompleteForChild(t)}function sN(a,t,i,l,o,f,h){let m=t;return l.foreach((g,p)=>{const b=je(i,g);by(t,ie(b))&&(m=lh(a,m,b,p,o,f,h))}),l.foreach((g,p)=>{const b=je(i,g);by(t,ie(b))||(m=lh(a,m,b,p,o,f,h))}),m}function Sy(a,t,i){return i.foreach((l,o)=>{t=t.updateChild(l,o)}),t}function rh(a,t,i,l,o,f,h,m){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,p;oe(i)?p=l:p=new Me(null).setTree(i,l);const b=t.serverCache.getNode();return p.children.inorderTraversal((y,S)=>{if(b.hasChild(y)){const R=t.serverCache.getNode().getImmediateChild(y),U=Sy(a,R,S);g=jo(a,g,new xe(y),U,o,f,h,m)}}),p.children.inorderTraversal((y,S)=>{const R=!t.serverCache.isCompleteForChild(y)&&S.value===null;if(!b.hasChild(y)&&!R){const U=t.serverCache.getNode().getImmediateChild(y),G=Sy(a,U,S);g=jo(a,g,new xe(y),G,o,f,h,m)}}),g}function aN(a,t,i,l,o,f,h){if(Ho(o,i)!=null)return t;const m=t.serverCache.isFiltered(),g=t.serverCache;if(l.value!=null){if(oe(i)&&g.isFullyInitialized()||g.isCompleteForPath(i))return jo(a,t,i,g.getNode().getChild(i),o,f,m,h);if(oe(i)){let p=new Me(null);return g.getNode().forEachChild(ea,(b,y)=>{p=p.set(new xe(b),y)}),rh(a,t,i,p,o,f,m,h)}else return t}else{let p=new Me(null);return l.foreach((b,y)=>{const S=je(i,b);g.isCompleteForPath(S)&&(p=p.set(b,g.getNode().getChild(S)))}),rh(a,t,i,p,o,f,m,h)}}function lN(a,t,i,l,o){const f=t.serverCache,h=s0(t,f.getNode(),f.isFullyInitialized()||oe(i),f.isFiltered());return f0(a,h,i,l,c0,o)}function rN(a,t,i,l,o,f){let h;if(Ho(l,i)!=null)return t;{const m=new Fh(l,t,o),g=t.eventCache.getNode();let p;if(oe(i)||ie(i)===".priority"){let b;if(t.serverCache.isFullyInitialized())b=zo(l,as(t));else{const y=t.serverCache.getNode();z(y instanceof F,"serverChildren would be complete if leaf node"),b=Yh(l,y)}b=b,p=a.filter.updateFullNode(g,b,f)}else{const b=ie(i);let y=Qh(l,b,t.serverCache);y==null&&t.serverCache.isCompleteForChild(b)&&(y=g.getImmediateChild(b)),y!=null?p=a.filter.updateChild(g,b,y,Ie(i),m,f):t.eventCache.getNode().hasChild(b)?p=a.filter.updateChild(g,b,F.EMPTY_NODE,Ie(i),m,f):p=g,p.isEmpty()&&t.serverCache.isFullyInitialized()&&(h=zo(l,as(t)),h.isLeafNode()&&(p=a.filter.updateFullNode(p,h,f)))}return h=t.serverCache.isFullyInitialized()||Ho(l,ge())!=null,bl(t,p,h,a.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(t,i){this.query_=t,this.eventRegistrations_=[];const l=this.query_._queryParams,o=new Bh(l.getIndex()),f=AA(l);this.processor_=eN(f);const h=i.serverCache,m=i.eventCache,g=o.updateFullNode(F.EMPTY_NODE,h.getNode(),null),p=f.updateFullNode(F.EMPTY_NODE,m.getNode(),null),b=new Ai(g,h.isFullyInitialized(),o.filtersNodes()),y=new Ai(p,m.isFullyInitialized(),f.filtersNodes());this.viewCache_=Xo(y,b),this.eventGenerator_=new IA(this.query_)}get query(){return this.query_}}function uN(a){return a.viewCache_.serverCache.getNode()}function cN(a){return Uo(a.viewCache_)}function fN(a,t){const i=as(a.viewCache_);return i&&(a.query._queryParams.loadsAllData()||!oe(t)&&!i.getImmediateChild(ie(t)).isEmpty())?i.getChild(t):null}function Ey(a){return a.eventRegistrations_.length===0}function hN(a,t){a.eventRegistrations_.push(t)}function Ty(a,t,i){const l=[];if(i){z(t==null,"A cancel should cancel all event registrations.");const o=a.query._path;a.eventRegistrations_.forEach(f=>{const h=f.createCancelEvent(i,o);h&&l.push(h)})}if(t){let o=[];for(let f=0;f<a.eventRegistrations_.length;++f){const h=a.eventRegistrations_[f];if(!h.matches(t))o.push(h);else if(t.hasAnyCallback()){o=o.concat(a.eventRegistrations_.slice(f+1));break}}a.eventRegistrations_=o}else a.eventRegistrations_=[];return l}function Cy(a,t,i,l){t.type===sn.MERGE&&t.source.queryId!==null&&(z(as(a.viewCache_),"We should always have a full cache before handling merges"),z(Uo(a.viewCache_),"Missing event cache, even though we have a server cache"));const o=a.viewCache_,f=nN(a.processor_,o,t,i,l);return tN(a.processor_,f.viewCache),z(f.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),a.viewCache_=f.viewCache,h0(a,f.changes,f.viewCache.eventCache.getNode(),null)}function dN(a,t){const i=a.viewCache_.eventCache,l=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Be,(f,h)=>{l.push(aa(f,h))}),i.isFullyInitialized()&&l.push(n0(i.getNode())),h0(a,l,i.getNode(),t)}function h0(a,t,i,l){const o=l?[l]:a.eventRegistrations_;return kA(a.eventGenerator_,t,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo;class d0{constructor(){this.views=new Map}}function mN(a){z(!Bo,"__referenceConstructor has already been defined"),Bo=a}function pN(){return z(Bo,"Reference.ts has not been loaded"),Bo}function gN(a){return a.views.size===0}function Kh(a,t,i,l){const o=t.source.queryId;if(o!==null){const f=a.views.get(o);return z(f!=null,"SyncTree gave us an op for an invalid query."),Cy(f,t,i,l)}else{let f=[];for(const h of a.views.values())f=f.concat(Cy(h,t,i,l));return f}}function m0(a,t,i,l,o){const f=t._queryIdentifier,h=a.views.get(f);if(!h){let m=zo(i,o?l:null),g=!1;m?g=!0:l instanceof F?(m=Yh(i,l),g=!1):(m=F.EMPTY_NODE,g=!1);const p=Xo(new Ai(m,g,!1),new Ai(l,o,!1));return new oN(t,p)}return h}function _N(a,t,i,l,o,f){const h=m0(a,t,l,o,f);return a.views.has(t._queryIdentifier)||a.views.set(t._queryIdentifier,h),hN(h,i),dN(h,i)}function yN(a,t,i,l){const o=t._queryIdentifier,f=[];let h=[];const m=Ni(a);if(o==="default")for(const[g,p]of a.views.entries())h=h.concat(Ty(p,i,l)),Ey(p)&&(a.views.delete(g),p.query._queryParams.loadsAllData()||f.push(p.query));else{const g=a.views.get(o);g&&(h=h.concat(Ty(g,i,l)),Ey(g)&&(a.views.delete(o),g.query._queryParams.loadsAllData()||f.push(g.query)))}return m&&!Ni(a)&&f.push(new(pN())(t._repo,t._path)),{removed:f,events:h}}function p0(a){const t=[];for(const i of a.views.values())i.query._queryParams.loadsAllData()||t.push(i);return t}function Ci(a,t){let i=null;for(const l of a.views.values())i=i||fN(l,t);return i}function g0(a,t){if(t._queryParams.loadsAllData())return Wo(a);{const l=t._queryIdentifier;return a.views.get(l)}}function _0(a,t){return g0(a,t)!=null}function Ni(a){return Wo(a)!=null}function Wo(a){for(const t of a.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo;function vN(a){z(!qo,"__referenceConstructor has already been defined"),qo=a}function bN(){return z(qo,"Reference.ts has not been loaded"),qo}let SN=1;class wy{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Me(null),this.pendingWriteTree_=ZA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function y0(a,t,i,l,o){return HA(a.pendingWriteTree_,t,i,l,o),o?pa(a,new ss(Vh(),t,i)):[]}function EN(a,t,i,l){jA(a.pendingWriteTree_,t,i,l);const o=Me.fromObject(i);return pa(a,new la(Vh(),t,o))}function yi(a,t,i=!1){const l=BA(a.pendingWriteTree_,t);if(qA(a.pendingWriteTree_,t)){let f=new Me(null);return l.snap!=null?f=f.set(ge(),!0):ot(l.children,h=>{f=f.set(new xe(h),!0)}),pa(a,new Lo(l.path,f,i))}else return[]}function Gl(a,t,i){return pa(a,new ss(Gh(),t,i))}function TN(a,t,i){const l=Me.fromObject(i);return pa(a,new la(Gh(),t,l))}function CN(a,t){return pa(a,new Dl(Gh(),t))}function wN(a,t,i){const l=Zh(a,i);if(l){const o=Wh(l),f=o.path,h=o.queryId,m=ht(f,t),g=new Dl(Ph(h),m);return Jh(a,f,g)}else return[]}function Vo(a,t,i,l,o=!1){const f=t._path,h=a.syncPointTree_.get(f);let m=[];if(h&&(t._queryIdentifier==="default"||_0(h,t))){const g=yN(h,t,i,l);gN(h)&&(a.syncPointTree_=a.syncPointTree_.remove(f));const p=g.removed;if(m=g.events,!o){const b=p.findIndex(S=>S._queryParams.loadsAllData())!==-1,y=a.syncPointTree_.findOnPath(f,(S,R)=>Ni(R));if(b&&!y){const S=a.syncPointTree_.subtree(f);if(!S.isEmpty()){const R=xN(S);for(let U=0;U<R.length;++U){const G=R[U],fe=G.query,_e=E0(a,G);a.listenProvider_.startListening(El(fe),Ml(a,fe),_e.hashFn,_e.onComplete)}}}!y&&p.length>0&&!l&&(b?a.listenProvider_.stopListening(El(t),null):p.forEach(S=>{const R=a.queryToTagMap.get(Jo(S));a.listenProvider_.stopListening(El(S),R)}))}RN(a,p)}return m}function v0(a,t,i,l){const o=Zh(a,l);if(o!=null){const f=Wh(o),h=f.path,m=f.queryId,g=ht(h,t),p=new ss(Ph(m),g,i);return Jh(a,h,p)}else return[]}function AN(a,t,i,l){const o=Zh(a,l);if(o){const f=Wh(o),h=f.path,m=f.queryId,g=ht(h,t),p=Me.fromObject(i),b=new la(Ph(m),g,p);return Jh(a,h,b)}else return[]}function oh(a,t,i,l=!1){const o=t._path;let f=null,h=!1;a.syncPointTree_.foreachOnPath(o,(S,R)=>{const U=ht(S,o);f=f||Ci(R,U),h=h||Ni(R)});let m=a.syncPointTree_.get(o);m?(h=h||Ni(m),f=f||Ci(m,ge())):(m=new d0,a.syncPointTree_=a.syncPointTree_.set(o,m));let g;f!=null?g=!0:(g=!1,f=F.EMPTY_NODE,a.syncPointTree_.subtree(o).foreachChild((R,U)=>{const G=Ci(U,ge());G&&(f=f.updateImmediateChild(R,G))}));const p=_0(m,t);if(!p&&!t._queryParams.loadsAllData()){const S=Jo(t);z(!a.queryToTagMap.has(S),"View does not exist, but we have a tag");const R=ON();a.queryToTagMap.set(S,R),a.tagToQueryMap.set(R,S)}const b=Zo(a.pendingWriteTree_,o);let y=_N(m,t,i,b,f,g);if(!p&&!h&&!l){const S=g0(m,t);y=y.concat(DN(a,t,S))}return y}function Xh(a,t,i){const o=a.pendingWriteTree_,f=a.syncPointTree_.findOnPath(t,(h,m)=>{const g=ht(h,t),p=Ci(m,g);if(p)return p});return r0(o,t,f,i,!0)}function NN(a,t){const i=t._path;let l=null;a.syncPointTree_.foreachOnPath(i,(p,b)=>{const y=ht(p,i);l=l||Ci(b,y)});let o=a.syncPointTree_.get(i);o?l=l||Ci(o,ge()):(o=new d0,a.syncPointTree_=a.syncPointTree_.set(i,o));const f=l!=null,h=f?new Ai(l,!0,!1):null,m=Zo(a.pendingWriteTree_,t._path),g=m0(o,t,m,f?h.getNode():F.EMPTY_NODE,f);return cN(g)}function pa(a,t){return b0(t,a.syncPointTree_,null,Zo(a.pendingWriteTree_,ge()))}function b0(a,t,i,l){if(oe(a.path))return S0(a,t,i,l);{const o=t.get(ge());i==null&&o!=null&&(i=Ci(o,ge()));let f=[];const h=ie(a.path),m=a.operationForChild(h),g=t.children.get(h);if(g&&m){const p=i?i.getImmediateChild(h):null,b=o0(l,h);f=f.concat(b0(m,g,p,b))}return o&&(f=f.concat(Kh(o,a,l,i))),f}}function S0(a,t,i,l){const o=t.get(ge());i==null&&o!=null&&(i=Ci(o,ge()));let f=[];return t.children.inorderTraversal((h,m)=>{const g=i?i.getImmediateChild(h):null,p=o0(l,h),b=a.operationForChild(h);b&&(f=f.concat(S0(b,m,g,p)))}),o&&(f=f.concat(Kh(o,a,l,i))),f}function E0(a,t){const i=t.query,l=Ml(a,i);return{hashFn:()=>(uN(t)||F.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return l?wN(a,i._path,l):CN(a,i._path);{const f=Cw(o,i);return Vo(a,i,null,f)}}}}function Ml(a,t){const i=Jo(t);return a.queryToTagMap.get(i)}function Jo(a){return a._path.toString()+"$"+a._queryIdentifier}function Zh(a,t){return a.tagToQueryMap.get(t)}function Wh(a){const t=a.indexOf("$");return z(t!==-1&&t<a.length-1,"Bad queryKey."),{queryId:a.substr(t+1),path:new xe(a.substr(0,t))}}function Jh(a,t,i){const l=a.syncPointTree_.get(t);z(l,"Missing sync point for query tag that we're tracking");const o=Zo(a.pendingWriteTree_,t);return Kh(l,i,o,null)}function xN(a){return a.fold((t,i,l)=>{if(i&&Ni(i))return[Wo(i)];{let o=[];return i&&(o=p0(i)),ot(l,(f,h)=>{o=o.concat(h)}),o}})}function El(a){return a._queryParams.loadsAllData()&&!a._queryParams.isDefault()?new(bN())(a._repo,a._path):a}function RN(a,t){for(let i=0;i<t.length;++i){const l=t[i];if(!l._queryParams.loadsAllData()){const o=Jo(l),f=a.queryToTagMap.get(o);a.queryToTagMap.delete(o),a.tagToQueryMap.delete(f)}}}function ON(){return SN++}function DN(a,t,i){const l=t._path,o=Ml(a,t),f=E0(a,i),h=a.listenProvider_.startListening(El(t),o,f.hashFn,f.onComplete),m=a.syncPointTree_.subtree(l);if(o)z(!Ni(m.value),"If we're adding a query, it shouldn't be shadowed");else{const g=m.fold((p,b,y)=>{if(!oe(p)&&b&&Ni(b))return[Wo(b).query];{let S=[];return b&&(S=S.concat(p0(b).map(R=>R.query))),ot(y,(R,U)=>{S=S.concat(U)}),S}});for(let p=0;p<g.length;++p){const b=g[p];a.listenProvider_.stopListening(El(b),Ml(a,b))}}return h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(t){this.node_=t}getImmediateChild(t){const i=this.node_.getImmediateChild(t);return new $h(i)}node(){return this.node_}}class ed{constructor(t,i){this.syncTree_=t,this.path_=i}getImmediateChild(t){const i=je(this.path_,t);return new ed(this.syncTree_,i)}node(){return Xh(this.syncTree_,this.path_)}}const MN=function(a){return a=a||{},a.timestamp=a.timestamp||new Date().getTime(),a},Ay=function(a,t,i){if(!a||typeof a!="object")return a;if(z(".sv"in a,"Unexpected leaf node or priority contents"),typeof a[".sv"]=="string")return IN(a[".sv"],t,i);if(typeof a[".sv"]=="object")return kN(a[".sv"],t);z(!1,"Unexpected server value: "+JSON.stringify(a,null,2))},IN=function(a,t,i){switch(a){case"timestamp":return i.timestamp;default:z(!1,"Unexpected server value: "+a)}},kN=function(a,t,i){a.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(a,null,2));const l=a.increment;typeof l!="number"&&z(!1,"Unexpected increment value: "+l);const o=t.node();if(z(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return l;const h=o.getValue();return typeof h!="number"?l:h+l},T0=function(a,t,i,l){return td(t,new ed(i,a),l)},C0=function(a,t,i){return td(a,new $h(t),i)};function td(a,t,i){const l=a.getPriority().val(),o=Ay(l,t.getImmediateChild(".priority"),i);let f;if(a.isLeafNode()){const h=a,m=Ay(h.getValue(),t,i);return m!==h.getValue()||o!==h.getPriority().val()?new et(m,Ze(o)):a}else{const h=a;return f=h,o!==h.getPriority().val()&&(f=f.updatePriority(new et(o))),h.forEachChild(Be,(m,g)=>{const p=td(g,t.getImmediateChild(m),i);p!==g&&(f=f.updateImmediateChild(m,p))}),f}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(t="",i=null,l={children:{},childCount:0}){this.name=t,this.parent=i,this.node=l}}function id(a,t){let i=t instanceof xe?t:new xe(t),l=a,o=ie(i);for(;o!==null;){const f=ta(l.node.children,o)||{children:{},childCount:0};l=new nd(o,l,f),i=Ie(i),o=ie(i)}return l}function ga(a){return a.node.value}function w0(a,t){a.node.value=t,uh(a)}function A0(a){return a.node.childCount>0}function LN(a){return ga(a)===void 0&&!A0(a)}function $o(a,t){ot(a.node.children,(i,l)=>{t(new nd(i,a,l))})}function N0(a,t,i,l){i&&t(a),$o(a,o=>{N0(o,t,!0)})}function UN(a,t,i){let l=a.parent;for(;l!==null;){if(t(l))return!0;l=l.parent}return!1}function Pl(a){return new xe(a.parent===null?a.name:Pl(a.parent)+"/"+a.name)}function uh(a){a.parent!==null&&zN(a.parent,a.name,a)}function zN(a,t,i){const l=LN(i),o=dn(a.node.children,t);l&&o?(delete a.node.children[t],a.node.childCount--,uh(a)):!l&&!o&&(a.node.children[t]=i.node,a.node.childCount++,uh(a))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=/[\[\].#$\/\u0000-\u001F\u007F]/,jN=/[\[\].#$\u0000-\u001F\u007F]/,Vf=10*1024*1024,sd=function(a){return typeof a=="string"&&a.length!==0&&!HN.test(a)},x0=function(a){return typeof a=="string"&&a.length!==0&&!jN.test(a)},BN=function(a){return a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),x0(a)},qN=function(a){return a===null||typeof a=="string"||typeof a=="number"&&!Dh(a)||a&&typeof a=="object"&&dn(a,".sv")},R0=function(a,t,i,l){l&&t===void 0||eu(Go(a,"value"),t,i)},eu=function(a,t,i){const l=i instanceof xe?new sA(i,a):i;if(t===void 0)throw new Error(a+"contains undefined "+Zi(l));if(typeof t=="function")throw new Error(a+"contains a function "+Zi(l)+" with contents = "+t.toString());if(Dh(t))throw new Error(a+"contains "+t.toString()+" "+Zi(l));if(typeof t=="string"&&t.length>Vf/3&&Po(t)>Vf)throw new Error(a+"contains a string greater than "+Vf+" utf8 bytes "+Zi(l)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let o=!1,f=!1;if(ot(t,(h,m)=>{if(h===".value")o=!0;else if(h!==".priority"&&h!==".sv"&&(f=!0,!sd(h)))throw new Error(a+" contains an invalid key ("+h+") "+Zi(l)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);aA(l,h),eu(a,m,l),lA(l)}),o&&f)throw new Error(a+' contains ".value" child '+Zi(l)+" in addition to actual children.")}},VN=function(a,t){let i,l;for(i=0;i<t.length;i++){l=t[i];const f=Nl(l);for(let h=0;h<f.length;h++)if(!(f[h]===".priority"&&h===f.length-1)){if(!sd(f[h]))throw new Error(a+"contains an invalid key ("+f[h]+") in path "+l.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(iA);let o=null;for(i=0;i<t.length;i++){if(l=t[i],o!==null&&Kt(o,l))throw new Error(a+"contains a path "+o.toString()+" that is ancestor of another path "+l.toString());o=l}},GN=function(a,t,i,l){const o=Go(a,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(o+" must be an object containing the children to replace.");const f=[];ot(t,(h,m)=>{const g=new xe(h);if(eu(o,m,je(i,g)),Uh(g)===".priority"&&!qN(m))throw new Error(o+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");f.push(g)}),VN(o,f)},O0=function(a,t,i,l){if(!x0(i))throw new Error(Go(a,t)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},PN=function(a,t,i,l){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),O0(a,t,i)},ad=function(a,t){if(ie(t)===".info")throw new Error(a+" failed = Can't modify data under /.info/")},YN=function(a,t){const i=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!sd(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!BN(i))throw new Error(Go(a,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function tu(a,t){let i=null;for(let l=0;l<t.length;l++){const o=t[l],f=o.getPath();i!==null&&!zh(f,i.path)&&(a.eventLists_.push(i),i=null),i===null&&(i={events:[],path:f}),i.events.push(o)}i&&a.eventLists_.push(i)}function D0(a,t,i){tu(a,i),M0(a,l=>zh(l,t))}function Xt(a,t,i){tu(a,i),M0(a,l=>Kt(l,t)||Kt(t,l))}function M0(a,t){a.recursionDepth_++;let i=!0;for(let l=0;l<a.eventLists_.length;l++){const o=a.eventLists_[l];if(o){const f=o.path;t(f)?(FN(a.eventLists_[l]),a.eventLists_[l]=null):i=!1}}i&&(a.eventLists_=[]),a.recursionDepth_--}function FN(a){for(let t=0;t<a.events.length;t++){const i=a.events[t];if(i!==null){a.events[t]=null;const l=i.getEventRunner();yl&&rt("event: "+i.toString()),ma(l)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="repo_interrupt",XN=25;class ZN{constructor(t,i,l,o){this.repoInfo_=t,this.forceRestClient_=i,this.authTokenProvider_=l,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QN,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ko(),this.transactionQueueTree_=new nd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function WN(a,t,i){if(a.stats_=kh(a.repoInfo_),a.forceRestClient_||xw())a.server_=new Io(a.repoInfo_,(l,o,f,h)=>{Ny(a,l,o,f,h)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(()=>xy(a,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{We(i)}catch(l){throw new Error("Invalid authOverride provided: "+l)}}a.persistentConnection_=new zn(a.repoInfo_,t,(l,o,f,h)=>{Ny(a,l,o,f,h)},l=>{xy(a,l)},l=>{JN(a,l)},a.authTokenProvider_,a.appCheckProvider_,i),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(l=>{a.server_.refreshAuthToken(l)}),a.appCheckProvider_.addTokenChangeListener(l=>{a.server_.refreshAppCheckToken(l.token)}),a.statsReporter_=Iw(a.repoInfo_,()=>new MA(a.stats_,a.server_)),a.infoData_=new NA,a.infoSyncTree_=new wy({startListening:(l,o,f,h)=>{let m=[];const g=a.infoData_.getNode(l._path);return g.isEmpty()||(m=Gl(a.infoSyncTree_,l._path,g),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),ld(a,"connected",!1),a.serverSyncTree_=new wy({startListening:(l,o,f,h)=>(a.server_.listen(l,f,o,(m,g)=>{const p=h(m,g);Xt(a.eventQueue_,l._path,p)}),[]),stopListening:(l,o)=>{a.server_.unlisten(l,o)}})}function I0(a){const i=a.infoData_.getNode(new xe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function nu(a){return MN({timestamp:I0(a)})}function Ny(a,t,i,l,o){a.dataUpdateCount++;const f=new xe(t);i=a.interceptServerDataCallback_?a.interceptServerDataCallback_(t,i):i;let h=[];if(o)if(l){const g=Eo(i,p=>Ze(p));h=AN(a.serverSyncTree_,f,g,o)}else{const g=Ze(i);h=v0(a.serverSyncTree_,f,g,o)}else if(l){const g=Eo(i,p=>Ze(p));h=TN(a.serverSyncTree_,f,g)}else{const g=Ze(i);h=Gl(a.serverSyncTree_,f,g)}let m=f;h.length>0&&(m=oa(a,f)),Xt(a.eventQueue_,m,h)}function xy(a,t){ld(a,"connected",t),t===!1&&nx(a)}function JN(a,t){ot(t,(i,l)=>{ld(a,i,l)})}function ld(a,t,i){const l=new xe("/.info/"+t),o=Ze(i);a.infoData_.updateSnapshot(l,o);const f=Gl(a.infoSyncTree_,l,o);Xt(a.eventQueue_,l,f)}function rd(a){return a.nextWriteId_++}function $N(a,t,i){const l=NN(a.serverSyncTree_,t);return l!=null?Promise.resolve(l):a.server_.get(t).then(o=>{const f=Ze(o).withIndex(t._queryParams.getIndex());oh(a.serverSyncTree_,t,i,!0);let h;if(t._queryParams.loadsAllData())h=Gl(a.serverSyncTree_,t._path,f);else{const m=Ml(a.serverSyncTree_,t);h=v0(a.serverSyncTree_,t._path,f,m)}return Xt(a.eventQueue_,t._path,h),Vo(a.serverSyncTree_,t,i,null,!0),f},o=>(Yl(a,"get for query "+We(t)+" failed: "+o),Promise.reject(new Error(o))))}function ex(a,t,i,l,o){Yl(a,"set",{path:t.toString(),value:i,priority:l});const f=nu(a),h=Ze(i,l),m=Xh(a.serverSyncTree_,t),g=C0(h,m,f),p=rd(a),b=y0(a.serverSyncTree_,t,g,p,!0);tu(a.eventQueue_,b),a.server_.put(t.toString(),h.val(!0),(S,R)=>{const U=S==="ok";U||dt("set at "+t+" failed: "+S);const G=yi(a.serverSyncTree_,p,!U);Xt(a.eventQueue_,t,G),ch(a,o,S,R)});const y=ud(a,t);oa(a,y),Xt(a.eventQueue_,y,[])}function tx(a,t,i,l){Yl(a,"update",{path:t.toString(),value:i});let o=!0;const f=nu(a),h={};if(ot(i,(m,g)=>{o=!1,h[m]=T0(je(t,m),Ze(g),a.serverSyncTree_,f)}),o)rt("update() called with empty data.  Don't do anything."),ch(a,l,"ok",void 0);else{const m=rd(a),g=EN(a.serverSyncTree_,t,h,m);tu(a.eventQueue_,g),a.server_.merge(t.toString(),i,(p,b)=>{const y=p==="ok";y||dt("update at "+t+" failed: "+p);const S=yi(a.serverSyncTree_,m,!y),R=S.length>0?oa(a,t):t;Xt(a.eventQueue_,R,S),ch(a,l,p,b)}),ot(i,p=>{const b=ud(a,je(t,p));oa(a,b)}),Xt(a.eventQueue_,t,[])}}function nx(a){Yl(a,"onDisconnectEvents");const t=nu(a),i=ko();nh(a.onDisconnect_,ge(),(o,f)=>{const h=T0(o,f,a.serverSyncTree_,t);i0(i,o,h)});let l=[];nh(i,ge(),(o,f)=>{l=l.concat(Gl(a.serverSyncTree_,o,f));const h=ud(a,o);oa(a,h)}),a.onDisconnect_=ko(),Xt(a.eventQueue_,ge(),l)}function ix(a,t,i){let l;ie(t._path)===".info"?l=oh(a.infoSyncTree_,t,i):l=oh(a.serverSyncTree_,t,i),D0(a.eventQueue_,t._path,l)}function sx(a,t,i){let l;ie(t._path)===".info"?l=Vo(a.infoSyncTree_,t,i):l=Vo(a.serverSyncTree_,t,i),D0(a.eventQueue_,t._path,l)}function ax(a){a.persistentConnection_&&a.persistentConnection_.interrupt(KN)}function Yl(a,...t){let i="";a.persistentConnection_&&(i=a.persistentConnection_.id+":"),rt(i,...t)}function ch(a,t,i,l){t&&ma(()=>{if(i==="ok")t(null);else{const o=(i||"error").toUpperCase();let f=o;l&&(f+=": "+l);const h=new Error(f);h.code=o,t(h)}})}function k0(a,t,i){return Xh(a.serverSyncTree_,t,i)||F.EMPTY_NODE}function od(a,t=a.transactionQueueTree_){if(t||iu(a,t),ga(t)){const i=U0(a,t);z(i.length>0,"Sending zero length transaction queue"),i.every(o=>o.status===0)&&lx(a,Pl(t),i)}else A0(t)&&$o(t,i=>{od(a,i)})}function lx(a,t,i){const l=i.map(p=>p.currentWriteId),o=k0(a,t,l);let f=o;const h=o.hash();for(let p=0;p<i.length;p++){const b=i[p];z(b.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const y=ht(t,b.path);f=f.updateChild(y,b.currentOutputSnapshotRaw)}const m=f.val(!0),g=t;a.server_.put(g.toString(),m,p=>{Yl(a,"transaction put response",{path:g.toString(),status:p});let b=[];if(p==="ok"){const y=[];for(let S=0;S<i.length;S++)i[S].status=2,b=b.concat(yi(a.serverSyncTree_,i[S].currentWriteId)),i[S].onComplete&&y.push(()=>i[S].onComplete(null,!0,i[S].currentOutputSnapshotResolved)),i[S].unwatcher();iu(a,id(a.transactionQueueTree_,t)),od(a,a.transactionQueueTree_),Xt(a.eventQueue_,t,b);for(let S=0;S<y.length;S++)ma(y[S])}else{if(p==="datastale")for(let y=0;y<i.length;y++)i[y].status===3?i[y].status=4:i[y].status=0;else{dt("transaction at "+g.toString()+" failed: "+p);for(let y=0;y<i.length;y++)i[y].status=4,i[y].abortReason=p}oa(a,t)}},h)}function oa(a,t){const i=L0(a,t),l=Pl(i),o=U0(a,i);return rx(a,o,l),l}function rx(a,t,i){if(t.length===0)return;const l=[];let o=[];const h=t.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<t.length;m++){const g=t[m],p=ht(i,g.path);let b=!1,y;if(z(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)b=!0,y=g.abortReason,o=o.concat(yi(a.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=XN)b=!0,y="maxretry",o=o.concat(yi(a.serverSyncTree_,g.currentWriteId,!0));else{const S=k0(a,g.path,h);g.currentInputSnapshot=S;const R=t[m].update(S.val());if(R!==void 0){eu("transaction failed: Data returned ",R,g.path);let U=Ze(R);typeof R=="object"&&R!=null&&dn(R,".priority")||(U=U.updatePriority(S.getPriority()));const fe=g.currentWriteId,_e=nu(a),De=C0(U,S,_e);g.currentOutputSnapshotRaw=U,g.currentOutputSnapshotResolved=De,g.currentWriteId=rd(a),h.splice(h.indexOf(fe),1),o=o.concat(y0(a.serverSyncTree_,g.path,De,g.currentWriteId,g.applyLocally)),o=o.concat(yi(a.serverSyncTree_,fe,!0))}else b=!0,y="nodata",o=o.concat(yi(a.serverSyncTree_,g.currentWriteId,!0))}Xt(a.eventQueue_,i,o),o=[],b&&(t[m].status=2,(function(S){setTimeout(S,Math.floor(0))})(t[m].unwatcher),t[m].onComplete&&(y==="nodata"?l.push(()=>t[m].onComplete(null,!1,t[m].currentInputSnapshot)):l.push(()=>t[m].onComplete(new Error(y),!1,null))))}iu(a,a.transactionQueueTree_);for(let m=0;m<l.length;m++)ma(l[m]);od(a,a.transactionQueueTree_)}function L0(a,t){let i,l=a.transactionQueueTree_;for(i=ie(t);i!==null&&ga(l)===void 0;)l=id(l,i),t=Ie(t),i=ie(t);return l}function U0(a,t){const i=[];return z0(a,t,i),i.sort((l,o)=>l.order-o.order),i}function z0(a,t,i){const l=ga(t);if(l)for(let o=0;o<l.length;o++)i.push(l[o]);$o(t,o=>{z0(a,o,i)})}function iu(a,t){const i=ga(t);if(i){let l=0;for(let o=0;o<i.length;o++)i[o].status!==2&&(i[l]=i[o],l++);i.length=l,w0(t,i.length>0?i:void 0)}$o(t,l=>{iu(a,l)})}function ud(a,t){const i=Pl(L0(a,t)),l=id(a.transactionQueueTree_,t);return UN(l,o=>{Gf(a,o)}),Gf(a,l),N0(l,o=>{Gf(a,o)}),i}function Gf(a,t){const i=ga(t);if(i){const l=[];let o=[],f=-1;for(let h=0;h<i.length;h++)i[h].status===3||(i[h].status===1?(z(f===h-1,"All SENT items should be at beginning of queue."),f=h,i[h].status=3,i[h].abortReason="set"):(z(i[h].status===0,"Unexpected transaction status in abort"),i[h].unwatcher(),o=o.concat(yi(a.serverSyncTree_,i[h].currentWriteId,!0)),i[h].onComplete&&l.push(i[h].onComplete.bind(null,new Error("set"),!1,null))));f===-1?w0(t,void 0):i.length=f+1,Xt(a.eventQueue_,Pl(t),o);for(let h=0;h<l.length;h++)ma(l[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(a){let t="";const i=a.split("/");for(let l=0;l<i.length;l++)if(i[l].length>0){let o=i[l];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}t+="/"+o}return t}function ux(a){const t={};a.charAt(0)==="?"&&(a=a.substring(1));for(const i of a.split("&")){if(i.length===0)continue;const l=i.split("=");l.length===2?t[decodeURIComponent(l[0])]=decodeURIComponent(l[1]):dt(`Invalid query segment '${i}' in query '${a}'`)}return t}const Ry=function(a,t){const i=cx(a),l=i.namespace;i.domain==="firebase.com"&&Bn(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!l||l==="undefined")&&i.domain!=="localhost"&&Bn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||vw();const o=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new Bv(i.host,i.secure,l,o,t,"",l!==i.subdomain),path:new xe(i.pathString)}},cx=function(a){let t="",i="",l="",o="",f="",h=!0,m="https",g=443;if(typeof a=="string"){let p=a.indexOf("//");p>=0&&(m=a.substring(0,p-1),a=a.substring(p+2));let b=a.indexOf("/");b===-1&&(b=a.length);let y=a.indexOf("?");y===-1&&(y=a.length),t=a.substring(0,Math.min(b,y)),b<y&&(o=ox(a.substring(b,y)));const S=ux(a.substring(Math.min(a.length,y)));p=t.indexOf(":"),p>=0?(h=m==="https"||m==="wss",g=parseInt(t.substring(p+1),10)):p=t.length;const R=t.slice(0,p);if(R.toLowerCase()==="localhost")i="localhost";else if(R.split(".").length<=2)i=R;else{const U=t.indexOf(".");l=t.substring(0,U).toLowerCase(),i=t.substring(U+1),f=l}"ns"in S&&(f=S.ns)}return{host:t,port:g,domain:i,subdomain:l,secure:h,scheme:m,pathString:o,namespace:f}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fx=(function(){let a=0;const t=[];return function(i){const l=i===a;a=i;let o;const f=new Array(8);for(o=7;o>=0;o--)f[o]=Oy.charAt(i%64),i=Math.floor(i/64);z(i===0,"Cannot push at time == 0");let h=f.join("");if(l){for(o=11;o>=0&&t[o]===63;o--)t[o]=0;t[o]++}else for(o=0;o<12;o++)t[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)h+=Oy.charAt(t[o]);return z(h.length===20,"nextPushId: Length should be 20."),h}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t,i,l,o){this.eventType=t,this.eventRegistration=i,this.snapshot=l,this.prevName=o}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+We(this.snapshot.exportVal())}}class dx{constructor(t,i,l){this.eventRegistration=t,this.error=i,this.path=l}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(t,i){this.snapshotCallback=t,this.cancelCallback=i}onValue(t,i){this.snapshotCallback.call(null,t,i)}onCancel(t){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(t,i,l,o){this._repo=t,this._path=i,this._queryParams=l,this._orderByCalled=o}get key(){return oe(this._path)?null:Uh(this._path)}get ref(){return new qn(this._repo,this._path)}get _queryIdentifier(){const t=py(this._queryParams),i=Mh(t);return i==="{}"?"default":i}get _queryObject(){return py(this._queryParams)}isEqual(t){if(t=pt(t),!(t instanceof cd))return!1;const i=this._repo===t._repo,l=zh(this._path,t._path),o=this._queryIdentifier===t._queryIdentifier;return i&&l&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+nA(this._path)}}class qn extends cd{constructor(t,i){super(t,i,new qh,!1)}get parent(){const t=Xv(this._path);return t===null?null:new qn(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class Il{constructor(t,i,l){this._node=t,this.ref=i,this._index=l}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const i=new xe(t),l=kl(this.ref,t);return new Il(this._node.getChild(i),l,Be)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(l,o)=>t(new Il(o,kl(this.ref,l),Be)))}hasChild(t){const i=new xe(t);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Fs(a,t){return a=pt(a),a._checkNotDeleted("ref"),t!==void 0?kl(a._root,t):a._root}function kl(a,t){return a=pt(a),ie(a._path)===null?PN("child","path",t):O0("child","path",t),new qn(a._repo,je(a._path,t))}function mx(a,t){a=pt(a),ad("push",a._path),R0("push",t,a._path,!0);const i=I0(a._repo),l=fx(i),o=kl(a,l),f=kl(a,l);let h;return h=Promise.resolve(f),o.then=h.then.bind(h),o.catch=h.then.bind(h,void 0),o}function px(a){return ad("remove",a._path),fh(a,null)}function fh(a,t){a=pt(a),ad("set",a._path),R0("set",t,a._path,!1);const i=new Ll;return ex(a._repo,a._path,t,null,i.wrapCallback(()=>{})),i.promise}function gx(a,t){GN("update",t,a._path);const i=new Ll;return tx(a._repo,a._path,t,i.wrapCallback(()=>{})),i.promise}function _x(a){a=pt(a);const t=new H0(()=>{}),i=new su(t);return $N(a._repo,a,i).then(l=>new Il(l,new qn(a._repo,a._path),a._queryParams.getIndex()))}class su{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,i){const l=i._queryParams.getIndex();return new hx("value",this,new Il(t.snapshotNode,new qn(i._repo,i._path),l))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,i){return this.callbackContext.hasCancelCallback?new dx(this,t,i):null}matches(t){return t instanceof su?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function yx(a,t,i,l,o){const f=new H0(i,void 0),h=new su(f);return ix(a._repo,a,h),()=>sx(a._repo,a,h)}function vx(a,t,i,l){return yx(a,"value",t)}mN(qn);vN(qn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="FIREBASE_DATABASE_EMULATOR_HOST",hh={};let Sx=!1;function Ex(a,t,i,l){const o=t.lastIndexOf(":"),f=t.substring(0,o),h=ca(f);a.repoInfo_=new Bv(t,h,a.repoInfo_.namespace,a.repoInfo_.webSocketOnly,a.repoInfo_.nodeAdmin,a.repoInfo_.persistenceKey,a.repoInfo_.includeNamespaceInQueryParams,!0,i),l&&(a.authTokenProvider_=l)}function Tx(a,t,i,l,o){let f=l||a.options.databaseURL;f===void 0&&(a.options.projectId||Bn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rt("Using default host for project ",a.options.projectId),f=`${a.options.projectId}-default-rtdb.firebaseio.com`);let h=Ry(f,o),m=h.repoInfo,g;typeof process<"u"&&W_&&(g=W_[bx]),g?(f=`http://${g}?ns=${m.namespace}`,h=Ry(f,o),m=h.repoInfo):h.repoInfo.secure;const p=new Ow(a.name,a.options,t);YN("Invalid Firebase Database URL",h),oe(h.path)||Bn("Database URL must point to the root of a Firebase Database (not including a child path).");const b=wx(m,a,p,new Rw(a,i));return new Ax(b,a)}function Cx(a,t){const i=hh[t];(!i||i[a.key]!==a)&&Bn(`Database ${t}(${a.repoInfo_}) has already been deleted.`),ax(a),delete i[a.key]}function wx(a,t,i,l){let o=hh[t.name];o||(o={},hh[t.name]=o);let f=o[a.toURLString()];return f&&Bn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),f=new ZN(a,Sx,i,l),o[a.toURLString()]=f,f}class Ax{constructor(t,i){this._repoInternal=t,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(WN(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qn(this._repo,ge())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Cx(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Bn("Cannot call "+t+" on a deleted database.")}}function Nx(a=Fy(),t){const i=bh(a,"database").getImmediate({identifier:t});if(!i._instanceStarted){const l=UE("database");l&&xx(i,...l)}return i}function xx(a,t,i,l={}){a=pt(a),a._checkNotDeleted("useEmulator");const o=`${t}:${i}`,f=a._repoInternal;if(a._instanceStarted){if(o===a._repoInternal.repoInfo_.host&&es(l,f.repoInfo_.emulatorOptions))return;Bn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(f.repoInfo_.nodeAdmin)l.mockUserToken&&Bn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new vo(vo.OWNER);else if(l.mockUserToken){const m=typeof l.mockUserToken=="string"?l.mockUserToken:zE(l.mockUserToken,a.app.options.projectId);h=new vo(m)}ca(t)&&(By(t),qy("Database",!0)),Ex(f,o,l,h)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(a){dw(ha),na(new ts("database",(t,{instanceIdentifier:i})=>{const l=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),f=t.getProvider("app-check-internal");return Tx(l,o,f,i)},"PUBLIC").setMultipleInstances(!0)),Ei(J_,$_,a),Ei(J_,$_,"esm2020")}zn.prototype.simpleListen=function(a,t){this.sendRequest("q",{p:a},t)};zn.prototype.echo=function(a,t){this.sendRequest("echo",{d:a},t)};Rx();const Ox={apiKey:"AIzaSyDe5lAkO9SOuQ7O_RIzwvz5d58GwNW_ls4",authDomain:"superyap.firebaseapp.com",databaseURL:"https://superyap-default-rtdb.firebaseio.com",projectId:"superyap",storageBucket:"superyap.firebasestorage.app",messagingSenderId:"697948183395",appId:"1:697948183395:web:286e3bf1ce96f03253d156"},j0=Qy(Ox),dh=fw(j0),Dx=new In,Ks=Nx(j0);class Mx{onValue(t,i){const l=Fs(Ks,t);return vx(l,o=>{const f=o.val();i(f)})}async set(t,i){const l=Fs(Ks,t);await fh(l,i)}async push(t,i){const l=Fs(Ks,t),o=mx(l);await fh(o,{...i,id:o.key})}async updateMessage(t,i,l){const o=Fs(Ks,`${t}/${i}`);await gx(o,l)}async remove(t){const i=Fs(Ks,t);await px(i)}async removeMessage(t,i){await this.remove(`${t}/${i}`)}async get(t){const i=Fs(Ks,t);return(await _x(i)).val()}}const Ft=new Mx,B0=(a,t)=>{const i=[a,t].sort();return`chats/${i[0]}_${i[1]}`},q0=({index:a,className:t=""})=>{const[i,l]=pe.useState(`/emojis/emoji_${a}.png`),[o,f]=pe.useState(!1);pe.useEffect(()=>{l(`/emojis/emoji_${a}.png`),f(!1)},[a]);const h=()=>{i.endsWith(`emoji_${a}.png`)?l(`/emojis/emoji${a}.png`):i.endsWith(`emoji${a}.png`)?l(`/emojis/${a}.png`):f(!0)};return o?C.jsx("div",{className:`inline-flex items-center justify-center bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl ${t}`,title:`Missing sticker: ${a}`,children:C.jsx("span",{className:"text-slate-300 font-chewy text-xl select-none",children:"?"})}):C.jsx("div",{className:`inline-flex items-center justify-center overflow-hidden ${t}`,children:C.jsx("img",{src:i,alt:`Sticker ${a}`,className:"w-full h-full object-contain drop-shadow-md hover:scale-110 transition-transform duration-200",loading:"lazy",onError:h})})},Ix=["","","","","",""],kx=({onReact:a,onDelete:t,onClose:i,isMe:l})=>C.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm animate-in fade-in duration-200",onClick:i,children:C.jsx("div",{className:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-xs animate-in zoom-in-95 duration-200",onClick:o=>o.stopPropagation(),children:C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"space-y-3",children:[C.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] text-center",children:"React"}),C.jsx("div",{className:"grid grid-cols-6 gap-2",children:Ix.map(o=>C.jsx("button",{onClick:()=>a(o),className:"text-2xl hover:scale-125 transition-transform active:scale-95 p-1",children:o},o))})]}),C.jsx("div",{className:"h-px bg-slate-100"}),C.jsxs("div",{className:"space-y-2",children:[C.jsxs("button",{onClick:t,className:`w-full py-4 px-4 rounded-2xl flex items-center justify-center gap-2 font-black text-sm uppercase tracking-widest transition-colors ${l?"bg-red-50 text-red-500 hover:bg-red-100":"bg-slate-50 text-slate-400 cursor-not-allowed opacity-50"}`,disabled:!l,children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Message"]}),!l&&C.jsx("p",{className:"text-[9px] text-center text-slate-400 font-bold italic",children:"Only your own messages can be deleted"})]}),C.jsx("button",{onClick:i,className:"w-full py-3 text-slate-500 font-bold text-sm hover:text-slate-900 transition-colors uppercase tracking-widest",children:"Cancel"})]})})}),Lx=(a,t,{threshold:i=500,onStart:l,onCancel:o}={})=>{const[f,h]=pe.useState(!1),m=pe.useRef(),g=pe.useRef(!1),p=pe.useCallback(y=>{g.current=!1,l&&l(y),m.current=setTimeout(()=>{g.current||(h(!0),a(y))},i)},[a,i,l]),b=pe.useCallback(y=>{g.current=!0,m.current&&clearTimeout(m.current),f&&h(!1),o&&o(y)},[t,f,o]);return{onMouseDown:p,onMouseUp:b,onMouseLeave:b,onTouchStart:p,onTouchEnd:b}},Ux=({msg:a,user:t,contact:i,isMe:l,isLastInGroup:o,onSelect:f,onReact:h})=>{const m=My(a.content,i.hashingKey),g=m.startsWith("EMOJI:"),p=g?parseInt(m.split(":")[1],10):-1,b=Lx(()=>f(a));return C.jsxs("div",{className:`flex items-end gap-3 ${l?"flex-row-reverse":""} mb-2`,children:[C.jsx("div",{className:`shrink-0 ${o?"opacity-100":"opacity-0"} w-8 h-8`,children:C.jsx(vi,{id:l?t.id:i.id,username:l?t.username:i.username,className:"w-8 h-8"})}),C.jsxs("div",{className:`flex flex-col ${l?"items-end":"items-start"} max-w-[80%]`,children:[g?C.jsx("div",{className:"p-2 animate-in zoom-in duration-300 transform transition-transform hover:scale-110 cursor-pointer",onDoubleClick:()=>f(a),...b,children:C.jsx(q0,{index:p,className:"w-28 h-28 lg:w-44 lg:h-44"})}):C.jsx("div",{className:`px-5 py-3 rounded-3xl transition-colors cursor-pointer select-none ${l?"bg-slate-900 text-white rounded-br-none hover:bg-black":"bg-slate-100 text-slate-800 rounded-bl-none hover:bg-slate-200"}`,onDoubleClick:()=>f(a),...b,children:C.jsx("p",{className:"text-sm lg:text-base font-bold leading-relaxed whitespace-pre-wrap",children:m})}),a.reactions&&Object.keys(a.reactions).length>0&&C.jsx("div",{className:`flex flex-wrap gap-1 mt-1 ${l?"justify-end":"justify-start"}`,children:Object.entries(a.reactions).map(([y,S])=>C.jsxs("button",{onClick:()=>{f(a),h(y)},className:`flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs border transition-all ${S.includes(t.id)?"bg-slate-900 border-slate-900 text-white":"bg-white border-slate-100 text-slate-600 hover:border-slate-300"}`,children:[C.jsx("span",{className:"text-sm",children:y}),C.jsx("span",{className:"font-black text-[10px]",children:S.length})]},y))}),o&&C.jsx("span",{className:"text-[8px] font-black text-slate-300 mt-1 uppercase tracking-widest",children:new Date(a.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},zx=40,Hx=({contact:a,user:t,onBack:i,hideHeader:l=!1})=>{const[o,f]=pe.useState([]),[h,m]=pe.useState(""),[g,p]=pe.useState(!1),[b,y]=pe.useState(null),S=pe.useRef(null),R=B0(t.id,a.id);pe.useEffect(()=>{const Z=Ft.onValue(R,Y=>{if(Y){const W=Object.values(Y);f(W)}else f([])});return()=>Z()},[R]),pe.useEffect(()=>{S.current&&(S.current.scrollTop=S.current.scrollHeight)},[o]);const U=Z=>{const Y=AE(Z,a.hashingKey),W={senderId:t.id,content:Y,timestamp:Date.now()};Ft.push(R,W)},G=Z=>{Z.preventDefault(),h.trim()&&(U(h),m(""))},fe=Z=>{U(`EMOJI:${Z}`),p(!1)},_e=()=>{b&&(Ft.removeMessage(R,b.id),y(null))},De=Z=>{if(b){const Y=b.reactions||{},W=Y[Z]||[];let ye;W.includes(t.id)?ye=W.filter(Ke=>Ke!==t.id):ye=[...W,t.id];const K={...Y};ye.length>0?K[Z]=ye:delete K[Z],Ft.updateMessage(R,b.id,{reactions:K}),y(null)}};return C.jsxs("div",{className:"flex flex-col h-full bg-white animate-in slide-in-from-right duration-500",children:[!l&&C.jsx("div",{className:"h-16 flex items-center justify-between px-6 bg-white border-b border-slate-50 sticky top-0 z-10 shrink-0",children:C.jsxs("div",{className:"flex items-center gap-4",children:[C.jsx("button",{onClick:i,className:"lg:hidden p-2 -ml-2 hover:bg-slate-50 rounded-full text-slate-400 transition-colors",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),C.jsx(vi,{id:a.id,username:a.username,className:"w-10 h-10"}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-black text-slate-900 leading-tight text-sm lg:text-base",children:a.username}),C.jsx("p",{className:"text-[9px] text-slate-400 font-black uppercase tracking-widest",children:"End-to-end Hashed"})]})]})}),C.jsx("div",{ref:S,className:"flex-1 overflow-y-auto px-6 lg:px-12 py-8 space-y-6 bg-white",children:o.map((Z,Y)=>{const W=Z.senderId===t.id,ye=o[Y+1],K=!ye||ye.senderId!==Z.senderId;return C.jsx(Ux,{msg:Z,user:t,contact:a,isMe:W,isLastInGroup:K,onSelect:y,onReact:De},Z.id||Y)})}),C.jsxs("div",{className:"bg-white shrink-0 border-t border-slate-50 pb-safe",children:[g&&C.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100 animate-in slide-in-from-bottom duration-300",children:C.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-8 md:grid-cols-10 gap-3 max-h-[280px] overflow-y-auto no-scrollbar py-2",children:Array.from({length:zx}).map((Z,Y)=>{const W=Y+1;return C.jsx("button",{type:"button",onClick:()=>fe(W),className:"aspect-square flex items-center justify-center p-1.5 bg-white rounded-2xl hover:bg-slate-100 hover:shadow-sm transition-all active:scale-90 border border-slate-100 overflow-hidden",children:C.jsx(q0,{index:W,className:"w-full h-full"})},W)})})}),C.jsx("div",{className:"p-4 lg:p-6 pb-[calc(1rem+env(safe-area-inset-bottom))] lg:pb-6 max-w-5xl mx-auto w-full",children:C.jsxs("form",{onSubmit:G,className:"flex items-center gap-3 bg-slate-50 rounded-full px-5 py-2 border border-slate-100 focus-within:border-slate-300 focus-within:bg-white transition-all",children:[C.jsx("button",{type:"button",onClick:()=>p(!g),className:`p-2 rounded-full transition-all ${g?"text-slate-900 bg-white rotate-12":"text-slate-400 hover:text-slate-600"}`,children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),C.jsx("input",{type:"text",value:h,onChange:Z=>m(Z.target.value),placeholder:"Secure hashed message...",className:"flex-1 bg-transparent border-none py-2 text-slate-900 focus:outline-none placeholder-slate-400 font-bold text-sm lg:text-base"}),C.jsx("button",{type:"submit",disabled:!h.trim(),className:"w-10 h-10 bg-slate-900 hover:bg-black rounded-full flex items-center justify-center text-white disabled:opacity-20 transition-all active:scale-90 shrink-0 border-none",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 rotate-90",viewBox:"0 0 20 20",fill:"currentColor",children:C.jsx("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"})})})]})})]}),b&&C.jsx(kx,{isMe:b.senderId===t.id,onDelete:_e,onReact:De,onClose:()=>y(null)})]})},jx=({user:a,onUpdate:t,onBack:i})=>{const[l,o]=pe.useState(!1),f=()=>{navigator.clipboard.writeText(a.id),o(!0),setTimeout(()=>o(!1),2e3)};return C.jsx("div",{className:"h-full bg-white flex flex-col overflow-y-auto animate-in fade-in slide-in-from-bottom duration-500",children:C.jsxs("div",{className:"w-full max-w-2xl mx-auto px-6 py-10 lg:py-16 pb-[calc(2.5rem+env(safe-area-inset-bottom))] lg:pb-16",children:[C.jsxs("div",{className:"mb-10",children:[C.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Account"}),C.jsx("p",{className:"text-sm text-slate-400 font-bold mt-1",children:"Manage your identity and encryption keys."})]}),C.jsxs("div",{className:"space-y-10",children:[C.jsxs("section",{className:"flex flex-col sm:flex-row items-center gap-8 p-6 lg:p-8 bg-slate-100 rounded-none border-none",children:[C.jsx("div",{className:"relative group shrink-0",children:C.jsx(vi,{id:a.id,username:a.username,className:"w-24 h-24 text-4xl"})}),C.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0",children:[C.jsx("h4",{className:"font-black text-slate-800 text-xl mb-1 truncate",children:a.username}),C.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Permanent Identity Image"}),C.jsx("p",{className:"mt-2 text-[10px] text-slate-400 font-medium",children:"Profile pictures are automatically generated from your Public Key."})]})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Display Alias"}),C.jsx("input",{type:"text",value:a.username,onChange:h=>t({username:h.target.value}),className:"w-full bg-slate-100 border-none p-4 rounded-none outline-none font-bold text-base text-slate-700 focus:bg-slate-200"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Master Hash Key"}),C.jsx("input",{type:"password",value:a.hashingKey,onChange:h=>t({hashingKey:h.target.value}),className:"w-full bg-slate-100 border-none p-4 rounded-none outline-none font-bold text-base text-slate-700 focus:bg-slate-200"})]})]}),C.jsx("div",{className:"p-8 bg-slate-100 rounded-none border-none overflow-hidden",children:C.jsxs("div",{className:"flex flex-col gap-5",children:[C.jsxs("div",{className:"min-w-0",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-900 uppercase tracking-widest block mb-2",children:"Public Key"}),C.jsx("code",{className:"text-[11px] font-mono text-slate-900 font-black break-all block bg-white p-3 rounded-none border-none",children:a.id})]}),C.jsxs("button",{onClick:f,className:`w-full lg:w-max px-8 py-3 rounded-full font-black transition-all flex items-center justify-center gap-3 text-sm border-none ${l?"bg-emerald-500 text-white":"bg-slate-900 text-white hover:bg-black shadow-none"}`,children:[l?"Copied":"Copy Key",C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})]})]})}),C.jsx("button",{onClick:i,className:"w-full bg-slate-100 hover:bg-slate-200 text-slate-900 font-black py-4 rounded-full transition-all active:scale-[0.98] uppercase tracking-widest text-xs border-none",children:"Confirm Changes"}),C.jsx("button",{onClick:()=>eC(dh),className:"w-full bg-red-50 hover:bg-red-100 text-red-500 font-black py-4 rounded-full transition-all active:scale-[0.98] uppercase tracking-widest text-xs border-none mt-4",children:"Logout session"})]})]})})},Bx=({onAdd:a,onBack:t})=>{const[i,l]=pe.useState(""),[o,f]=pe.useState(""),[h,m]=pe.useState(""),[g,p]=pe.useState(!1),b=async R=>{if(!(R.length<5)){p(!0);try{const U=await Ft.get(`users/${R}`);U&&f(U.username)}catch(U){console.error("User lookup failed",U)}finally{p(!1)}}},y=R=>{const U=R.target.value;l(U),U.length>=10&&b(U)},S=R=>{if(R.preventDefault(),!i||!o||!h)return;const U={id:i.trim(),username:o.trim(),hashingKey:h.trim(),avatar:"robohash"};a(U)};return C.jsx("div",{className:"h-full bg-white flex flex-col overflow-y-auto animate-in fade-in slide-in-from-bottom duration-500",children:C.jsxs("div",{className:"w-full max-w-2xl mx-auto px-6 py-10 lg:py-16",children:[C.jsxs("div",{className:"mb-10",children:[C.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Add Friend"}),C.jsx("p",{className:"text-sm text-slate-400 font-bold mt-1",children:"Connect with their identity key to start chatting."})]}),C.jsxs("form",{onSubmit:S,className:"space-y-10",children:[C.jsxs("section",{className:"flex flex-col sm:flex-row items-center gap-8 p-6 lg:p-8 bg-slate-100 rounded-none border-none",children:[C.jsx("div",{className:"shrink-0",children:C.jsx(vi,{id:i||"temp",username:o||"?",className:"w-24 h-24 text-4xl"})}),C.jsxs("div",{className:"flex-1 text-center sm:text-left min-w-0",children:[C.jsx("h4",{className:"font-black text-slate-800 text-xl mb-1 truncate",children:o||"Friend Alias"}),C.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Deterministic Profile Icon"})]})]}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"space-y-2",children:[C.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Public Identity Key ",g&&C.jsx("span",{className:"animate-pulse ml-2 text-slate-300",children:"Searching..."})]}),C.jsx("input",{type:"text",value:i,onChange:y,placeholder:"Paste UID or Identity Key",className:"w-full bg-slate-100 border-none p-4 rounded-none outline-none font-mono text-sm text-slate-900 font-bold"})]}),C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Local Alias"}),C.jsx("input",{type:"text",value:o,onChange:R=>f(R.target.value),placeholder:"Name your friend",className:"w-full bg-slate-100 border-none p-4 rounded-none outline-none font-bold text-base text-slate-700"})]}),C.jsxs("div",{className:"bg-slate-100 p-8 rounded-none border-none space-y-4",children:[C.jsx("label",{className:"text-[10px] font-black text-slate-900 uppercase tracking-widest block px-1",children:"Shared Chat Secret"}),C.jsx("input",{type:"password",value:h,onChange:R=>m(R.target.value),placeholder:"Hash Pin",className:"w-full bg-white border-none p-4 rounded-none outline-none font-bold text-base text-slate-700"}),C.jsx("p",{className:"text-[9px] text-slate-400 font-black text-center uppercase tracking-widest opacity-70",children:"Required for end-to-end decryption"})]})]}),C.jsx("button",{type:"submit",disabled:!i||!o||!h,className:"w-full bg-slate-900 hover:bg-black disabled:opacity-30 text-white font-black py-4 rounded-full transition-all active:scale-[0.98] uppercase tracking-widest text-xs border-none shadow-none",children:"Start Hashed Chat"})]})]})})},qx=()=>{const[a,t]=pe.useState(null),[i,l]=pe.useState(null),[o,f]=pe.useState("HOME"),[h,m]=pe.useState(null),[g,p]=pe.useState([]),[b,y]=pe.useState(!0),[S,R]=pe.useState(!0);pe.useEffect(()=>{const Y=setTimeout(()=>{y(!1)},2e3);return()=>clearTimeout(Y)},[]),pe.useEffect(()=>{const Y=$T(dh,async W=>{if(W){l(W);const ye=await Ft.get(`users/${W.uid}`);if(ye)t(ye);else{const K={id:W.uid,username:W.displayName||`User_${W.uid.substring(0,5)}`,avatar:W.photoURL||"robohash",hashingKey:"master_key_"+Math.random().toString(36).substring(7)};await Ft.set(`users/${W.uid}`,K),t(K)}}else l(null),t(null);R(!1)});return()=>Y()},[]),pe.useEffect(()=>{if(!a)return;const Y=Ft.onValue(`users/${a.id}/contacts`,W=>{if(W){const ye=Object.values(W);p(ye)}});return()=>Y()},[a==null?void 0:a.id]),pe.useEffect(()=>{if(!a||g.length===0)return;const Y=g.map(W=>{const ye=B0(a.id,W.id);return Ft.onValue(ye,K=>{if(K&&K.length>0){const Ke=Object.values(K),At=Ke[Ke.length-1];p(Vn=>Vn.map(gt=>gt.id===W.id?{...gt,lastMessage:At.content,lastTimestamp:At.timestamp}:gt))}})});return()=>Y.forEach(W=>W())},[a==null?void 0:a.id,g.length]);const U=async()=>{try{await bC(dh,Dx)}catch(Y){console.error("Login failed",Y)}},G=[...g].sort((Y,W)=>(W.lastTimestamp||0)-(Y.lastTimestamp||0)),fe=async Y=>{if(!a)return;const W={...a,...Y};await Ft.set(`users/${a.id}`,W),t(W)},_e=async Y=>{if(!a)return;g.find(ye=>ye.id===Y.id)||await Ft.set(`users/${a.id}/contacts/${Y.id}`,Y),f("HOME")},De=async Y=>{a&&(await Ft.remove(`users/${a.id}/contacts/${Y}`),(h==null?void 0:h.id)===Y&&(f("HOME"),m(null)))},Z=Y=>{m(Y),f("CHAT")};return b?C.jsx("div",{className:"fixed inset-0 z-[999] flex flex-col items-center justify-center bg-white animate-out fade-out duration-700 fill-mode-forwards",children:C.jsx("h1",{className:"text-7xl font-chewy font-black text-slate-900 tracking-tight animate-in zoom-in-75 duration-500 uppercase",children:"Super Yap"})}):S?null:i?a?C.jsxs("div",{className:"flex h-[100dvh] w-full bg-white overflow-hidden text-slate-900 animate-in fade-in duration-500",children:[C.jsxs("aside",{className:"hidden lg:flex w-80 bg-slate-50 flex-col shrink-0 border-r border-slate-100",children:[C.jsx("div",{className:"h-16 flex items-center px-6",children:C.jsx("button",{onClick:()=>f("HOME"),className:"font-chewy text-2xl text-slate-900 tracking-wide",children:"Super Yap"})}),C.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-4",children:C.jsx(E_,{contacts:G,onChatClick:Z,onDeleteChat:De,activeContactId:h==null?void 0:h.id,isMobile:!1})}),C.jsx("div",{className:"p-4 bg-slate-50 border-t border-slate-100",children:C.jsxs("button",{onClick:()=>f("DASHBOARD"),className:`flex items-center gap-3 w-full p-3 rounded-2xl transition-all group border-none ${o==="DASHBOARD"?"bg-slate-900 text-white":"hover:bg-white text-slate-700 hover:shadow-sm"}`,children:[C.jsx(vi,{id:a.id,username:a.username,className:"w-10 h-10"}),C.jsxs("div",{className:"flex-1 text-left min-w-0",children:[C.jsx("p",{className:"text-sm font-black truncate",children:a.username}),C.jsx("p",{className:`text-[10px] font-black uppercase tracking-widest ${o==="DASHBOARD"?"text-white/50":"text-slate-400"}`,children:"Settings"})]})]})})]}),C.jsxs("main",{className:"flex-1 flex flex-col relative bg-white min-w-0 overflow-hidden",children:[C.jsxs("header",{className:`h-16 flex items-center justify-between px-6 bg-white border-b border-slate-50 sticky top-0 z-20 shrink-0 ${o==="HOME"&&"lg:hidden"}`,children:[C.jsxs("div",{className:"flex items-center gap-3",children:[o!=="HOME"&&C.jsx("button",{onClick:()=>f("HOME"),className:"p-2 -ml-2 rounded-full text-slate-400 transition-colors hover:bg-slate-100","aria-label":"Back",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15 19l-7-7 7-7"})})}),C.jsxs("div",{children:[o==="HOME"&&C.jsx("h1",{className:"font-chewy text-2xl text-slate-900",children:"Super Yap"}),o==="CHAT"&&h&&C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx(vi,{id:h.id,username:h.username,className:"w-8 h-8"}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-black text-slate-900 text-sm leading-none",children:h.username}),C.jsx("p",{className:"text-[9px] text-slate-400 font-black uppercase tracking-widest mt-1",children:"Hashed Active"})]})]}),o==="DASHBOARD"&&C.jsx("h1",{className:"font-black text-slate-800 tracking-widest uppercase text-sm",children:"Profile Settings"}),o==="ADD_CONTACT"&&C.jsx("h1",{className:"font-black text-slate-800 tracking-widest uppercase text-sm",children:"Connect with Hash"})]})]}),C.jsx("div",{className:"flex items-center gap-4",children:o==="HOME"&&C.jsx("button",{onClick:()=>f("DASHBOARD"),className:"lg:hidden",children:C.jsx(vi,{id:a.id,username:a.username,className:"w-10 h-10"})})})]}),C.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[o==="HOME"&&C.jsxs("div",{className:"h-full flex flex-col",children:[C.jsx("div",{className:"lg:hidden flex-1 overflow-y-auto",children:C.jsx(E_,{contacts:G,onChatClick:Z,onDeleteChat:De,activeContactId:h==null?void 0:h.id,isMobile:!0})}),C.jsxs("div",{className:"hidden lg:flex h-full flex-col items-center justify-center p-12 text-center",children:[C.jsx("div",{className:"w-24 h-24 bg-slate-50 flex items-center justify-center mb-8 rounded-3xl border border-slate-100",children:C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-slate-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),C.jsx("h2",{className:"text-4xl font-chewy text-slate-800 mb-2 tracking-wide",children:"Ready for lift off?"}),C.jsx("p",{className:"text-slate-400 text-lg max-w-xs mb-10 font-medium",children:"Fast, Hashed, and Minimalist."}),C.jsx("button",{onClick:()=>f("ADD_CONTACT"),className:"bg-slate-900 hover:bg-black text-white font-chewy text-xl py-4 px-12 rounded-full transition-all active:scale-95 flex items-center gap-3 border-none",children:"+ Add Someone"})]})]}),o==="CHAT"&&h&&C.jsx(Hx,{contact:h,user:a,onBack:()=>f("HOME"),hideHeader:!0}),o==="DASHBOARD"&&C.jsx(jx,{user:a,onUpdate:fe,onBack:()=>f("HOME")}),o==="ADD_CONTACT"&&C.jsx(Bx,{onAdd:_e,onBack:()=>f("HOME")})]}),o==="HOME"&&C.jsxs("button",{onClick:()=>f("ADD_CONTACT"),className:"absolute bottom-[calc(2rem+env(safe-area-inset-bottom))] right-8 h-16 px-6 bg-slate-900 rounded-full flex items-center justify-center text-white active:scale-90 z-20 transition-all duration-300 hover:scale-105 hover:bg-black shadow-xl border-none",children:[C.jsx("span",{className:"font-chewy text-2xl mr-2",children:"+"}),C.jsx("span",{className:"font-chewy text-xl uppercase tracking-wider",children:"New"})]})]})]}):null:C.jsxs("div",{className:"flex h-[100dvh] w-full flex-col items-center justify-center bg-white p-6 text-center animate-in fade-in duration-500",children:[C.jsx("h1",{className:"text-6xl font-chewy font-black text-slate-900 mb-4",children:"Super Yap"}),C.jsx("p",{className:"text-slate-400 text-xl max-w-xs mb-10 font-medium",children:"Fast, Hashed, and Minimalist."}),C.jsx("button",{onClick:U,className:"bg-slate-900 hover:bg-black text-white font-chewy text-2xl py-5 px-16 rounded-full transition-all active:scale-95 flex items-center gap-4 border-none shadow-xl",children:"Login with Google"})]})},V0=document.getElementById("root");if(!V0)throw new Error("Could not find root element to mount to");const Vx=EE.createRoot(V0);Vx.render(C.jsx(mo.StrictMode,{children:C.jsx(qx,{})}));
